var Ca=Object.defineProperty;var to=r=>{throw TypeError(r)};var xa=(r,a,o)=>a in r?Ca(r,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[a]=o;var Ve=(r,a,o)=>xa(r,typeof a!="symbol"?a+"":a,o),en=(r,a,o)=>a.has(r)||to("Cannot "+o);var T=(r,a,o)=>(en(r,a,"read from private field"),o?o.call(r):a.get(r)),Me=(r,a,o)=>a.has(r)?to("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(r):a.set(r,o),Te=(r,a,o,l)=>(en(r,a,"write to private field"),l?l.call(r,o):a.set(r,o),o),Ce=(r,a,o)=>(en(r,a,"access private method"),o);var Sr=(r,a,o,l)=>({set _(c){Te(r,a,c,o)},get _(){return T(r,a,l)}});import{K as $r,J as Vr,s as Pt,ax as Fo,U as Ke,R as nr,r as Be,M as Hr,j as $,N as wr,P as qr,aZ as Fi,cR as ro,$ as Ia,a0 as Ta,_ as Oa,dm as tn,dn as Ra,V as no,dp as Pa,dq as ja,c as vr,S as Vt,u as Wi,a as $i,dr as Ba,aH as Wo,ds as Ma,B as ht,a2 as La,dt as Na,f as Ua,du as Da,w as Fa,b as Wa,l as tt,aX as $a,ar as rn,Q as Va,aF as nn,T as Je,p as wn,bB as Ha,bC as qa,bD as za,D as $o,bE as Ya,as as Ga,dv as Ka,dw as Qa,bG as Za,bo as Ja,dx as Xa,dy as el,dz as tl,dA as rl,dB as nl,dC as il,dD as ol,dE as sl,dF as al,dG as ll,dH as ul,dI as hl,bN as cl,a8 as _t,dJ as fl,dK as dl,dL as pl,dM as gl,bX as ml,aI as bl,dN as yl,dh as wl,by as _l,dO as vl}from"./index-DthS9im-.js";import{M as Vo}from"./MainSimpleCard-DOnfgR78.js";import{C as El}from"./CardContent-mIErzORI.js";import{S as Sl}from"./SpeedCameraIcon-BFrRHQjb.js";import{c as Ho}from"./capitalizeFirstLetter-D3I3Kuho.js";import{u as qo}from"./usePreviousProps-sMvt-2hG.js";import{v as kl}from"./v4-C6aID195.js";function Al(r){return $r("MuiAppBar",r)}Vr("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const Cl=r=>{const{color:a,position:o,classes:l}=r,c={root:["root",`color${Ke(a)}`,`position${Ke(o)}`]};return qr(c,Al,l)},io=(r,a)=>r?`${r==null?void 0:r.replace(")","")}, ${a})`:a,xl=Pt(Fo,{name:"MuiAppBar",slot:"Root",overridesResolver:(r,a)=>{const{ownerState:o}=r;return[a.root,a[`position${Ke(o.position)}`],a[`color${Ke(o.color)}`]]}})(nr(({theme:r})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(r.vars||r).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(r.vars||r).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(r.vars||r).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":r.vars?r.vars.palette.AppBar.defaultBg:r.palette.grey[100],"--AppBar-color":r.vars?r.vars.palette.text.primary:r.palette.getContrastText(r.palette.grey[100]),...r.applyStyles("dark",{"--AppBar-background":r.vars?r.vars.palette.AppBar.defaultBg:r.palette.grey[900],"--AppBar-color":r.vars?r.vars.palette.text.primary:r.palette.getContrastText(r.palette.grey[900])})}},...Object.entries(r.palette).filter(Fi(["contrastText"])).map(([a])=>({props:{color:a},style:{"--AppBar-background":(r.vars??r).palette[a].main,"--AppBar-color":(r.vars??r).palette[a].contrastText}})),{props:a=>a.enableColorOnDark===!0&&!["inherit","transparent"].includes(a.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:a=>a.enableColorOnDark===!1&&!["inherit","transparent"].includes(a.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...r.applyStyles("dark",{backgroundColor:r.vars?io(r.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:r.vars?io(r.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...r.applyStyles("dark",{backgroundImage:"none"})}}]}))),qh=Be.forwardRef(function(a,o){const l=Hr({props:a,name:"MuiAppBar"}),{className:c,color:i="primary",enableColorOnDark:e=!1,position:n="fixed",...t}=l,s={...l,color:i,position:n,enableColorOnDark:e},u=Cl(s);return $.jsx(xl,{square:!0,component:"header",ownerState:s,elevation:4,className:wr(u.root,c,n==="fixed"&&"mui-fixed"),ref:o,...t})});function Il(r){const{badgeContent:a,invisible:o=!1,max:l=99,showZero:c=!1}=r,i=qo({badgeContent:a,max:l});let e=o;o===!1&&a===0&&!c&&(e=!0);const{badgeContent:n,max:t=l}=e?i:r,s=n&&Number(n)>t?`${t}+`:n;return{badgeContent:n,invisible:e,max:t,displayValue:s}}function Tl(r){return $r("MuiBadge",r)}const Nt=Vr("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),on=10,sn=4,Ol=r=>{const{color:a,anchorOrigin:o,invisible:l,overlap:c,variant:i,classes:e={}}=r,n={root:["root"],badge:["badge",i,l&&"invisible",`anchorOrigin${Ke(o.vertical)}${Ke(o.horizontal)}`,`anchorOrigin${Ke(o.vertical)}${Ke(o.horizontal)}${Ke(c)}`,`overlap${Ke(c)}`,a!=="default"&&`color${Ke(a)}`]};return qr(n,Tl,e)},Rl=Pt("span",{name:"MuiBadge",slot:"Root",overridesResolver:(r,a)=>a.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Pl=Pt("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(r,a)=>{const{ownerState:o}=r;return[a.badge,a[o.variant],a[`anchorOrigin${Ke(o.anchorOrigin.vertical)}${Ke(o.anchorOrigin.horizontal)}${Ke(o.overlap)}`],o.color!=="default"&&a[`color${Ke(o.color)}`],o.invisible&&a.invisible]}})(nr(({theme:r})=>({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:r.typography.fontFamily,fontWeight:r.typography.fontWeightMedium,fontSize:r.typography.pxToRem(12),minWidth:on*2,lineHeight:1,padding:"0 6px",height:on*2,borderRadius:on,zIndex:1,transition:r.transitions.create("transform",{easing:r.transitions.easing.easeInOut,duration:r.transitions.duration.enteringScreen}),variants:[...Object.entries(r.palette).filter(Fi(["contrastText"])).map(([a])=>({props:{color:a},style:{backgroundColor:(r.vars||r).palette[a].main,color:(r.vars||r).palette[a].contrastText}})),{props:{variant:"dot"},style:{borderRadius:sn,height:sn*2,minWidth:sn*2,padding:0}},{props:({ownerState:a})=>a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Nt.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:a})=>a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Nt.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:a})=>a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Nt.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:a})=>a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Nt.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:a})=>a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Nt.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:a})=>a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Nt.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:a})=>a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Nt.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:a})=>a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Nt.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:r.transitions.create("transform",{easing:r.transitions.easing.easeInOut,duration:r.transitions.duration.leavingScreen})}}]})));function oo(r){return{vertical:(r==null?void 0:r.vertical)??"top",horizontal:(r==null?void 0:r.horizontal)??"right"}}const jl=Be.forwardRef(function(a,o){const l=Hr({props:a,name:"MuiBadge"}),{anchorOrigin:c,className:i,classes:e,component:n,components:t={},componentsProps:s={},children:u,overlap:d="rectangular",color:p="default",invisible:m=!1,max:b=99,badgeContent:w,slots:_,slotProps:A,showZero:y=!1,variant:v="standard",...L}=l,{badgeContent:P,invisible:S,max:C,displayValue:j}=Il({max:b,invisible:m,badgeContent:w,showZero:y}),Q=qo({anchorOrigin:oo(c),color:p,overlap:d,variant:v,badgeContent:w}),ee=S||P==null&&v!=="dot",{color:ae=p,overlap:O=d,anchorOrigin:K,variant:J=v}=ee?Q:l,W=oo(K),be=J!=="dot"?j:void 0,ce={...l,badgeContent:P,invisible:ee,max:C,displayValue:be,showZero:y,anchorOrigin:W,color:ae,overlap:O,variant:J},le=Ol(ce),Se=(_==null?void 0:_.root)??t.Root??Rl,Y=(_==null?void 0:_.badge)??t.Badge??Pl,X=(A==null?void 0:A.root)??s.root,x=(A==null?void 0:A.badge)??s.badge,te=ro({elementType:Se,externalSlotProps:X,externalForwardedProps:L,additionalProps:{ref:o,as:n},ownerState:ce,className:wr(X==null?void 0:X.className,le.root,i)}),de=ro({elementType:Y,externalSlotProps:x,ownerState:ce,className:wr(le.badge,x==null?void 0:x.className)});return $.jsxs(Se,{...te,children:[u,$.jsx(Y,{...de,children:be})]})});function so(r){return r.substring(2).toLowerCase()}function Bl(r,a){return a.documentElement.clientWidth<r.clientX||a.documentElement.clientHeight<r.clientY}function Ml(r){const{children:a,disableReactTree:o=!1,mouseEvent:l="onClick",onClickAway:c,touchEvent:i="onTouchEnd"}=r,e=Be.useRef(!1),n=Be.useRef(null),t=Be.useRef(!1),s=Be.useRef(!1);Be.useEffect(()=>(setTimeout(()=>{t.current=!0},0),()=>{t.current=!1}),[]);const u=Ia(Ta(a),n),d=Oa(b=>{const w=s.current;s.current=!1;const _=tn(n.current);if(!t.current||!n.current||"clientX"in b&&Bl(b,_))return;if(e.current){e.current=!1;return}let A;b.composedPath?A=b.composedPath().includes(n.current):A=!_.documentElement.contains(b.target)||n.current.contains(b.target),!A&&(o||!w)&&c(b)}),p=b=>w=>{s.current=!0;const _=a.props[b];_&&_(w)},m={ref:u};return i!==!1&&(m[i]=p(i)),Be.useEffect(()=>{if(i!==!1){const b=so(i),w=tn(n.current),_=()=>{e.current=!0};return w.addEventListener(b,d),w.addEventListener("touchmove",_),()=>{w.removeEventListener(b,d),w.removeEventListener("touchmove",_)}}},[d,i]),l!==!1&&(m[l]=p(l)),Be.useEffect(()=>{if(l!==!1){const b=so(l),w=tn(n.current);return w.addEventListener(b,d),()=>{w.removeEventListener(b,d)}}},[d,l]),Be.cloneElement(a,m)}function Ll(r){return $r("MuiSwitch",r)}const st=Vr("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Nl=r=>{const{classes:a,edge:o,size:l,color:c,checked:i,disabled:e}=r,n={root:["root",o&&`edge${Ke(o)}`,`size${Ke(l)}`],switchBase:["switchBase",`color${Ke(c)}`,i&&"checked",e&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},t=qr(n,Ll,a);return{...a,...t}},Ul=Pt("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(r,a)=>{const{ownerState:o}=r;return[a.root,o.edge&&a[`edge${Ke(o.edge)}`],a[`size${Ke(o.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${st.thumb}`]:{width:16,height:16},[`& .${st.switchBase}`]:{padding:4,[`&.${st.checked}`]:{transform:"translateX(16px)"}}}}]}),Dl=Pt(Ra,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(r,a)=>{const{ownerState:o}=r;return[a.switchBase,{[`& .${st.input}`]:a.input},o.color!=="default"&&a[`color${Ke(o.color)}`]]}})(nr(({theme:r})=>({position:"absolute",top:0,left:0,zIndex:1,color:r.vars?r.vars.palette.Switch.defaultColor:`${r.palette.mode==="light"?r.palette.common.white:r.palette.grey[300]}`,transition:r.transitions.create(["left","transform"],{duration:r.transitions.duration.shortest}),[`&.${st.checked}`]:{transform:"translateX(20px)"},[`&.${st.disabled}`]:{color:r.vars?r.vars.palette.Switch.defaultDisabledColor:`${r.palette.mode==="light"?r.palette.grey[100]:r.palette.grey[600]}`},[`&.${st.checked} + .${st.track}`]:{opacity:.5},[`&.${st.disabled} + .${st.track}`]:{opacity:r.vars?r.vars.opacity.switchTrackDisabled:`${r.palette.mode==="light"?.12:.2}`},[`& .${st.input}`]:{left:"-100%",width:"300%"}})),nr(({theme:r})=>({"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette.action.activeChannel} / ${r.vars.palette.action.hoverOpacity})`:no(r.palette.action.active,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(r.palette).filter(Fi(["light"])).map(([a])=>({props:{color:a},style:{[`&.${st.checked}`]:{color:(r.vars||r).palette[a].main,"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette[a].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:no(r.palette[a].main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${st.disabled}`]:{color:r.vars?r.vars.palette.Switch[`${a}DisabledColor`]:`${r.palette.mode==="light"?Pa(r.palette[a].main,.62):ja(r.palette[a].main,.55)}`}},[`&.${st.checked} + .${st.track}`]:{backgroundColor:(r.vars||r).palette[a].main}}}))]}))),Fl=Pt("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(r,a)=>a.track})(nr(({theme:r})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:r.transitions.create(["opacity","background-color"],{duration:r.transitions.duration.shortest}),backgroundColor:r.vars?r.vars.palette.common.onBackground:`${r.palette.mode==="light"?r.palette.common.black:r.palette.common.white}`,opacity:r.vars?r.vars.opacity.switchTrack:`${r.palette.mode==="light"?.38:.3}`}))),Wl=Pt("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(r,a)=>a.thumb})(nr(({theme:r})=>({boxShadow:(r.vars||r).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),$l=Be.forwardRef(function(a,o){const l=Hr({props:a,name:"MuiSwitch"}),{className:c,color:i="primary",edge:e=!1,size:n="medium",sx:t,...s}=l,u={...l,color:i,edge:e,size:n},d=Nl(u),p=$.jsx(Wl,{className:d.thumb,ownerState:u});return $.jsxs(Ul,{className:wr(d.root,c),sx:t,ownerState:u,children:[$.jsx(Dl,{type:"checkbox",icon:p,checkedIcon:p,ref:o,ownerState:u,...s,classes:{...d,root:d.switchBase}}),$.jsx(Fl,{className:d.track,ownerState:u})]})});function Vl(r){return $r("MuiToolbar",r)}Vr("MuiToolbar",["root","gutters","regular","dense"]);const Hl=r=>{const{classes:a,disableGutters:o,variant:l}=r;return qr({root:["root",!o&&"gutters",l]},Vl,a)},ql=Pt("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(r,a)=>{const{ownerState:o}=r;return[a.root,!o.disableGutters&&a.gutters,a[o.variant]]}})(nr(({theme:r})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:a})=>!a.disableGutters,style:{paddingLeft:r.spacing(2),paddingRight:r.spacing(2),[r.breakpoints.up("sm")]:{paddingLeft:r.spacing(3),paddingRight:r.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:r.mixins.toolbar}]}))),zh=Be.forwardRef(function(a,o){const l=Hr({props:a,name:"MuiToolbar"}),{className:c,component:i="div",disableGutters:e=!1,variant:n="regular",...t}=l,s={...l,component:i,disableGutters:e,variant:n},u=Hl(s);return $.jsx(ql,{as:i,className:wr(u.root,c),ref:o,ownerState:s,...t})}),zl=vr($.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack"),Yl=vr($.jsx("path",{d:"M9.37 5.51c-.18.64-.27 1.31-.27 1.99 0 4.08 3.32 7.4 7.4 7.4.68 0 1.35-.09 1.99-.27C17.45 17.19 14.93 19 12 19c-3.86 0-7-3.14-7-7 0-2.93 1.81-5.45 4.37-6.49M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1"}),"DarkModeOutlined"),Gl=vr($.jsx("path",{d:"M7 14H5v5h5v-2H7zm-2-4h2V7h3V5H5zm12 7h-3v2h5v-5h-2zM14 5v2h3v3h2V5z"}),"Fullscreen"),Kl=vr($.jsx("path",{d:"M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"}),"FullscreenExit"),Ql=vr($.jsx("path",{d:"M12 9c1.65 0 3 1.35 3 3s-1.35 3-3 3-3-1.35-3-3 1.35-3 3-3m0-2c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5M2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1m18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1M11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1m0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1M5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0z"}),"LightModeOutlined"),Zl=({...r})=>$.jsx(Vt,{...r,children:$.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[$.jsx("mask",{id:"mask0_2799_6900",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:$.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),$.jsx("g",{mask:"url(#mask0_2799_6900)",children:$.jsx("path",{d:"M4 19V17H6V10C6 8.61667 6.41667 7.3875 7.25 6.3125C8.08333 5.2375 9.16667 4.53333 10.5 4.2V2H13.5V4.2C14.8333 4.53333 15.9167 5.2375 16.75 6.3125C17.5833 7.3875 18 8.61667 18 10V17H20V19H4ZM12 22C11.45 22 10.9792 21.8042 10.5875 21.4125C10.1958 21.0208 10 20.55 10 20H14C14 20.55 13.8042 21.0208 13.4125 21.4125C13.0208 21.8042 12.55 22 12 22ZM8 17H16V10C16 8.9 15.6083 7.95833 14.825 7.175C14.0417 6.39167 13.1 6 12 6C10.9 6 9.95833 6.39167 9.175 7.175C8.39167 7.95833 8 8.9 8 10V17Z",fill:"currentColor"})})]})}),an=({isCanceled:r,...a})=>$.jsx(Vt,{...a,children:$.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[r&&$.jsx("rect",{x:"2.21313",y:"2",width:"28.0306",height:"1.72918",transform:"rotate(44.5535 2.21313 2)",fill:"currentColor"}),$.jsx("mask",{id:"mask0_2799_6804",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:$.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),$.jsx("g",{mask:"url(#mask0_2799_6804)",children:$.jsx("path",{d:"M12 17C12.2833 17 12.5208 16.9042 12.7125 16.7125C12.9042 16.5208 13 16.2833 13 16C13 15.7167 12.9042 15.4792 12.7125 15.2875C12.5208 15.0958 12.2833 15 12 15C11.7167 15 11.4792 15.0958 11.2875 15.2875C11.0958 15.4792 11 15.7167 11 16C11 16.2833 11.0958 16.5208 11.2875 16.7125C11.4792 16.9042 11.7167 17 12 17ZM12 13C12.2833 13 12.5208 12.9042 12.7125 12.7125C12.9042 12.5208 13 12.2833 13 12C13 11.7167 12.9042 11.4792 12.7125 11.2875C12.5208 11.0958 12.2833 11 12 11C11.7167 11 11.4792 11.0958 11.2875 11.2875C11.0958 11.4792 11 11.7167 11 12C11 12.2833 11.0958 12.5208 11.2875 12.7125C11.4792 12.9042 11.7167 13 12 13ZM12 9C12.2833 9 12.5208 8.90417 12.7125 8.7125C12.9042 8.52083 13 8.28333 13 8C13 7.71667 12.9042 7.47917 12.7125 7.2875C12.5208 7.09583 12.2833 7 12 7C11.7167 7 11.4792 7.09583 11.2875 7.2875C11.0958 7.47917 11 7.71667 11 8C11 8.28333 11.0958 8.52083 11.2875 8.7125C11.4792 8.90417 11.7167 9 12 9ZM2 20V14C2.55 14 3.02083 13.8042 3.4125 13.4125C3.80417 13.0208 4 12.55 4 12C4 11.45 3.80417 10.9792 3.4125 10.5875C3.02083 10.1958 2.55 10 2 10V4H22V10C21.45 10 20.9792 10.1958 20.5875 10.5875C20.1958 10.9792 20 11.45 20 12C20 12.55 20.1958 13.0208 20.5875 13.4125C20.9792 13.8042 21.45 14 22 14V20H2ZM4 18H20V15.45C19.3833 15.0833 18.8958 14.5958 18.5375 13.9875C18.1792 13.3792 18 12.7167 18 12C18 11.2833 18.1792 10.6208 18.5375 10.0125C18.8958 9.40417 19.3833 8.91667 20 8.55V6H4V8.55C4.61667 8.91667 5.10417 9.40417 5.4625 10.0125C5.82083 10.6208 6 11.2833 6 12C6 12.7167 5.82083 13.3792 5.4625 13.9875C5.10417 14.5958 4.61667 15.0833 4 15.45V18Z",fill:"currentColor"})})]})}),ao=({...r})=>$.jsx(Vt,{...r,children:$.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[$.jsx("mask",{id:"mask0_2799_6824",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:$.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),$.jsx("g",{mask:"url(#mask0_2799_6824)",children:$.jsx("path",{d:"M4 19H20V17H4V19ZM8 13H10V10C10 9.45 10.1958 8.97917 10.5875 8.5875C10.9792 8.19583 11.45 8 12 8V6C10.9 6 9.95833 6.39167 9.175 7.175C8.39167 7.95833 8 8.9 8 10V13ZM7 15H17V10C17 8.61667 16.5125 7.4375 15.5375 6.4625C14.5625 5.4875 13.3833 5 12 5C10.6167 5 9.4375 5.4875 8.4625 6.4625C7.4875 7.4375 7 8.61667 7 10V15ZM2 21V15H5V10C5 8.05 5.67917 6.39583 7.0375 5.0375C8.39583 3.67917 10.05 3 12 3C13.95 3 15.6042 3.67917 16.9625 5.0375C18.3208 6.39583 19 8.05 19 10V15H22V21H2Z",fill:"currentColor"})})]})}),Jl=({...r})=>$.jsx(Vt,{...r,children:$.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[$.jsx("mask",{id:"mask0_2799_6901",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:$.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),$.jsx("g",{mask:"url(#mask0_2799_6901)",children:$.jsx("path",{d:"M19.775 22.625L8.125 10.975C8.09167 11.1417 8.0625 11.3083 8.0375 11.475C8.0125 11.6417 8 11.8167 8 12C8 12.55 8.10417 13.0667 8.3125 13.55C8.52083 14.0333 8.80833 14.4583 9.175 14.825L7.75 16.25C7.21667 15.7 6.79167 15.0625 6.475 14.3375C6.15833 13.6125 6 12.8333 6 12C6 11.5333 6.05 11.0833 6.15 10.65C6.25 10.2167 6.39167 9.80832 6.575 9.42499L5.1 7.94999C4.75 8.54999 4.47917 9.18749 4.2875 9.86249C4.09583 10.5375 4 11.25 4 12C4 13.1167 4.20833 14.1583 4.625 15.125C5.04167 16.0917 5.61667 16.9333 6.35 17.65L4.925 19.075C4.025 18.1583 3.3125 17.0958 2.7875 15.8875C2.2625 14.6792 2 13.3833 2 12C2 10.9667 2.14583 9.99165 2.4375 9.07499C2.72917 8.15832 3.13333 7.29999 3.65 6.49999L1.375 4.22499L2.8 2.79999L21.2 21.2L19.775 22.625ZM20.35 17.5L18.9 16.05C19.25 15.45 19.5208 14.8125 19.7125 14.1375C19.9042 13.4625 20 12.75 20 12C20 10.8833 19.7917 9.84165 19.375 8.87499C18.9583 7.90832 18.3833 7.06665 17.65 6.34999L19.075 4.92499C19.975 5.82499 20.6875 6.87915 21.2125 8.08749C21.7375 9.29582 22 10.6 22 12C22 13.0167 21.8542 13.9875 21.5625 14.9125C21.2708 15.8375 20.8667 16.7 20.35 17.5ZM17.425 14.575L15.875 13.025C15.9083 12.8583 15.9375 12.6917 15.9625 12.525C15.9875 12.3583 16 12.1833 16 12C16 11.45 15.8958 10.9333 15.6875 10.45C15.4792 9.96665 15.1917 9.54165 14.825 9.17499L16.25 7.74999C16.7833 8.28332 17.2083 8.91249 17.525 9.63749C17.8417 10.3625 18 11.15 18 12C18 12.4667 17.95 12.9167 17.85 13.35C17.75 13.7833 17.6083 14.1917 17.425 14.575Z",fill:"currentColor"})})]})}),Xl=({...r})=>$.jsx(Vt,{...r,children:$.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[$.jsx("mask",{id:"mask0_6109_70900",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:$.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),$.jsx("g",{mask:"url(#mask0_6109_70900)",children:$.jsx("path",{d:"M4 21C3.45 21 2.97917 20.8042 2.5875 20.4125C2.19583 20.0208 2 19.55 2 19V8C2 7.45 2.19583 6.97917 2.5875 6.5875C2.97917 6.19583 3.45 6 4 6H8V4C8 3.45 8.19583 2.97917 8.5875 2.5875C8.97917 2.19583 9.45 2 10 2H14C14.55 2 15.0208 2.19583 15.4125 2.5875C15.8042 2.97917 16 3.45 16 4V6H20C20.55 6 21.0208 6.19583 21.4125 6.5875C21.8042 6.97917 22 7.45 22 8V19C22 19.55 21.8042 20.0208 21.4125 20.4125C21.0208 20.8042 20.55 21 20 21H4ZM10 6H14V4H10V6ZM20 15H15V17H9V15H4V19H20V15ZM11 15H13V13H11V15ZM4 13H9V11H15V13H20V8H4V13Z",fill:"currentColor"})})]})}),eu=({...r})=>$.jsx(Vt,{...r,children:$.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[$.jsx("mask",{id:"mask0_2799_6755",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:$.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),$.jsx("g",{mask:"url(#mask0_2799_6755)",children:$.jsx("path",{d:"M5 17.85C5.9 16.9667 6.94583 16.2708 8.1375 15.7625C9.32917 15.2542 10.6167 15 12 15C13.3833 15 14.6708 15.2542 15.8625 15.7625C17.0542 16.2708 18.1 16.9667 19 17.85V5H5V17.85ZM12 13C12.9667 13 13.7917 12.6583 14.475 11.975C15.1583 11.2917 15.5 10.4667 15.5 9.5C15.5 8.53333 15.1583 7.70833 14.475 7.025C13.7917 6.34167 12.9667 6 12 6C11.0333 6 10.2083 6.34167 9.525 7.025C8.84167 7.70833 8.5 8.53333 8.5 9.5C8.5 10.4667 8.84167 11.2917 9.525 11.975C10.2083 12.6583 11.0333 13 12 13ZM3 21V3H21V21H3ZM12 11C11.5833 11 11.2292 10.8542 10.9375 10.5625C10.6458 10.2708 10.5 9.91667 10.5 9.5C10.5 9.08333 10.6458 8.72917 10.9375 8.4375C11.2292 8.14583 11.5833 8 12 8C12.4167 8 12.7708 8.14583 13.0625 8.4375C13.3542 8.72917 13.5 9.08333 13.5 9.5C13.5 9.91667 13.3542 10.2708 13.0625 10.5625C12.7708 10.8542 12.4167 11 12 11ZM6.725 19H17.275C16.5417 18.35 15.7125 17.8542 14.7875 17.5125C13.8625 17.1708 12.9333 17 12 17C11.0667 17 10.1292 17.1708 9.1875 17.5125C8.24583 17.8542 7.425 18.35 6.725 19Z",fill:"currentColor"})})]})}),tu=({...r})=>$.jsx(Vt,{...r,children:$.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[$.jsx("mask",{id:"mask0_2799_6762",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:$.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),$.jsx("g",{mask:"url(#mask0_2799_6762)",children:$.jsx("path",{d:"M19.95 21C17.8667 21 15.8042 20.55 13.7625 19.65C11.7208 18.75 9.86667 17.4667 8.2 15.8C6.53333 14.1333 5.25 12.2833 4.35 10.25C3.45 8.21667 3 6.15 3 4.05V3H8.9L9.825 8.025L6.975 10.9C7.34167 11.55 7.75 12.1667 8.2 12.75C8.65 13.3333 9.13333 13.875 9.65 14.375C10.1333 14.8583 10.6625 15.3208 11.2375 15.7625C11.8125 16.2042 12.4333 16.6167 13.1 17L16 14.1L21 15.125V21H19.95ZM6.025 9L7.675 7.35L7.25 5H5.025C5.10833 5.75 5.23333 6.45417 5.4 7.1125C5.56667 7.77083 5.775 8.4 6.025 9ZM14.975 17.95C15.6417 18.2333 16.3125 18.4583 16.9875 18.625C17.6625 18.7917 18.3333 18.9 19 18.95V16.75L16.65 16.275L14.975 17.95Z",fill:"currentColor"})})]})}),ru=({...r})=>$.jsx(Vt,{...r,children:$.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[$.jsx("mask",{id:"mask0_2799_7012",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:$.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),$.jsx("g",{mask:"url(#mask0_2799_7012)",children:$.jsx("path",{d:"M2 20V4H22V20H2ZM12 13L4 8V18H20V8L12 13ZM12 11L20 6H4L12 11ZM4 8V6V18V8Z",fill:"currentColor"})})]})}),nu=Pt(r=>$.jsx($l,{focusVisibleClassName:".Mui-focusVisible",disableRipple:!0,...r,checkedIcon:$.jsx(Yl,{sx:{width:24,height:24,color:"text.primary"}}),icon:$.jsx(Ql,{sx:{width:24,height:24,color:"text.primary"}})}))(({theme:r})=>({width:80,height:40,padding:0,"& .MuiSwitch-switchBase":{padding:0,width:40,height:40,transitionDuration:"300ms","&.Mui-checked":{transform:"translateX(40px)",color:"#fff","& + .MuiSwitch-track":{opacity:1,border:`1px solid ${r.palette.custom.outlineBoder}`,backgroundColor:r.palette.background.default},"&.Mui-disabled + .MuiSwitch-track":{opacity:.5}}},"& .MuiSwitch-track":{borderRadius:40/2,backgroundColor:r.palette.background.default,border:`1px solid ${r.palette.custom.outlineBoder}`,opacity:1,transition:r.transitions.create(["background-color"],{duration:500})}})),Yh=()=>{const r=Wi(),{mode:a}=$i(l=>l.themeStore),o=()=>{r(Ba({mode:a==="dark"?"light":"dark"}))};return $.jsx($.Fragment,{children:$.jsx(nu,{checked:a==="dark",onChange:o,inputProps:{"aria-label":"toggle_theme_switch",id:"theme_toogle"}})})},Gh=()=>{const[r,a]=Be.useState(!1),o=Wi(),l=()=>{r?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen&&document.documentElement.requestFullscreen()},c=()=>{const e=document.fullscreenElement!==null;a(e),o(Ma({isFullScreen:e}))},i=e=>{e.key==="F11"?(e.preventDefault(),l()):e.key==="Escape"&&r&&l()};return Be.useEffect(()=>(document.addEventListener("fullscreenchange",c),()=>{document.removeEventListener("fullscreenchange",c)}),[]),Be.useEffect(()=>(window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}),[r]),$.jsxs(Wo,{onClick:l,size:"small",children:[!r&&$.jsx(Gl,{sx:{fontSize:{md:28,xs:24},color:"text.primary"}}),r&&$.jsx(Kl,{sx:{fontSize:{md:28,xs:24},color:"text.primary"}})]})},iu=Be.forwardRef(({children:r,type:a="grow",position:o="top-left",...l},c)=>{let i={transformOrigin:"0 0 0"};switch(o){case"top-right":case"top":case"bottom-left":case"bottom-right":case"bottom":case"top-left":default:i={transformOrigin:"0 0 0"};break}return $.jsxs(ht,{ref:c,children:[a==="grow"&&$.jsx(La,{...l,children:$.jsx(ht,{sx:i,children:r})}),a==="fade"&&$.jsx(Na,{...l,timeout:{appear:0,enter:300,exit:150},children:$.jsx(ht,{sx:i,children:r})})]})}),Kh=()=>{const r=Ua(),a=Wi(),o=$i(y=>y.authStore.user),[l]=Da(),[c,i]=Be.useState(o&&o.foto!==void 0?`${Fa}/${encodeURIComponent(o.foto)}`:void 0),e=()=>{i(Ga)},n=()=>{l(),a(Ka(void 0)),a(Qa(!1)),a(Za()),a(Ja()),a(Xa()),a(el()),a(tl()),a(rl.util.resetApiState()),a(nl.util.resetApiState()),a(il.util.resetApiState()),a(ol.util.resetApiState()),a(sl.util.resetApiState()),a(al.util.resetApiState()),a(ll.util.resetApiState()),a(ul.util.resetApiState()),a(hl.util.resetApiState()),r("/auth/login")},t=Wa(),s=Be.useRef(null),[u,d]=Be.useState(!1),[p,m]=Be.useState(!1),b=()=>{d(y=>!y)},w=y=>{s.current&&s.current.contains(y.target)||d(!1)},_=()=>{m(!0)},A=()=>{m(!1)};return $.jsxs($.Fragment,{children:[$.jsx(tt,{direction:"row",spacing:2,alignItems:"center",sx:{p:.5},children:$.jsx($a,{sx:{borderColor:u?t.palette.primary.main:"transparent",borderWidth:3,borderStyle:"solid",borderRadius:"50%","&:hover":{borderColor:t.palette.primary.main}},"aria-label":"open profile",ref:s,"aria-controls":u?"profile-grow":void 0,"aria-haspopup":"true",onClick:b,children:$.jsx(tt,{justifyContent:"center",alignItems:"center",children:$.jsx(rn,{alt:"profile user",src:c,slotProps:{img:{onError:e}},sx:{width:38,height:38}})})})}),$.jsx(Va,{placement:"bottom-end",open:u,anchorEl:s.current,role:void 0,transition:!0,disablePortal:!0,popperOptions:{modifiers:[{name:"offset",options:{offset:[0,11.4]}}]},children:({TransitionProps:y})=>$.jsx(iu,{type:"fade",in:u,...y,children:u&&$.jsx(Fo,{sx:{minWidth:240,maxWidth:400,[t.breakpoints.down("md")]:{maxWidth:250},backgroundColor:"transparent",backgroundImage:"inherit",border:"none",boxShadow:"none"},children:$.jsx(Ml,{onClickAway:w,children:$.jsx(Vo,{sx:{boxShadow:"0px 4px 18px 0px rgba(42, 55, 60, 0.16)",":hover":{boxShadow:"0px 4px 18px 0px rgba(42, 55, 60, 0.16)"}},children:$.jsx(El,{children:$.jsxs(nn,{container:!0,justifyContent:"space-between",alignItems:"center",rowSpacing:2,children:[$.jsx(nn,{size:12,sx:{borderRadius:3,":hover":{backgroundColor:"tertiary.opacityLight"},padding:1,cursor:"pointer"},onClick:_,children:$.jsxs(tt,{direction:"row",spacing:1.25,alignItems:"center",children:[$.jsx(rn,{alt:"profile user",src:c,slotProps:{img:{onError:e}},sx:{width:52,height:52}}),$.jsx(tt,{sx:{width:"100%",overflow:"hidden"},children:o&&$.jsxs($.Fragment,{children:[$.jsx(Je,{variant:"body2",color:"textSecondary",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:o.rol}),$.jsx(Je,{variant:"h6",color:"textPrimary",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:`${o.nombre}  ${o.apellido}`})]})})]})}),$.jsx(nn,{size:12,children:$.jsx(wn,{variant:"label",fullWidth:!0,color:"tertiary",size:"medium",startIcon:$.jsx(zl,{}),onClick:n,children:"Cerrar sesión"})})]})})})})})})}),$.jsxs(Ha,{open:p,onClose:A,maxWidth:"sm",fullWidth:!0,sx:{"& .MuiDialog-paper":{backgroundColor:"background.paper",borderRadius:6,borderWidth:1,borderStyle:"solid",borderColor:"custom.outlineBoder",boxShadow:"0px 3px 12px 0px rgba(42, 55, 60, 0.14)"}},children:[$.jsx(qa,{children:$.jsx(Je,{variant:"h5",children:"Datos de la cuenta"})}),$.jsx(za,{children:$.jsx(tt,{spacing:2,children:$.jsxs(tt,{direction:"row",spacing:2,children:[$.jsx(rn,{alt:"profile user",src:c,slotProps:{img:{onError:e}},sx:{width:84,height:84}}),$.jsxs(tt,{sx:{width:"100%",overflow:"hidden"},children:[o&&$.jsxs($.Fragment,{children:[$.jsx(Je,{variant:"body1",color:"textSecondary",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:o.rol}),$.jsx(Je,{variant:"h5",color:"textPrimary",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:`${o.nombre}  ${o.apellido}`}),$.jsx(Je,{variant:"body1",color:"textSecondary",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:`${o.cargo}`})]}),$.jsxs(tt,{spacing:1,mt:2,children:[$.jsx(kr,{icon:$.jsx(Xl,{}),title:"Empresa:",value:`${o==null?void 0:o.contrata}`}),$.jsx(kr,{icon:$.jsx(eu,{}),title:"DNI:",value:`${o==null?void 0:o.dni}`}),$.jsx(kr,{icon:$.jsx(tu,{}),title:"Teléfono:",value:`${o==null?void 0:o.telefono}`}),$.jsx(kr,{icon:$.jsx(ru,{}),title:"Email:",value:`${o==null?void 0:o.correo}`})]})]})]})})}),$.jsx($o,{}),$.jsx(Ya,{children:$.jsx(wn,{variant:"text",color:"tertiary",size:"medium",onClick:A,children:"Volver"})})]})]})},kr=({title:r,value:a,icon:o})=>$.jsx($.Fragment,{children:$.jsxs(tt,{direction:"row",spacing:1,alignItems:"center",children:[o,$.jsx(Je,{variant:"subtitle1",color:"textPrimary",children:r}),$.jsx(Je,{variant:"body1",color:"textSecondary",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:a})]})});var Vi=Object.defineProperty,ou=Object.getOwnPropertyDescriptor,su=Object.getOwnPropertyNames,au=Object.prototype.hasOwnProperty,at=(r,a)=>()=>(r&&(a=r(r=0)),a),ye=(r,a)=>()=>(a||r((a={exports:{}}).exports,a),a.exports),ur=(r,a)=>{for(var o in a)Vi(r,o,{get:a[o],enumerable:!0})},lu=(r,a,o,l)=>{if(a&&typeof a=="object"||typeof a=="function")for(let c of su(a))!au.call(r,c)&&c!==o&&Vi(r,c,{get:()=>a[c],enumerable:!(l=ou(a,c))||l.enumerable});return r},De=r=>lu(Vi({},"__esModule",{value:!0}),r),pe=at(()=>{}),Le={};ur(Le,{_debugEnd:()=>Jn,_debugProcess:()=>Zn,_events:()=>di,_eventsCount:()=>pi,_exiting:()=>Nn,_fatalExceptions:()=>Gn,_getActiveHandles:()=>Jo,_getActiveRequests:()=>Zo,_kill:()=>Fn,_linkedBinding:()=>Ko,_maxListeners:()=>fi,_preload_modules:()=>hi,_rawDebug:()=>Bn,_startProfilerIdleNotifier:()=>Xn,_stopProfilerIdleNotifier:()=>ei,_tickCallback:()=>Qn,abort:()=>ii,addListener:()=>gi,allowedNodeEnvironmentFlags:()=>zn,arch:()=>vn,argv:()=>kn,argv0:()=>ui,assert:()=>Xo,binding:()=>Tn,chdir:()=>Pn,config:()=>Un,cpuUsage:()=>pr,cwd:()=>Rn,debugPort:()=>li,default:()=>qi,dlopen:()=>Qo,domain:()=>Ln,emit:()=>_i,emitWarning:()=>In,env:()=>Sn,execArgv:()=>An,execPath:()=>ai,exit:()=>Hn,features:()=>Yn,hasUncaughtExceptionCaptureCallback:()=>es,hrtime:()=>Or,kill:()=>Vn,listeners:()=>rs,memoryUsage:()=>$n,moduleLoadList:()=>Mn,nextTick:()=>Yo,off:()=>bi,on:()=>At,once:()=>mi,openStdin:()=>qn,pid:()=>oi,platform:()=>En,ppid:()=>si,prependListener:()=>vi,prependOnceListener:()=>Ei,reallyExit:()=>Dn,release:()=>jn,removeAllListeners:()=>wi,removeListener:()=>yi,resourceUsage:()=>Wn,setSourceMapsEnabled:()=>ci,setUncaughtExceptionCaptureCallback:()=>Kn,stderr:()=>ri,stdin:()=>ni,stdout:()=>ti,title:()=>_n,umask:()=>On,uptime:()=>ts,version:()=>Cn,versions:()=>xn});function Hi(r){throw new Error("Node.js process "+r+" is not supported by JSPM core outside of Node.js")}function uu(){!er||!Jt||(er=!1,Jt.length?vt=Jt.concat(vt):br=-1,vt.length&&zo())}function zo(){if(!er){var r=setTimeout(uu,0);er=!0;for(var a=vt.length;a;){for(Jt=vt,vt=[];++br<a;)Jt&&Jt[br].run();br=-1,a=vt.length}Jt=null,er=!1,clearTimeout(r)}}function Yo(r){var a=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)a[o-1]=arguments[o];vt.push(new Go(r,a)),vt.length===1&&!er&&setTimeout(zo,0)}function Go(r,a){this.fun=r,this.array=a}function it(){}function Ko(r){Hi("_linkedBinding")}function Qo(r){Hi("dlopen")}function Zo(){return[]}function Jo(){return[]}function Xo(r,a){if(!r)throw new Error(a||"assertion error")}function es(){return!1}function ts(){return Tt.now()/1e3}function Or(r){var a=Math.floor((Date.now()-Tt.now())*.001),o=Tt.now()*.001,l=Math.floor(o)+a,c=Math.floor(o%1*1e9);return r&&(l=l-r[0],c=c-r[1],c<0&&(l--,c+=Rr)),[l,c]}function At(){return qi}function rs(r){return[]}var vt,er,Jt,br,_n,vn,En,Sn,kn,An,Cn,xn,In,Tn,On,Rn,Pn,jn,Bn,Mn,Ln,Nn,Un,Dn,Fn,pr,Wn,$n,Vn,Hn,qn,zn,Yn,Gn,Kn,Qn,Zn,Jn,Xn,ei,ti,ri,ni,ii,oi,si,ai,li,ui,hi,ci,Tt,ln,Rr,fi,di,pi,gi,mi,bi,yi,wi,_i,vi,Ei,qi,hu=at(()=>{pe(),me(),ge(),vt=[],er=!1,br=-1,Go.prototype.run=function(){this.fun.apply(null,this.array)},_n="browser",vn="x64",En="browser",Sn={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},kn=["/usr/bin/node"],An=[],Cn="v16.8.0",xn={},In=function(r,a){console.warn((a?a+": ":"")+r)},Tn=function(r){Hi("binding")},On=function(r){return 0},Rn=function(){return"/"},Pn=function(r){},jn={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},Bn=it,Mn=[],Ln={},Nn=!1,Un={},Dn=it,Fn=it,pr=function(){return{}},Wn=pr,$n=pr,Vn=it,Hn=it,qn=it,zn={},Yn={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Gn=it,Kn=it,Qn=it,Zn=it,Jn=it,Xn=it,ei=it,ti=void 0,ri=void 0,ni=void 0,ii=it,oi=2,si=1,ai="/bin/usr/node",li=9229,ui="node",hi=[],ci=it,Tt={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},Tt.now===void 0&&(ln=Date.now(),Tt.timing&&Tt.timing.navigationStart&&(ln=Tt.timing.navigationStart),Tt.now=()=>Date.now()-ln),Rr=1e9,Or.bigint=function(r){var a=Or(r);return typeof BigInt>"u"?a[0]*Rr+a[1]:BigInt(a[0]*Rr)+BigInt(a[1])},fi=10,di={},pi=0,gi=At,mi=At,bi=At,yi=At,wi=At,_i=it,vi=At,Ei=At,qi={version:Cn,versions:xn,arch:vn,platform:En,release:jn,_rawDebug:Bn,moduleLoadList:Mn,binding:Tn,_linkedBinding:Ko,_events:di,_eventsCount:pi,_maxListeners:fi,on:At,addListener:gi,once:mi,off:bi,removeListener:yi,removeAllListeners:wi,emit:_i,prependListener:vi,prependOnceListener:Ei,listeners:rs,domain:Ln,_exiting:Nn,config:Un,dlopen:Qo,uptime:ts,_getActiveRequests:Zo,_getActiveHandles:Jo,reallyExit:Dn,_kill:Fn,cpuUsage:pr,resourceUsage:Wn,memoryUsage:$n,kill:Vn,exit:Hn,openStdin:qn,allowedNodeEnvironmentFlags:zn,assert:Xo,features:Yn,_fatalExceptions:Gn,setUncaughtExceptionCaptureCallback:Kn,hasUncaughtExceptionCaptureCallback:es,emitWarning:In,nextTick:Yo,_tickCallback:Qn,_debugProcess:Zn,_debugEnd:Jn,_startProfilerIdleNotifier:Xn,_stopProfilerIdleNotifier:ei,stdout:ti,stdin:ni,stderr:ri,abort:ii,umask:On,chdir:Pn,cwd:Rn,env:Sn,title:_n,argv:kn,execArgv:An,pid:oi,ppid:si,execPath:ai,debugPort:li,hrtime:Or,argv0:ui,_preload_modules:hi,setSourceMapsEnabled:ci}}),ge=at(()=>{hu()}),Xe={};ur(Xe,{Buffer:()=>Dr,INSPECT_MAX_BYTES:()=>ns,default:()=>Ct,kMaxLength:()=>is});function cu(){if(Si)return lr;Si=!0,lr.byteLength=n,lr.toByteArray=s,lr.fromByteArray=p;for(var r=[],a=[],o=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,i=l.length;c<i;++c)r[c]=l[c],a[l.charCodeAt(c)]=c;a[45]=62,a[95]=63;function e(m){var b=m.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=m.indexOf("=");w===-1&&(w=b);var _=w===b?0:4-w%4;return[w,_]}function n(m){var b=e(m),w=b[0],_=b[1];return(w+_)*3/4-_}function t(m,b,w){return(b+w)*3/4-w}function s(m){var b,w=e(m),_=w[0],A=w[1],y=new o(t(m,_,A)),v=0,L=A>0?_-4:_,P;for(P=0;P<L;P+=4)b=a[m.charCodeAt(P)]<<18|a[m.charCodeAt(P+1)]<<12|a[m.charCodeAt(P+2)]<<6|a[m.charCodeAt(P+3)],y[v++]=b>>16&255,y[v++]=b>>8&255,y[v++]=b&255;return A===2&&(b=a[m.charCodeAt(P)]<<2|a[m.charCodeAt(P+1)]>>4,y[v++]=b&255),A===1&&(b=a[m.charCodeAt(P)]<<10|a[m.charCodeAt(P+1)]<<4|a[m.charCodeAt(P+2)]>>2,y[v++]=b>>8&255,y[v++]=b&255),y}function u(m){return r[m>>18&63]+r[m>>12&63]+r[m>>6&63]+r[m&63]}function d(m,b,w){for(var _,A=[],y=b;y<w;y+=3)_=(m[y]<<16&16711680)+(m[y+1]<<8&65280)+(m[y+2]&255),A.push(u(_));return A.join("")}function p(m){for(var b,w=m.length,_=w%3,A=[],y=16383,v=0,L=w-_;v<L;v+=y)A.push(d(m,v,v+y>L?L:v+y));return _===1?(b=m[w-1],A.push(r[b>>2]+r[b<<4&63]+"==")):_===2&&(b=(m[w-2]<<8)+m[w-1],A.push(r[b>>10]+r[b>>4&63]+r[b<<2&63]+"=")),A.join("")}return lr}function fu(){return ki?gr:(ki=!0,gr.read=function(r,a,o,l,c){var i,e,n=c*8-l-1,t=(1<<n)-1,s=t>>1,u=-7,d=o?c-1:0,p=o?-1:1,m=r[a+d];for(d+=p,i=m&(1<<-u)-1,m>>=-u,u+=n;u>0;i=i*256+r[a+d],d+=p,u-=8);for(e=i&(1<<-u)-1,i>>=-u,u+=l;u>0;e=e*256+r[a+d],d+=p,u-=8);if(i===0)i=1-s;else{if(i===t)return e?NaN:(m?-1:1)*(1/0);e=e+Math.pow(2,l),i=i-s}return(m?-1:1)*e*Math.pow(2,i-l)},gr.write=function(r,a,o,l,c,i){var e,n,t,s=i*8-c-1,u=(1<<s)-1,d=u>>1,p=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=l?0:i-1,b=l?1:-1,w=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(n=isNaN(a)?1:0,e=u):(e=Math.floor(Math.log(a)/Math.LN2),a*(t=Math.pow(2,-e))<1&&(e--,t*=2),e+d>=1?a+=p/t:a+=p*Math.pow(2,1-d),a*t>=2&&(e++,t/=2),e+d>=u?(n=0,e=u):e+d>=1?(n=(a*t-1)*Math.pow(2,c),e=e+d):(n=a*Math.pow(2,d-1)*Math.pow(2,c),e=0));c>=8;r[o+m]=n&255,m+=b,n/=256,c-=8);for(e=e<<c|n,s+=c;s>0;r[o+m]=e&255,m+=b,e/=256,s-=8);r[o+m-b]|=w*128},gr)}function du(){if(Ai)return Ut;Ai=!0;let r=cu(),a=fu(),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Ut.Buffer=e,Ut.SlowBuffer=A,Ut.INSPECT_MAX_BYTES=50;let l=2147483647;Ut.kMaxLength=l,e.TYPED_ARRAY_SUPPORT=c(),!e.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{let h=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(h,f),h.foo()===42}catch{return!1}}Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}});function i(h){if(h>l)throw new RangeError('The value "'+h+'" is invalid for option "size"');let f=new Uint8Array(h);return Object.setPrototypeOf(f,e.prototype),f}function e(h,f,g){if(typeof h=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(h)}return n(h,f,g)}e.poolSize=8192;function n(h,f,g){if(typeof h=="string")return d(h,f);if(ArrayBuffer.isView(h))return m(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(F(h,ArrayBuffer)||h&&F(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(F(h,SharedArrayBuffer)||h&&F(h.buffer,SharedArrayBuffer)))return b(h,f,g);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let E=h.valueOf&&h.valueOf();if(E!=null&&E!==h)return e.from(E,f,g);let I=w(h);if(I)return I;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return e.from(h[Symbol.toPrimitive]("string"),f,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}e.from=function(h,f,g){return n(h,f,g)},Object.setPrototypeOf(e.prototype,Uint8Array.prototype),Object.setPrototypeOf(e,Uint8Array);function t(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function s(h,f,g){return t(h),h<=0?i(h):f!==void 0?typeof g=="string"?i(h).fill(f,g):i(h).fill(f):i(h)}e.alloc=function(h,f,g){return s(h,f,g)};function u(h){return t(h),i(h<0?0:_(h)|0)}e.allocUnsafe=function(h){return u(h)},e.allocUnsafeSlow=function(h){return u(h)};function d(h,f){if((typeof f!="string"||f==="")&&(f="utf8"),!e.isEncoding(f))throw new TypeError("Unknown encoding: "+f);let g=y(h,f)|0,E=i(g),I=E.write(h,f);return I!==g&&(E=E.slice(0,I)),E}function p(h){let f=h.length<0?0:_(h.length)|0,g=i(f);for(let E=0;E<f;E+=1)g[E]=h[E]&255;return g}function m(h){if(F(h,Uint8Array)){let f=new Uint8Array(h);return b(f.buffer,f.byteOffset,f.byteLength)}return p(h)}function b(h,f,g){if(f<0||h.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<f+(g||0))throw new RangeError('"length" is outside of buffer bounds');let E;return f===void 0&&g===void 0?E=new Uint8Array(h):g===void 0?E=new Uint8Array(h,f):E=new Uint8Array(h,f,g),Object.setPrototypeOf(E,e.prototype),E}function w(h){if(e.isBuffer(h)){let f=_(h.length)|0,g=i(f);return g.length===0||h.copy(g,0,0,f),g}if(h.length!==void 0)return typeof h.length!="number"||ue(h.length)?i(0):p(h);if(h.type==="Buffer"&&Array.isArray(h.data))return p(h.data)}function _(h){if(h>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return h|0}function A(h){return+h!=h&&(h=0),e.alloc(+h)}e.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==e.prototype},e.compare=function(h,f){if(F(h,Uint8Array)&&(h=e.from(h,h.offset,h.byteLength)),F(f,Uint8Array)&&(f=e.from(f,f.offset,f.byteLength)),!e.isBuffer(h)||!e.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===f)return 0;let g=h.length,E=f.length;for(let I=0,N=Math.min(g,E);I<N;++I)if(h[I]!==f[I]){g=h[I],E=f[I];break}return g<E?-1:E<g?1:0},e.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(h,f){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return e.alloc(0);let g;if(f===void 0)for(f=0,g=0;g<h.length;++g)f+=h[g].length;let E=e.allocUnsafe(f),I=0;for(g=0;g<h.length;++g){let N=h[g];if(F(N,Uint8Array))I+N.length>E.length?(e.isBuffer(N)||(N=e.from(N)),N.copy(E,I)):Uint8Array.prototype.set.call(E,N,I);else if(e.isBuffer(N))N.copy(E,I);else throw new TypeError('"list" argument must be an Array of Buffers');I+=N.length}return E};function y(h,f){if(e.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||F(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);let g=h.length,E=arguments.length>2&&arguments[2]===!0;if(!E&&g===0)return 0;let I=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return D(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g*2;case"hex":return g>>>1;case"base64":return ie(h).length;default:if(I)return E?-1:D(h).length;f=(""+f).toLowerCase(),I=!0}}e.byteLength=y;function v(h,f,g){let E=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((g===void 0||g>this.length)&&(g=this.length),g<=0)||(g>>>=0,f>>>=0,g<=f))return"";for(h||(h="utf8");;)switch(h){case"hex":return le(this,f,g);case"utf8":case"utf-8":return K(this,f,g);case"ascii":return be(this,f,g);case"latin1":case"binary":return ce(this,f,g);case"base64":return O(this,f,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Se(this,f,g);default:if(E)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),E=!0}}e.prototype._isBuffer=!0;function L(h,f,g){let E=h[f];h[f]=h[g],h[g]=E}e.prototype.swap16=function(){let h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<h;f+=2)L(this,f,f+1);return this},e.prototype.swap32=function(){let h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<h;f+=4)L(this,f,f+3),L(this,f+1,f+2);return this},e.prototype.swap64=function(){let h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<h;f+=8)L(this,f,f+7),L(this,f+1,f+6),L(this,f+2,f+5),L(this,f+3,f+4);return this},e.prototype.toString=function(){let h=this.length;return h===0?"":arguments.length===0?K(this,0,h):v.apply(this,arguments)},e.prototype.toLocaleString=e.prototype.toString,e.prototype.equals=function(h){if(!e.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:e.compare(this,h)===0},e.prototype.inspect=function(){let h="",f=Ut.INSPECT_MAX_BYTES;return h=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(h+=" ... "),"<Buffer "+h+">"},o&&(e.prototype[o]=e.prototype.inspect),e.prototype.compare=function(h,f,g,E,I){if(F(h,Uint8Array)&&(h=e.from(h,h.offset,h.byteLength)),!e.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof h);if(f===void 0&&(f=0),g===void 0&&(g=h?h.length:0),E===void 0&&(E=0),I===void 0&&(I=this.length),f<0||g>h.length||E<0||I>this.length)throw new RangeError("out of range index");if(E>=I&&f>=g)return 0;if(E>=I)return-1;if(f>=g)return 1;if(f>>>=0,g>>>=0,E>>>=0,I>>>=0,this===h)return 0;let N=I-E,G=g-f,ve=Math.min(N,G),Ee=this.slice(E,I),Ie=h.slice(f,g);for(let je=0;je<ve;++je)if(Ee[je]!==Ie[je]){N=Ee[je],G=Ie[je];break}return N<G?-1:G<N?1:0};function P(h,f,g,E,I){if(h.length===0)return-1;if(typeof g=="string"?(E=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),g=+g,ue(g)&&(g=I?0:h.length-1),g<0&&(g=h.length+g),g>=h.length){if(I)return-1;g=h.length-1}else if(g<0)if(I)g=0;else return-1;if(typeof f=="string"&&(f=e.from(f,E)),e.isBuffer(f))return f.length===0?-1:S(h,f,g,E,I);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?I?Uint8Array.prototype.indexOf.call(h,f,g):Uint8Array.prototype.lastIndexOf.call(h,f,g):S(h,[f],g,E,I);throw new TypeError("val must be string, number or Buffer")}function S(h,f,g,E,I){let N=1,G=h.length,ve=f.length;if(E!==void 0&&(E=String(E).toLowerCase(),E==="ucs2"||E==="ucs-2"||E==="utf16le"||E==="utf-16le")){if(h.length<2||f.length<2)return-1;N=2,G/=2,ve/=2,g/=2}function Ee(je,Re){return N===1?je[Re]:je.readUInt16BE(Re*N)}let Ie;if(I){let je=-1;for(Ie=g;Ie<G;Ie++)if(Ee(h,Ie)===Ee(f,je===-1?0:Ie-je)){if(je===-1&&(je=Ie),Ie-je+1===ve)return je*N}else je!==-1&&(Ie-=Ie-je),je=-1}else for(g+ve>G&&(g=G-ve),Ie=g;Ie>=0;Ie--){let je=!0;for(let Re=0;Re<ve;Re++)if(Ee(h,Ie+Re)!==Ee(f,Re)){je=!1;break}if(je)return Ie}return-1}e.prototype.includes=function(h,f,g){return this.indexOf(h,f,g)!==-1},e.prototype.indexOf=function(h,f,g){return P(this,h,f,g,!0)},e.prototype.lastIndexOf=function(h,f,g){return P(this,h,f,g,!1)};function C(h,f,g,E){g=Number(g)||0;let I=h.length-g;E?(E=Number(E),E>I&&(E=I)):E=I;let N=f.length;E>N/2&&(E=N/2);let G;for(G=0;G<E;++G){let ve=parseInt(f.substr(G*2,2),16);if(ue(ve))return G;h[g+G]=ve}return G}function j(h,f,g,E){return fe(D(f,h.length-g),h,g,E)}function Q(h,f,g,E){return fe(Z(f),h,g,E)}function ee(h,f,g,E){return fe(ie(f),h,g,E)}function ae(h,f,g,E){return fe(se(f,h.length-g),h,g,E)}e.prototype.write=function(h,f,g,E){if(f===void 0)E="utf8",g=this.length,f=0;else if(g===void 0&&typeof f=="string")E=f,g=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(g)?(g=g>>>0,E===void 0&&(E="utf8")):(E=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let I=this.length-f;if((g===void 0||g>I)&&(g=I),h.length>0&&(g<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");E||(E="utf8");let N=!1;for(;;)switch(E){case"hex":return C(this,h,f,g);case"utf8":case"utf-8":return j(this,h,f,g);case"ascii":case"latin1":case"binary":return Q(this,h,f,g);case"base64":return ee(this,h,f,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae(this,h,f,g);default:if(N)throw new TypeError("Unknown encoding: "+E);E=(""+E).toLowerCase(),N=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(h,f,g){return f===0&&g===h.length?r.fromByteArray(h):r.fromByteArray(h.slice(f,g))}function K(h,f,g){g=Math.min(h.length,g);let E=[],I=f;for(;I<g;){let N=h[I],G=null,ve=N>239?4:N>223?3:N>191?2:1;if(I+ve<=g){let Ee,Ie,je,Re;switch(ve){case 1:N<128&&(G=N);break;case 2:Ee=h[I+1],(Ee&192)===128&&(Re=(N&31)<<6|Ee&63,Re>127&&(G=Re));break;case 3:Ee=h[I+1],Ie=h[I+2],(Ee&192)===128&&(Ie&192)===128&&(Re=(N&15)<<12|(Ee&63)<<6|Ie&63,Re>2047&&(Re<55296||Re>57343)&&(G=Re));break;case 4:Ee=h[I+1],Ie=h[I+2],je=h[I+3],(Ee&192)===128&&(Ie&192)===128&&(je&192)===128&&(Re=(N&15)<<18|(Ee&63)<<12|(Ie&63)<<6|je&63,Re>65535&&Re<1114112&&(G=Re))}}G===null?(G=65533,ve=1):G>65535&&(G-=65536,E.push(G>>>10&1023|55296),G=56320|G&1023),E.push(G),I+=ve}return W(E)}let J=4096;function W(h){let f=h.length;if(f<=J)return String.fromCharCode.apply(String,h);let g="",E=0;for(;E<f;)g+=String.fromCharCode.apply(String,h.slice(E,E+=J));return g}function be(h,f,g){let E="";g=Math.min(h.length,g);for(let I=f;I<g;++I)E+=String.fromCharCode(h[I]&127);return E}function ce(h,f,g){let E="";g=Math.min(h.length,g);for(let I=f;I<g;++I)E+=String.fromCharCode(h[I]);return E}function le(h,f,g){let E=h.length;(!f||f<0)&&(f=0),(!g||g<0||g>E)&&(g=E);let I="";for(let N=f;N<g;++N)I+=we[h[N]];return I}function Se(h,f,g){let E=h.slice(f,g),I="";for(let N=0;N<E.length-1;N+=2)I+=String.fromCharCode(E[N]+E[N+1]*256);return I}e.prototype.slice=function(h,f){let g=this.length;h=~~h,f=f===void 0?g:~~f,h<0?(h+=g,h<0&&(h=0)):h>g&&(h=g),f<0?(f+=g,f<0&&(f=0)):f>g&&(f=g),f<h&&(f=h);let E=this.subarray(h,f);return Object.setPrototypeOf(E,e.prototype),E};function Y(h,f,g){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+f>g)throw new RangeError("Trying to access beyond buffer length")}e.prototype.readUintLE=e.prototype.readUIntLE=function(h,f,g){h=h>>>0,f=f>>>0,g||Y(h,f,this.length);let E=this[h],I=1,N=0;for(;++N<f&&(I*=256);)E+=this[h+N]*I;return E},e.prototype.readUintBE=e.prototype.readUIntBE=function(h,f,g){h=h>>>0,f=f>>>0,g||Y(h,f,this.length);let E=this[h+--f],I=1;for(;f>0&&(I*=256);)E+=this[h+--f]*I;return E},e.prototype.readUint8=e.prototype.readUInt8=function(h,f){return h=h>>>0,f||Y(h,1,this.length),this[h]},e.prototype.readUint16LE=e.prototype.readUInt16LE=function(h,f){return h=h>>>0,f||Y(h,2,this.length),this[h]|this[h+1]<<8},e.prototype.readUint16BE=e.prototype.readUInt16BE=function(h,f){return h=h>>>0,f||Y(h,2,this.length),this[h]<<8|this[h+1]},e.prototype.readUint32LE=e.prototype.readUInt32LE=function(h,f){return h=h>>>0,f||Y(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},e.prototype.readUint32BE=e.prototype.readUInt32BE=function(h,f){return h=h>>>0,f||Y(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},e.prototype.readBigUInt64LE=ne(function(h){h=h>>>0,q(h,"offset");let f=this[h],g=this[h+7];(f===void 0||g===void 0)&&he(h,this.length-8);let E=f+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24,I=this[++h]+this[++h]*2**8+this[++h]*2**16+g*2**24;return BigInt(E)+(BigInt(I)<<BigInt(32))}),e.prototype.readBigUInt64BE=ne(function(h){h=h>>>0,q(h,"offset");let f=this[h],g=this[h+7];(f===void 0||g===void 0)&&he(h,this.length-8);let E=f*2**24+this[++h]*2**16+this[++h]*2**8+this[++h],I=this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+g;return(BigInt(E)<<BigInt(32))+BigInt(I)}),e.prototype.readIntLE=function(h,f,g){h=h>>>0,f=f>>>0,g||Y(h,f,this.length);let E=this[h],I=1,N=0;for(;++N<f&&(I*=256);)E+=this[h+N]*I;return I*=128,E>=I&&(E-=Math.pow(2,8*f)),E},e.prototype.readIntBE=function(h,f,g){h=h>>>0,f=f>>>0,g||Y(h,f,this.length);let E=f,I=1,N=this[h+--E];for(;E>0&&(I*=256);)N+=this[h+--E]*I;return I*=128,N>=I&&(N-=Math.pow(2,8*f)),N},e.prototype.readInt8=function(h,f){return h=h>>>0,f||Y(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},e.prototype.readInt16LE=function(h,f){h=h>>>0,f||Y(h,2,this.length);let g=this[h]|this[h+1]<<8;return g&32768?g|4294901760:g},e.prototype.readInt16BE=function(h,f){h=h>>>0,f||Y(h,2,this.length);let g=this[h+1]|this[h]<<8;return g&32768?g|4294901760:g},e.prototype.readInt32LE=function(h,f){return h=h>>>0,f||Y(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},e.prototype.readInt32BE=function(h,f){return h=h>>>0,f||Y(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},e.prototype.readBigInt64LE=ne(function(h){h=h>>>0,q(h,"offset");let f=this[h],g=this[h+7];(f===void 0||g===void 0)&&he(h,this.length-8);let E=this[h+4]+this[h+5]*2**8+this[h+6]*2**16+(g<<24);return(BigInt(E)<<BigInt(32))+BigInt(f+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24)}),e.prototype.readBigInt64BE=ne(function(h){h=h>>>0,q(h,"offset");let f=this[h],g=this[h+7];(f===void 0||g===void 0)&&he(h,this.length-8);let E=(f<<24)+this[++h]*2**16+this[++h]*2**8+this[++h];return(BigInt(E)<<BigInt(32))+BigInt(this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+g)}),e.prototype.readFloatLE=function(h,f){return h=h>>>0,f||Y(h,4,this.length),a.read(this,h,!0,23,4)},e.prototype.readFloatBE=function(h,f){return h=h>>>0,f||Y(h,4,this.length),a.read(this,h,!1,23,4)},e.prototype.readDoubleLE=function(h,f){return h=h>>>0,f||Y(h,8,this.length),a.read(this,h,!0,52,8)},e.prototype.readDoubleBE=function(h,f){return h=h>>>0,f||Y(h,8,this.length),a.read(this,h,!1,52,8)};function X(h,f,g,E,I,N){if(!e.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>I||f<N)throw new RangeError('"value" argument is out of bounds');if(g+E>h.length)throw new RangeError("Index out of range")}e.prototype.writeUintLE=e.prototype.writeUIntLE=function(h,f,g,E){if(h=+h,f=f>>>0,g=g>>>0,!E){let G=Math.pow(2,8*g)-1;X(this,h,f,g,G,0)}let I=1,N=0;for(this[f]=h&255;++N<g&&(I*=256);)this[f+N]=h/I&255;return f+g},e.prototype.writeUintBE=e.prototype.writeUIntBE=function(h,f,g,E){if(h=+h,f=f>>>0,g=g>>>0,!E){let G=Math.pow(2,8*g)-1;X(this,h,f,g,G,0)}let I=g-1,N=1;for(this[f+I]=h&255;--I>=0&&(N*=256);)this[f+I]=h/N&255;return f+g},e.prototype.writeUint8=e.prototype.writeUInt8=function(h,f,g){return h=+h,f=f>>>0,g||X(this,h,f,1,255,0),this[f]=h&255,f+1},e.prototype.writeUint16LE=e.prototype.writeUInt16LE=function(h,f,g){return h=+h,f=f>>>0,g||X(this,h,f,2,65535,0),this[f]=h&255,this[f+1]=h>>>8,f+2},e.prototype.writeUint16BE=e.prototype.writeUInt16BE=function(h,f,g){return h=+h,f=f>>>0,g||X(this,h,f,2,65535,0),this[f]=h>>>8,this[f+1]=h&255,f+2},e.prototype.writeUint32LE=e.prototype.writeUInt32LE=function(h,f,g){return h=+h,f=f>>>0,g||X(this,h,f,4,4294967295,0),this[f+3]=h>>>24,this[f+2]=h>>>16,this[f+1]=h>>>8,this[f]=h&255,f+4},e.prototype.writeUint32BE=e.prototype.writeUInt32BE=function(h,f,g){return h=+h,f=f>>>0,g||X(this,h,f,4,4294967295,0),this[f]=h>>>24,this[f+1]=h>>>16,this[f+2]=h>>>8,this[f+3]=h&255,f+4};function x(h,f,g,E,I){H(f,E,I,h,g,7);let N=Number(f&BigInt(4294967295));h[g++]=N,N=N>>8,h[g++]=N,N=N>>8,h[g++]=N,N=N>>8,h[g++]=N;let G=Number(f>>BigInt(32)&BigInt(4294967295));return h[g++]=G,G=G>>8,h[g++]=G,G=G>>8,h[g++]=G,G=G>>8,h[g++]=G,g}function te(h,f,g,E,I){H(f,E,I,h,g,7);let N=Number(f&BigInt(4294967295));h[g+7]=N,N=N>>8,h[g+6]=N,N=N>>8,h[g+5]=N,N=N>>8,h[g+4]=N;let G=Number(f>>BigInt(32)&BigInt(4294967295));return h[g+3]=G,G=G>>8,h[g+2]=G,G=G>>8,h[g+1]=G,G=G>>8,h[g]=G,g+8}e.prototype.writeBigUInt64LE=ne(function(h,f=0){return x(this,h,f,BigInt(0),BigInt("0xffffffffffffffff"))}),e.prototype.writeBigUInt64BE=ne(function(h,f=0){return te(this,h,f,BigInt(0),BigInt("0xffffffffffffffff"))}),e.prototype.writeIntLE=function(h,f,g,E){if(h=+h,f=f>>>0,!E){let ve=Math.pow(2,8*g-1);X(this,h,f,g,ve-1,-ve)}let I=0,N=1,G=0;for(this[f]=h&255;++I<g&&(N*=256);)h<0&&G===0&&this[f+I-1]!==0&&(G=1),this[f+I]=(h/N>>0)-G&255;return f+g},e.prototype.writeIntBE=function(h,f,g,E){if(h=+h,f=f>>>0,!E){let ve=Math.pow(2,8*g-1);X(this,h,f,g,ve-1,-ve)}let I=g-1,N=1,G=0;for(this[f+I]=h&255;--I>=0&&(N*=256);)h<0&&G===0&&this[f+I+1]!==0&&(G=1),this[f+I]=(h/N>>0)-G&255;return f+g},e.prototype.writeInt8=function(h,f,g){return h=+h,f=f>>>0,g||X(this,h,f,1,127,-128),h<0&&(h=255+h+1),this[f]=h&255,f+1},e.prototype.writeInt16LE=function(h,f,g){return h=+h,f=f>>>0,g||X(this,h,f,2,32767,-32768),this[f]=h&255,this[f+1]=h>>>8,f+2},e.prototype.writeInt16BE=function(h,f,g){return h=+h,f=f>>>0,g||X(this,h,f,2,32767,-32768),this[f]=h>>>8,this[f+1]=h&255,f+2},e.prototype.writeInt32LE=function(h,f,g){return h=+h,f=f>>>0,g||X(this,h,f,4,2147483647,-2147483648),this[f]=h&255,this[f+1]=h>>>8,this[f+2]=h>>>16,this[f+3]=h>>>24,f+4},e.prototype.writeInt32BE=function(h,f,g){return h=+h,f=f>>>0,g||X(this,h,f,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),this[f]=h>>>24,this[f+1]=h>>>16,this[f+2]=h>>>8,this[f+3]=h&255,f+4},e.prototype.writeBigInt64LE=ne(function(h,f=0){return x(this,h,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),e.prototype.writeBigInt64BE=ne(function(h,f=0){return te(this,h,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function de(h,f,g,E,I,N){if(g+E>h.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function U(h,f,g,E,I){return f=+f,g=g>>>0,I||de(h,f,g,4),a.write(h,f,g,E,23,4),g+4}e.prototype.writeFloatLE=function(h,f,g){return U(this,h,f,!0,g)},e.prototype.writeFloatBE=function(h,f,g){return U(this,h,f,!1,g)};function ke(h,f,g,E,I){return f=+f,g=g>>>0,I||de(h,f,g,8),a.write(h,f,g,E,52,8),g+8}e.prototype.writeDoubleLE=function(h,f,g){return ke(this,h,f,!0,g)},e.prototype.writeDoubleBE=function(h,f,g){return ke(this,h,f,!1,g)},e.prototype.copy=function(h,f,g,E){if(!e.isBuffer(h))throw new TypeError("argument should be a Buffer");if(g||(g=0),!E&&E!==0&&(E=this.length),f>=h.length&&(f=h.length),f||(f=0),E>0&&E<g&&(E=g),E===g||h.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("sourceEnd out of bounds");E>this.length&&(E=this.length),h.length-f<E-g&&(E=h.length-f+g);let I=E-g;return this===h&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,g,E):Uint8Array.prototype.set.call(h,this.subarray(g,E),f),I},e.prototype.fill=function(h,f,g,E){if(typeof h=="string"){if(typeof f=="string"?(E=f,f=0,g=this.length):typeof g=="string"&&(E=g,g=this.length),E!==void 0&&typeof E!="string")throw new TypeError("encoding must be a string");if(typeof E=="string"&&!e.isEncoding(E))throw new TypeError("Unknown encoding: "+E);if(h.length===1){let N=h.charCodeAt(0);(E==="utf8"&&N<128||E==="latin1")&&(h=N)}}else typeof h=="number"?h=h&255:typeof h=="boolean"&&(h=Number(h));if(f<0||this.length<f||this.length<g)throw new RangeError("Out of range index");if(g<=f)return this;f=f>>>0,g=g===void 0?this.length:g>>>0,h||(h=0);let I;if(typeof h=="number")for(I=f;I<g;++I)this[I]=h;else{let N=e.isBuffer(h)?h:e.from(h,E),G=N.length;if(G===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for(I=0;I<g-f;++I)this[I+f]=N[I%G]}return this};let z={};function M(h,f,g){z[h]=class extends g{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${h}]`,this.stack,delete this.name}get code(){return h}set code(E){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:E,writable:!0})}toString(){return`${this.name} [${h}]: ${this.message}`}}}M("ERR_BUFFER_OUT_OF_BOUNDS",function(h){return h?`${h} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),M("ERR_INVALID_ARG_TYPE",function(h,f){return`The "${h}" argument must be of type number. Received type ${typeof f}`},TypeError),M("ERR_OUT_OF_RANGE",function(h,f,g){let E=`The value of "${h}" is out of range.`,I=g;return Number.isInteger(g)&&Math.abs(g)>2**32?I=re(String(g)):typeof g=="bigint"&&(I=String(g),(g>BigInt(2)**BigInt(32)||g<-(BigInt(2)**BigInt(32)))&&(I=re(I)),I+="n"),E+=` It must be ${f}. Received ${I}`,E},RangeError);function re(h){let f="",g=h.length,E=h[0]==="-"?1:0;for(;g>=E+4;g-=3)f=`_${h.slice(g-3,g)}${f}`;return`${h.slice(0,g)}${f}`}function V(h,f,g){q(f,"offset"),(h[f]===void 0||h[f+g]===void 0)&&he(f,h.length-(g+1))}function H(h,f,g,E,I,N){if(h>g||h<f){let G=typeof f=="bigint"?"n":"",ve;throw f===0||f===BigInt(0)?ve=`>= 0${G} and < 2${G} ** ${(N+1)*8}${G}`:ve=`>= -(2${G} ** ${(N+1)*8-1}${G}) and < 2 ** ${(N+1)*8-1}${G}`,new z.ERR_OUT_OF_RANGE("value",ve,h)}V(E,I,N)}function q(h,f){if(typeof h!="number")throw new z.ERR_INVALID_ARG_TYPE(f,"number",h)}function he(h,f,g){throw Math.floor(h)!==h?(q(h,g),new z.ERR_OUT_OF_RANGE("offset","an integer",h)):f<0?new z.ERR_BUFFER_OUT_OF_BOUNDS:new z.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${f}`,h)}let oe=/[^+/0-9A-Za-z-_]/g;function B(h){if(h=h.split("=")[0],h=h.trim().replace(oe,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function D(h,f){f=f||1/0;let g,E=h.length,I=null,N=[];for(let G=0;G<E;++G){if(g=h.charCodeAt(G),g>55295&&g<57344){if(!I){if(g>56319){(f-=3)>-1&&N.push(239,191,189);continue}else if(G+1===E){(f-=3)>-1&&N.push(239,191,189);continue}I=g;continue}if(g<56320){(f-=3)>-1&&N.push(239,191,189),I=g;continue}g=(I-55296<<10|g-56320)+65536}else I&&(f-=3)>-1&&N.push(239,191,189);if(I=null,g<128){if((f-=1)<0)break;N.push(g)}else if(g<2048){if((f-=2)<0)break;N.push(g>>6|192,g&63|128)}else if(g<65536){if((f-=3)<0)break;N.push(g>>12|224,g>>6&63|128,g&63|128)}else if(g<1114112){if((f-=4)<0)break;N.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw new Error("Invalid code point")}return N}function Z(h){let f=[];for(let g=0;g<h.length;++g)f.push(h.charCodeAt(g)&255);return f}function se(h,f){let g,E,I,N=[];for(let G=0;G<h.length&&!((f-=2)<0);++G)g=h.charCodeAt(G),E=g>>8,I=g%256,N.push(I),N.push(E);return N}function ie(h){return r.toByteArray(B(h))}function fe(h,f,g,E){let I;for(I=0;I<E&&!(I+g>=f.length||I>=h.length);++I)f[I+g]=h[I];return I}function F(h,f){return h instanceof f||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===f.name}function ue(h){return h!==h}let we=function(){let h="0123456789abcdef",f=new Array(256);for(let g=0;g<16;++g){let E=g*16;for(let I=0;I<16;++I)f[E+I]=h[g]+h[I]}return f}();function ne(h){return typeof BigInt>"u"?Oe:h}function Oe(){throw new Error("BigInt not supported")}return Ut}var lr,Si,gr,ki,Ut,Ai,Ct,Dr,ns,is,et=at(()=>{pe(),me(),ge(),lr={},Si=!1,gr={},ki=!1,Ut={},Ai=!1,Ct=du(),Ct.Buffer,Ct.SlowBuffer,Ct.INSPECT_MAX_BYTES,Ct.kMaxLength,Dr=Ct.Buffer,ns=Ct.INSPECT_MAX_BYTES,is=Ct.kMaxLength}),me=at(()=>{et()}),pu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0});var a=class{constructor(o){this.aliasToTopic={},this.max=o}put(o,l){return l===0||l>this.max?!1:(this.aliasToTopic[l]=o,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(o){return this.aliasToTopic[o]}clear(){this.aliasToTopic={}}};r.default=a}),Ye=ye((r,a)=>{pe(),me(),ge();var o=class extends Error{constructor(l){if(!Array.isArray(l))throw new TypeError(`Expected input to be an Array, got ${typeof l}`);let c="";for(let i=0;i<l.length;i++)c+=`    ${l[i].stack}
`;super(c),this.name="AggregateError",this.errors=l}};a.exports={AggregateError:o,ArrayIsArray(l){return Array.isArray(l)},ArrayPrototypeIncludes(l,c){return l.includes(c)},ArrayPrototypeIndexOf(l,c){return l.indexOf(c)},ArrayPrototypeJoin(l,c){return l.join(c)},ArrayPrototypeMap(l,c){return l.map(c)},ArrayPrototypePop(l,c){return l.pop(c)},ArrayPrototypePush(l,c){return l.push(c)},ArrayPrototypeSlice(l,c,i){return l.slice(c,i)},Error,FunctionPrototypeCall(l,c,...i){return l.call(c,...i)},FunctionPrototypeSymbolHasInstance(l,c){return Function.prototype[Symbol.hasInstance].call(l,c)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(l,c){return Object.defineProperties(l,c)},ObjectDefineProperty(l,c,i){return Object.defineProperty(l,c,i)},ObjectGetOwnPropertyDescriptor(l,c){return Object.getOwnPropertyDescriptor(l,c)},ObjectKeys(l){return Object.keys(l)},ObjectSetPrototypeOf(l,c){return Object.setPrototypeOf(l,c)},Promise,PromisePrototypeCatch(l,c){return l.catch(c)},PromisePrototypeThen(l,c,i){return l.then(c,i)},PromiseReject(l){return Promise.reject(l)},PromiseResolve(l){return Promise.resolve(l)},ReflectApply:Reflect.apply,RegExpPrototypeTest(l,c){return l.test(c)},SafeSet:Set,String,StringPrototypeSlice(l,c,i){return l.slice(c,i)},StringPrototypeToLowerCase(l){return l.toLowerCase()},StringPrototypeToUpperCase(l){return l.toUpperCase()},StringPrototypeTrim(l){return l.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(l,c,i){return l.set(c,i)},Boolean,Uint8Array}}),os=ye((r,a)=>{pe(),me(),ge(),a.exports={format(o,...l){return o.replace(/%([sdifj])/g,function(...[c,i]){let e=l.shift();return i==="f"?e.toFixed(6):i==="j"?JSON.stringify(e):i==="s"&&typeof e=="object"?`${e.constructor!==Object?e.constructor.name:""} {}`.trim():e.toString()})},inspect(o){switch(typeof o){case"string":if(o.includes("'"))if(o.includes('"')){if(!o.includes("`")&&!o.includes("${"))return`\`${o}\``}else return`"${o}"`;return`'${o}'`;case"number":return isNaN(o)?"NaN":Object.is(o,-0)?String(o):o;case"bigint":return`${String(o)}n`;case"boolean":case"undefined":return String(o);case"object":return"{}"}}}}),lt=ye((r,a)=>{pe(),me(),ge();var{format:o,inspect:l}=os(),{AggregateError:c}=Ye(),i=globalThis.AggregateError||c,e=Symbol("kIsNodeError"),n=["string","function","number","object","Function","Object","boolean","bigint","symbol"],t=/^([A-Z][a-z0-9]*)+$/,s="__node_internal_",u={};function d(y,v){if(!y)throw new u.ERR_INTERNAL_ASSERTION(v)}function p(y){let v="",L=y.length,P=y[0]==="-"?1:0;for(;L>=P+4;L-=3)v=`_${y.slice(L-3,L)}${v}`;return`${y.slice(0,L)}${v}`}function m(y,v,L){if(typeof v=="function")return d(v.length<=L.length,`Code: ${y}; The provided arguments length (${L.length}) does not match the required ones (${v.length}).`),v(...L);let P=(v.match(/%[dfijoOs]/g)||[]).length;return d(P===L.length,`Code: ${y}; The provided arguments length (${L.length}) does not match the required ones (${P}).`),L.length===0?v:o(v,...L)}function b(y,v,L){L||(L=Error);class P extends L{constructor(...C){super(m(y,v,C))}toString(){return`${this.name} [${y}]: ${this.message}`}}Object.defineProperties(P.prototype,{name:{value:L.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${y}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),P.prototype.code=y,P.prototype[e]=!0,u[y]=P}function w(y){let v=s+y.name;return Object.defineProperty(y,"name",{value:v}),y}function _(y,v){if(y&&v&&y!==v){if(Array.isArray(v.errors))return v.errors.push(y),v;let L=new i([v,y],v.message);return L.code=v.code,L}return y||v}var A=class extends Error{constructor(y="The operation was aborted",v=void 0){if(v!==void 0&&typeof v!="object")throw new u.ERR_INVALID_ARG_TYPE("options","Object",v);super(y,v),this.code="ABORT_ERR",this.name="AbortError"}};b("ERR_ASSERTION","%s",Error),b("ERR_INVALID_ARG_TYPE",(y,v,L)=>{d(typeof y=="string","'name' must be a string"),Array.isArray(v)||(v=[v]);let P="The ";y.endsWith(" argument")?P+=`${y} `:P+=`"${y}" ${y.includes(".")?"property":"argument"} `,P+="must be ";let S=[],C=[],j=[];for(let ee of v)d(typeof ee=="string","All expected entries have to be of type string"),n.includes(ee)?S.push(ee.toLowerCase()):t.test(ee)?C.push(ee):(d(ee!=="object",'The value "object" should be written as "Object"'),j.push(ee));if(C.length>0){let ee=S.indexOf("object");ee!==-1&&(S.splice(S,ee,1),C.push("Object"))}if(S.length>0){switch(S.length){case 1:P+=`of type ${S[0]}`;break;case 2:P+=`one of type ${S[0]} or ${S[1]}`;break;default:{let ee=S.pop();P+=`one of type ${S.join(", ")}, or ${ee}`}}(C.length>0||j.length>0)&&(P+=" or ")}if(C.length>0){switch(C.length){case 1:P+=`an instance of ${C[0]}`;break;case 2:P+=`an instance of ${C[0]} or ${C[1]}`;break;default:{let ee=C.pop();P+=`an instance of ${C.join(", ")}, or ${ee}`}}j.length>0&&(P+=" or ")}switch(j.length){case 0:break;case 1:j[0].toLowerCase()!==j[0]&&(P+="an "),P+=`${j[0]}`;break;case 2:P+=`one of ${j[0]} or ${j[1]}`;break;default:{let ee=j.pop();P+=`one of ${j.join(", ")}, or ${ee}`}}if(L==null)P+=`. Received ${L}`;else if(typeof L=="function"&&L.name)P+=`. Received function ${L.name}`;else if(typeof L=="object"){var Q;if((Q=L.constructor)!==null&&Q!==void 0&&Q.name)P+=`. Received an instance of ${L.constructor.name}`;else{let ee=l(L,{depth:-1});P+=`. Received ${ee}`}}else{let ee=l(L,{colors:!1});ee.length>25&&(ee=`${ee.slice(0,25)}...`),P+=`. Received type ${typeof L} (${ee})`}return P},TypeError),b("ERR_INVALID_ARG_VALUE",(y,v,L="is invalid")=>{let P=l(v);return P.length>128&&(P=P.slice(0,128)+"..."),`The ${y.includes(".")?"property":"argument"} '${y}' ${L}. Received ${P}`},TypeError),b("ERR_INVALID_RETURN_VALUE",(y,v,L)=>{var P;let S=L!=null&&(P=L.constructor)!==null&&P!==void 0&&P.name?`instance of ${L.constructor.name}`:`type ${typeof L}`;return`Expected ${y} to be returned from the "${v}" function but got ${S}.`},TypeError),b("ERR_MISSING_ARGS",(...y)=>{d(y.length>0,"At least one arg needs to be specified");let v,L=y.length;switch(y=(Array.isArray(y)?y:[y]).map(P=>`"${P}"`).join(" or "),L){case 1:v+=`The ${y[0]} argument`;break;case 2:v+=`The ${y[0]} and ${y[1]} arguments`;break;default:{let P=y.pop();v+=`The ${y.join(", ")}, and ${P} arguments`}break}return`${v} must be specified`},TypeError),b("ERR_OUT_OF_RANGE",(y,v,L)=>{d(v,'Missing "range" argument');let P;if(Number.isInteger(L)&&Math.abs(L)>2**32)P=p(String(L));else if(typeof L=="bigint"){P=String(L);let S=BigInt(2)**BigInt(32);(L>S||L<-S)&&(P=p(P)),P+="n"}else P=l(L);return`The value of "${y}" is out of range. It must be ${v}. Received ${P}`},RangeError),b("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),b("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),b("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),b("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),b("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),b("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),b("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),b("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),b("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),b("ERR_STREAM_WRITE_AFTER_END","write after end",Error),b("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),a.exports={AbortError:A,aggregateTwoErrors:w(_),hideStackFrames:w,codes:u}}),_r=ye((r,a)=>{pe(),me(),ge();var{AbortController:o,AbortSignal:l}=typeof self<"u"?self:typeof window<"u"?window:void 0;a.exports=o,a.exports.AbortSignal=l,a.exports.default=o});function Ue(){Ue.init.call(this)}function Pr(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}function ss(r){return r._maxListeners===void 0?Ue.defaultMaxListeners:r._maxListeners}function lo(r,a,o,l){var c,i,e,n;if(Pr(o),(i=r._events)===void 0?(i=r._events=Object.create(null),r._eventsCount=0):(i.newListener!==void 0&&(r.emit("newListener",a,o.listener?o.listener:o),i=r._events),e=i[a]),e===void 0)e=i[a]=o,++r._eventsCount;else if(typeof e=="function"?e=i[a]=l?[o,e]:[e,o]:l?e.unshift(o):e.push(o),(c=ss(r))>0&&e.length>c&&!e.warned){e.warned=!0;var t=new Error("Possible EventEmitter memory leak detected. "+e.length+" "+String(a)+" listeners added. Use emitter.setMaxListeners() to increase limit");t.name="MaxListenersExceededWarning",t.emitter=r,t.type=a,t.count=e.length,n=t,console&&console.warn&&console.warn(n)}return r}function gu(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function uo(r,a,o){var l={fired:!1,wrapFn:void 0,target:r,type:a,listener:o},c=gu.bind(l);return c.listener=o,l.wrapFn=c,c}function ho(r,a,o){var l=r._events;if(l===void 0)return[];var c=l[a];return c===void 0?[]:typeof c=="function"?o?[c.listener||c]:[c]:o?function(i){for(var e=new Array(i.length),n=0;n<e.length;++n)e[n]=i[n].listener||i[n];return e}(c):as(c,c.length)}function co(r){var a=this._events;if(a!==void 0){var o=a[r];if(typeof o=="function")return 1;if(o!==void 0)return o.length}return 0}function as(r,a){for(var o=new Array(a),l=0;l<a;++l)o[l]=r[l];return o}var fo,po,Gt,un,hn,cn,dt,go=at(()=>{pe(),me(),ge(),Gt=typeof Reflect=="object"?Reflect:null,un=Gt&&typeof Gt.apply=="function"?Gt.apply:function(r,a,o){return Function.prototype.apply.call(r,a,o)},po=Gt&&typeof Gt.ownKeys=="function"?Gt.ownKeys:Object.getOwnPropertySymbols?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:function(r){return Object.getOwnPropertyNames(r)},hn=Number.isNaN||function(r){return r!=r},fo=Ue,Ue.EventEmitter=Ue,Ue.prototype._events=void 0,Ue.prototype._eventsCount=0,Ue.prototype._maxListeners=void 0,cn=10,Object.defineProperty(Ue,"defaultMaxListeners",{enumerable:!0,get:function(){return cn},set:function(r){if(typeof r!="number"||r<0||hn(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");cn=r}}),Ue.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ue.prototype.setMaxListeners=function(r){if(typeof r!="number"||r<0||hn(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this},Ue.prototype.getMaxListeners=function(){return ss(this)},Ue.prototype.emit=function(r){for(var a=[],o=1;o<arguments.length;o++)a.push(arguments[o]);var l=r==="error",c=this._events;if(c!==void 0)l=l&&c.error===void 0;else if(!l)return!1;if(l){var i;if(a.length>0&&(i=a[0]),i instanceof Error)throw i;var e=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw e.context=i,e}var n=c[r];if(n===void 0)return!1;if(typeof n=="function")un(n,this,a);else{var t=n.length,s=as(n,t);for(o=0;o<t;++o)un(s[o],this,a)}return!0},Ue.prototype.addListener=function(r,a){return lo(this,r,a,!1)},Ue.prototype.on=Ue.prototype.addListener,Ue.prototype.prependListener=function(r,a){return lo(this,r,a,!0)},Ue.prototype.once=function(r,a){return Pr(a),this.on(r,uo(this,r,a)),this},Ue.prototype.prependOnceListener=function(r,a){return Pr(a),this.prependListener(r,uo(this,r,a)),this},Ue.prototype.removeListener=function(r,a){var o,l,c,i,e;if(Pr(a),(l=this._events)===void 0)return this;if((o=l[r])===void 0)return this;if(o===a||o.listener===a)--this._eventsCount==0?this._events=Object.create(null):(delete l[r],l.removeListener&&this.emit("removeListener",r,o.listener||a));else if(typeof o!="function"){for(c=-1,i=o.length-1;i>=0;i--)if(o[i]===a||o[i].listener===a){e=o[i].listener,c=i;break}if(c<0)return this;c===0?o.shift():function(n,t){for(;t+1<n.length;t++)n[t]=n[t+1];n.pop()}(o,c),o.length===1&&(l[r]=o[0]),l.removeListener!==void 0&&this.emit("removeListener",r,e||a)}return this},Ue.prototype.off=Ue.prototype.removeListener,Ue.prototype.removeAllListeners=function(r){var a,o,l;if((o=this._events)===void 0)return this;if(o.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):o[r]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete o[r]),this;if(arguments.length===0){var c,i=Object.keys(o);for(l=0;l<i.length;++l)(c=i[l])!=="removeListener"&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(a=o[r])=="function")this.removeListener(r,a);else if(a!==void 0)for(l=a.length-1;l>=0;l--)this.removeListener(r,a[l]);return this},Ue.prototype.listeners=function(r){return ho(this,r,!0)},Ue.prototype.rawListeners=function(r){return ho(this,r,!1)},Ue.listenerCount=function(r,a){return typeof r.listenerCount=="function"?r.listenerCount(a):co.call(r,a)},Ue.prototype.listenerCount=co,Ue.prototype.eventNames=function(){return this._eventsCount>0?po(this._events):[]},dt=fo,dt.EventEmitter,dt.defaultMaxListeners,dt.init,dt.listenerCount,dt.EventEmitter,dt.defaultMaxListeners,dt.init,dt.listenerCount}),Ht={};ur(Ht,{EventEmitter:()=>ls,default:()=>dt,defaultMaxListeners:()=>us,init:()=>hs,listenerCount:()=>cs,on:()=>fs,once:()=>ds});var ls,us,hs,cs,fs,ds,ir=at(()=>{pe(),me(),ge(),go(),go(),dt.once=function(r,a){return new Promise((o,l)=>{function c(...e){i!==void 0&&r.removeListener("error",i),o(e)}let i;a!=="error"&&(i=e=>{r.removeListener(name,c),l(e)},r.once("error",i)),r.once(a,c)})},dt.on=function(r,a){let o=[],l=[],c=null,i=!1,e={async next(){let s=o.shift();if(s)return createIterResult(s,!1);if(c){let u=Promise.reject(c);return c=null,u}return i?createIterResult(void 0,!0):new Promise((u,d)=>l.push({resolve:u,reject:d}))},async return(){r.removeListener(a,n),r.removeListener("error",t),i=!0;for(let s of l)s.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(s){c=s,r.removeListener(a,n),r.removeListener("error",t)},[Symbol.asyncIterator](){return this}};return r.on(a,n),r.on("error",t),e;function n(...s){let u=l.shift();u?u.resolve(createIterResult(s,!1)):o.push(s)}function t(s){i=!0;let u=l.shift();u?u.reject(s):c=s,e.return()}},{EventEmitter:ls,defaultMaxListeners:us,init:hs,listenerCount:cs,on:fs,once:ds}=dt}),ct=ye((r,a)=>{pe(),me(),ge();var o=(et(),De(Xe)),{format:l,inspect:c}=os(),{codes:{ERR_INVALID_ARG_TYPE:i}}=lt(),{kResistStopPropagation:e,AggregateError:n,SymbolDispose:t}=Ye(),s=globalThis.AbortSignal||_r().AbortSignal,u=globalThis.AbortController||_r().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,p=globalThis.Blob||o.Blob,m=typeof p<"u"?function(_){return _ instanceof p}:function(_){return!1},b=(_,A)=>{if(_!==void 0&&(_===null||typeof _!="object"||!("aborted"in _)))throw new i(A,"AbortSignal",_)},w=(_,A)=>{if(typeof _!="function")throw new i(A,"Function",_)};a.exports={AggregateError:n,kEmptyObject:Object.freeze({}),once(_){let A=!1;return function(...y){A||(A=!0,_.apply(this,y))}},createDeferredPromise:function(){let _,A;return{promise:new Promise((y,v)=>{_=y,A=v}),resolve:_,reject:A}},promisify(_){return new Promise((A,y)=>{_((v,...L)=>v?y(v):A(...L))})},debuglog(){return function(){}},format:l,inspect:c,types:{isAsyncFunction(_){return _ instanceof d},isArrayBufferView(_){return ArrayBuffer.isView(_)}},isBlob:m,deprecate(_,A){return _},addAbortListener:(ir(),De(Ht)).addAbortListener||function(_,A){if(_===void 0)throw new i("signal","AbortSignal",_);b(_,"signal"),w(A,"listener");let y;return _.aborted?queueMicrotask(()=>A()):(_.addEventListener("abort",A,{__proto__:null,once:!0,[e]:!0}),y=()=>{_.removeEventListener("abort",A)}),{__proto__:null,[t](){var v;(v=y)===null||v===void 0||v()}}},AbortSignalAny:s.any||function(_){if(_.length===1)return _[0];let A=new u,y=()=>A.abort();return _.forEach(v=>{b(v,"signals"),v.addEventListener("abort",y,{once:!0})}),A.signal.addEventListener("abort",()=>{_.forEach(v=>v.removeEventListener("abort",y))},{once:!0}),A.signal}},a.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),Er=ye((r,a)=>{pe(),me(),ge();var{ArrayIsArray:o,ArrayPrototypeIncludes:l,ArrayPrototypeJoin:c,ArrayPrototypeMap:i,NumberIsInteger:e,NumberIsNaN:n,NumberMAX_SAFE_INTEGER:t,NumberMIN_SAFE_INTEGER:s,NumberParseInt:u,ObjectPrototypeHasOwnProperty:d,RegExpPrototypeExec:p,String:m,StringPrototypeToUpperCase:b,StringPrototypeTrim:w}=Ye(),{hideStackFrames:_,codes:{ERR_SOCKET_BAD_PORT:A,ERR_INVALID_ARG_TYPE:y,ERR_INVALID_ARG_VALUE:v,ERR_OUT_OF_RANGE:L,ERR_UNKNOWN_SIGNAL:P}}=lt(),{normalizeEncoding:S}=ct(),{isAsyncFunction:C,isArrayBufferView:j}=ct().types,Q={};function ee(F){return F===(F|0)}function ae(F){return F===F>>>0}var O=/^[0-7]+$/,K="must be a 32-bit unsigned integer or an octal string";function J(F,ue,we){if(typeof F>"u"&&(F=we),typeof F=="string"){if(p(O,F)===null)throw new v(ue,F,K);F=u(F,8)}return ce(F,ue),F}var W=_((F,ue,we=s,ne=t)=>{if(typeof F!="number")throw new y(ue,"number",F);if(!e(F))throw new L(ue,"an integer",F);if(F<we||F>ne)throw new L(ue,`>= ${we} && <= ${ne}`,F)}),be=_((F,ue,we=-2147483648,ne=2147483647)=>{if(typeof F!="number")throw new y(ue,"number",F);if(!e(F))throw new L(ue,"an integer",F);if(F<we||F>ne)throw new L(ue,`>= ${we} && <= ${ne}`,F)}),ce=_((F,ue,we=!1)=>{if(typeof F!="number")throw new y(ue,"number",F);if(!e(F))throw new L(ue,"an integer",F);let ne=we?1:0,Oe=4294967295;if(F<ne||F>Oe)throw new L(ue,`>= ${ne} && <= ${Oe}`,F)});function le(F,ue){if(typeof F!="string")throw new y(ue,"string",F)}function Se(F,ue,we=void 0,ne){if(typeof F!="number")throw new y(ue,"number",F);if(we!=null&&F<we||ne!=null&&F>ne||(we!=null||ne!=null)&&n(F))throw new L(ue,`${we!=null?`>= ${we}`:""}${we!=null&&ne!=null?" && ":""}${ne!=null?`<= ${ne}`:""}`,F)}var Y=_((F,ue,we)=>{if(!l(we,F)){let ne="must be one of: "+c(i(we,Oe=>typeof Oe=="string"?`'${Oe}'`:m(Oe)),", ");throw new v(ue,F,ne)}});function X(F,ue){if(typeof F!="boolean")throw new y(ue,"boolean",F)}function x(F,ue,we){return F==null||!d(F,ue)?we:F[ue]}var te=_((F,ue,we=null)=>{let ne=x(we,"allowArray",!1),Oe=x(we,"allowFunction",!1);if(!x(we,"nullable",!1)&&F===null||!ne&&o(F)||typeof F!="object"&&(!Oe||typeof F!="function"))throw new y(ue,"Object",F)}),de=_((F,ue)=>{if(F!=null&&typeof F!="object"&&typeof F!="function")throw new y(ue,"a dictionary",F)}),U=_((F,ue,we=0)=>{if(!o(F))throw new y(ue,"Array",F);if(F.length<we){let ne=`must be longer than ${we}`;throw new v(ue,F,ne)}});function ke(F,ue){U(F,ue);for(let we=0;we<F.length;we++)le(F[we],`${ue}[${we}]`)}function z(F,ue){U(F,ue);for(let we=0;we<F.length;we++)X(F[we],`${ue}[${we}]`)}function M(F,ue){U(F,ue);for(let we=0;we<F.length;we++){let ne=F[we],Oe=`${ue}[${we}]`;if(ne==null)throw new y(Oe,"AbortSignal",ne);he(ne,Oe)}}function re(F,ue="signal"){if(le(F,ue),Q[F]===void 0)throw Q[b(F)]!==void 0?new P(F+" (signals must use all capital letters)"):new P(F)}var V=_((F,ue="buffer")=>{if(!j(F))throw new y(ue,["Buffer","TypedArray","DataView"],F)});function H(F,ue){let we=S(ue),ne=F.length;if(we==="hex"&&ne%2!==0)throw new v("encoding",ue,`is invalid for data of length ${ne}`)}function q(F,ue="Port",we=!0){if(typeof F!="number"&&typeof F!="string"||typeof F=="string"&&w(F).length===0||+F!==+F>>>0||F>65535||F===0&&!we)throw new A(ue,F,we);return F|0}var he=_((F,ue)=>{if(F!==void 0&&(F===null||typeof F!="object"||!("aborted"in F)))throw new y(ue,"AbortSignal",F)}),oe=_((F,ue)=>{if(typeof F!="function")throw new y(ue,"Function",F)}),B=_((F,ue)=>{if(typeof F!="function"||C(F))throw new y(ue,"Function",F)}),D=_((F,ue)=>{if(F!==void 0)throw new y(ue,"undefined",F)});function Z(F,ue,we){if(!l(we,F))throw new y(ue,`('${c(we,"|")}')`,F)}var se=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ie(F,ue){if(typeof F>"u"||!p(se,F))throw new v(ue,F,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function fe(F){if(typeof F=="string")return ie(F,"hints"),F;if(o(F)){let ue=F.length,we="";if(ue===0)return we;for(let ne=0;ne<ue;ne++){let Oe=F[ne];ie(Oe,"hints"),we+=Oe,ne!==ue-1&&(we+=", ")}return we}throw new v("hints",F,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}a.exports={isInt32:ee,isUint32:ae,parseFileMode:J,validateArray:U,validateStringArray:ke,validateBooleanArray:z,validateAbortSignalArray:M,validateBoolean:X,validateBuffer:V,validateDictionary:de,validateEncoding:H,validateFunction:oe,validateInt32:be,validateInteger:W,validateNumber:Se,validateObject:te,validateOneOf:Y,validatePlainFunction:B,validatePort:q,validateSignalName:re,validateString:le,validateUint32:ce,validateUndefined:D,validateUnion:Z,validateAbortSignal:he,validateLinkHeaderValue:fe}}),or=ye((r,a)=>{pe(),me(),ge();var o=a.exports={},l,c;function i(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?l=setTimeout:l=i}catch{l=i}try{typeof clearTimeout=="function"?c=clearTimeout:c=e}catch{c=e}})();function n(A){if(l===setTimeout)return setTimeout(A,0);if((l===i||!l)&&setTimeout)return l=setTimeout,setTimeout(A,0);try{return l(A,0)}catch{try{return l.call(null,A,0)}catch{return l.call(this,A,0)}}}function t(A){if(c===clearTimeout)return clearTimeout(A);if((c===e||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(A);try{return c(A)}catch{try{return c.call(null,A)}catch{return c.call(this,A)}}}var s=[],u=!1,d,p=-1;function m(){!u||!d||(u=!1,d.length?s=d.concat(s):p=-1,s.length&&b())}function b(){if(!u){var A=n(m);u=!0;for(var y=s.length;y;){for(d=s,s=[];++p<y;)d&&d[p].run();p=-1,y=s.length}d=null,u=!1,t(A)}}o.nextTick=function(A){var y=new Array(arguments.length-1);if(arguments.length>1)for(var v=1;v<arguments.length;v++)y[v-1]=arguments[v];s.push(new w(A,y)),s.length===1&&!u&&n(b)};function w(A,y){this.fun=A,this.array=y}w.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={};function _(){}o.on=_,o.addListener=_,o.once=_,o.off=_,o.removeListener=_,o.removeAllListeners=_,o.emit=_,o.prependListener=_,o.prependOnceListener=_,o.listeners=function(A){return[]},o.binding=function(A){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(A){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}}),jt=ye((r,a)=>{pe(),me(),ge();var{SymbolAsyncIterator:o,SymbolIterator:l,SymbolFor:c}=Ye(),i=c("nodejs.stream.destroyed"),e=c("nodejs.stream.errored"),n=c("nodejs.stream.readable"),t=c("nodejs.stream.writable"),s=c("nodejs.stream.disturbed"),u=c("nodejs.webstream.isClosedPromise"),d=c("nodejs.webstream.controllerErrorFunction");function p(x,te=!1){var de;return!!(x&&typeof x.pipe=="function"&&typeof x.on=="function"&&(!te||typeof x.pause=="function"&&typeof x.resume=="function")&&(!x._writableState||((de=x._readableState)===null||de===void 0?void 0:de.readable)!==!1)&&(!x._writableState||x._readableState))}function m(x){var te;return!!(x&&typeof x.write=="function"&&typeof x.on=="function"&&(!x._readableState||((te=x._writableState)===null||te===void 0?void 0:te.writable)!==!1))}function b(x){return!!(x&&typeof x.pipe=="function"&&x._readableState&&typeof x.on=="function"&&typeof x.write=="function")}function w(x){return x&&(x._readableState||x._writableState||typeof x.write=="function"&&typeof x.on=="function"||typeof x.pipe=="function"&&typeof x.on=="function")}function _(x){return!!(x&&!w(x)&&typeof x.pipeThrough=="function"&&typeof x.getReader=="function"&&typeof x.cancel=="function")}function A(x){return!!(x&&!w(x)&&typeof x.getWriter=="function"&&typeof x.abort=="function")}function y(x){return!!(x&&!w(x)&&typeof x.readable=="object"&&typeof x.writable=="object")}function v(x){return _(x)||A(x)||y(x)}function L(x,te){return x==null?!1:te===!0?typeof x[o]=="function":te===!1?typeof x[l]=="function":typeof x[o]=="function"||typeof x[l]=="function"}function P(x){if(!w(x))return null;let te=x._writableState,de=x._readableState,U=te||de;return!!(x.destroyed||x[i]||U!=null&&U.destroyed)}function S(x){if(!m(x))return null;if(x.writableEnded===!0)return!0;let te=x._writableState;return te!=null&&te.errored?!1:typeof(te==null?void 0:te.ended)!="boolean"?null:te.ended}function C(x,te){if(!m(x))return null;if(x.writableFinished===!0)return!0;let de=x._writableState;return de!=null&&de.errored?!1:typeof(de==null?void 0:de.finished)!="boolean"?null:!!(de.finished||te===!1&&de.ended===!0&&de.length===0)}function j(x){if(!p(x))return null;if(x.readableEnded===!0)return!0;let te=x._readableState;return!te||te.errored?!1:typeof(te==null?void 0:te.ended)!="boolean"?null:te.ended}function Q(x,te){if(!p(x))return null;let de=x._readableState;return de!=null&&de.errored?!1:typeof(de==null?void 0:de.endEmitted)!="boolean"?null:!!(de.endEmitted||te===!1&&de.ended===!0&&de.length===0)}function ee(x){return x&&x[n]!=null?x[n]:typeof(x==null?void 0:x.readable)!="boolean"?null:P(x)?!1:p(x)&&x.readable&&!Q(x)}function ae(x){return x&&x[t]!=null?x[t]:typeof(x==null?void 0:x.writable)!="boolean"?null:P(x)?!1:m(x)&&x.writable&&!S(x)}function O(x,te){return w(x)?P(x)?!0:!((te==null?void 0:te.readable)!==!1&&ee(x)||(te==null?void 0:te.writable)!==!1&&ae(x)):null}function K(x){var te,de;return w(x)?x.writableErrored?x.writableErrored:(te=(de=x._writableState)===null||de===void 0?void 0:de.errored)!==null&&te!==void 0?te:null:null}function J(x){var te,de;return w(x)?x.readableErrored?x.readableErrored:(te=(de=x._readableState)===null||de===void 0?void 0:de.errored)!==null&&te!==void 0?te:null:null}function W(x){if(!w(x))return null;if(typeof x.closed=="boolean")return x.closed;let te=x._writableState,de=x._readableState;return typeof(te==null?void 0:te.closed)=="boolean"||typeof(de==null?void 0:de.closed)=="boolean"?(te==null?void 0:te.closed)||(de==null?void 0:de.closed):typeof x._closed=="boolean"&&be(x)?x._closed:null}function be(x){return typeof x._closed=="boolean"&&typeof x._defaultKeepAlive=="boolean"&&typeof x._removedConnection=="boolean"&&typeof x._removedContLen=="boolean"}function ce(x){return typeof x._sent100=="boolean"&&be(x)}function le(x){var te;return typeof x._consuming=="boolean"&&typeof x._dumped=="boolean"&&((te=x.req)===null||te===void 0?void 0:te.upgradeOrConnect)===void 0}function Se(x){if(!w(x))return null;let te=x._writableState,de=x._readableState,U=te||de;return!U&&ce(x)||!!(U&&U.autoDestroy&&U.emitClose&&U.closed===!1)}function Y(x){var te;return!!(x&&((te=x[s])!==null&&te!==void 0?te:x.readableDidRead||x.readableAborted))}function X(x){var te,de,U,ke,z,M,re,V,H,q;return!!(x&&((te=(de=(U=(ke=(z=(M=x[e])!==null&&M!==void 0?M:x.readableErrored)!==null&&z!==void 0?z:x.writableErrored)!==null&&ke!==void 0?ke:(re=x._readableState)===null||re===void 0?void 0:re.errorEmitted)!==null&&U!==void 0?U:(V=x._writableState)===null||V===void 0?void 0:V.errorEmitted)!==null&&de!==void 0?de:(H=x._readableState)===null||H===void 0?void 0:H.errored)!==null&&te!==void 0?te:!((q=x._writableState)===null||q===void 0)&&q.errored))}a.exports={isDestroyed:P,kIsDestroyed:i,isDisturbed:Y,kIsDisturbed:s,isErrored:X,kIsErrored:e,isReadable:ee,kIsReadable:n,kIsClosedPromise:u,kControllerErrorFunction:d,kIsWritable:t,isClosed:W,isDuplexNodeStream:b,isFinished:O,isIterable:L,isReadableNodeStream:p,isReadableStream:_,isReadableEnded:j,isReadableFinished:Q,isReadableErrored:J,isNodeStream:w,isWebStream:v,isWritable:ae,isWritableNodeStream:m,isWritableStream:A,isWritableEnded:S,isWritableFinished:C,isWritableErrored:K,isServerRequest:le,isServerResponse:ce,willEmitClose:Se,isTransformStream:y}}),qt=ye((r,a)=>{pe(),me(),ge();var o=or(),{AbortError:l,codes:c}=lt(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_PREMATURE_CLOSE:e}=c,{kEmptyObject:n,once:t}=ct(),{validateAbortSignal:s,validateFunction:u,validateObject:d,validateBoolean:p}=Er(),{Promise:m,PromisePrototypeThen:b,SymbolDispose:w}=Ye(),{isClosed:_,isReadable:A,isReadableNodeStream:y,isReadableStream:v,isReadableFinished:L,isReadableErrored:P,isWritable:S,isWritableNodeStream:C,isWritableStream:j,isWritableFinished:Q,isWritableErrored:ee,isNodeStream:ae,willEmitClose:O,kIsClosedPromise:K}=jt(),J;function W(Y){return Y.setHeader&&typeof Y.abort=="function"}var be=()=>{};function ce(Y,X,x){var te,de;if(arguments.length===2?(x=X,X=n):X==null?X=n:d(X,"options"),u(x,"callback"),s(X.signal,"options.signal"),x=t(x),v(Y)||j(Y))return le(Y,X,x);if(!ae(Y))throw new i("stream",["ReadableStream","WritableStream","Stream"],Y);let U=(te=X.readable)!==null&&te!==void 0?te:y(Y),ke=(de=X.writable)!==null&&de!==void 0?de:C(Y),z=Y._writableState,M=Y._readableState,re=()=>{Y.writable||q()},V=O(Y)&&y(Y)===U&&C(Y)===ke,H=Q(Y,!1),q=()=>{H=!0,Y.destroyed&&(V=!1),!(V&&(!Y.readable||U))&&(!U||he)&&x.call(Y)},he=L(Y,!1),oe=()=>{he=!0,Y.destroyed&&(V=!1),!(V&&(!Y.writable||ke))&&(!ke||H)&&x.call(Y)},B=F=>{x.call(Y,F)},D=_(Y),Z=()=>{D=!0;let F=ee(Y)||P(Y);if(F&&typeof F!="boolean")return x.call(Y,F);if(U&&!he&&y(Y,!0)&&!L(Y,!1))return x.call(Y,new e);if(ke&&!H&&!Q(Y,!1))return x.call(Y,new e);x.call(Y)},se=()=>{D=!0;let F=ee(Y)||P(Y);if(F&&typeof F!="boolean")return x.call(Y,F);x.call(Y)},ie=()=>{Y.req.on("finish",q)};W(Y)?(Y.on("complete",q),V||Y.on("abort",Z),Y.req?ie():Y.on("request",ie)):ke&&!z&&(Y.on("end",re),Y.on("close",re)),!V&&typeof Y.aborted=="boolean"&&Y.on("aborted",Z),Y.on("end",oe),Y.on("finish",q),X.error!==!1&&Y.on("error",B),Y.on("close",Z),D?o.nextTick(Z):z!=null&&z.errorEmitted||M!=null&&M.errorEmitted?V||o.nextTick(se):(!U&&(!V||A(Y))&&(H||S(Y)===!1)||!ke&&(!V||S(Y))&&(he||A(Y)===!1)||M&&Y.req&&Y.aborted)&&o.nextTick(se);let fe=()=>{x=be,Y.removeListener("aborted",Z),Y.removeListener("complete",q),Y.removeListener("abort",Z),Y.removeListener("request",ie),Y.req&&Y.req.removeListener("finish",q),Y.removeListener("end",re),Y.removeListener("close",re),Y.removeListener("finish",q),Y.removeListener("end",oe),Y.removeListener("error",B),Y.removeListener("close",Z)};if(X.signal&&!D){let F=()=>{let ue=x;fe(),ue.call(Y,new l(void 0,{cause:X.signal.reason}))};if(X.signal.aborted)o.nextTick(F);else{J=J||ct().addAbortListener;let ue=J(X.signal,F),we=x;x=t((...ne)=>{ue[w](),we.apply(Y,ne)})}}return fe}function le(Y,X,x){let te=!1,de=be;if(X.signal)if(de=()=>{te=!0,x.call(Y,new l(void 0,{cause:X.signal.reason}))},X.signal.aborted)o.nextTick(de);else{J=J||ct().addAbortListener;let ke=J(X.signal,de),z=x;x=t((...M)=>{ke[w](),z.apply(Y,M)})}let U=(...ke)=>{te||o.nextTick(()=>x.apply(Y,ke))};return b(Y[K].promise,U,U),be}function Se(Y,X){var x;let te=!1;return X===null&&(X=n),(x=X)!==null&&x!==void 0&&x.cleanup&&(p(X.cleanup,"cleanup"),te=X.cleanup),new m((de,U)=>{let ke=ce(Y,X,z=>{te&&ke(),z?U(z):de()})})}a.exports=ce,a.exports.finished=Se}),hr=ye((r,a)=>{pe(),me(),ge();var o=or(),{aggregateTwoErrors:l,codes:{ERR_MULTIPLE_CALLBACK:c},AbortError:i}=lt(),{Symbol:e}=Ye(),{kIsDestroyed:n,isDestroyed:t,isFinished:s,isServerRequest:u}=jt(),d=e("kDestroy"),p=e("kConstruct");function m(O,K,J){O&&(O.stack,K&&!K.errored&&(K.errored=O),J&&!J.errored&&(J.errored=O))}function b(O,K){let J=this._readableState,W=this._writableState,be=W||J;return W!=null&&W.destroyed||J!=null&&J.destroyed?(typeof K=="function"&&K(),this):(m(O,W,J),W&&(W.destroyed=!0),J&&(J.destroyed=!0),be.constructed?w(this,O,K):this.once(d,function(ce){w(this,l(ce,O),K)}),this)}function w(O,K,J){let W=!1;function be(ce){if(W)return;W=!0;let le=O._readableState,Se=O._writableState;m(ce,Se,le),Se&&(Se.closed=!0),le&&(le.closed=!0),typeof J=="function"&&J(ce),ce?o.nextTick(_,O,ce):o.nextTick(A,O)}try{O._destroy(K||null,be)}catch(ce){be(ce)}}function _(O,K){y(O,K),A(O)}function A(O){let K=O._readableState,J=O._writableState;J&&(J.closeEmitted=!0),K&&(K.closeEmitted=!0),(J!=null&&J.emitClose||K!=null&&K.emitClose)&&O.emit("close")}function y(O,K){let J=O._readableState,W=O._writableState;W!=null&&W.errorEmitted||J!=null&&J.errorEmitted||(W&&(W.errorEmitted=!0),J&&(J.errorEmitted=!0),O.emit("error",K))}function v(){let O=this._readableState,K=this._writableState;O&&(O.constructed=!0,O.closed=!1,O.closeEmitted=!1,O.destroyed=!1,O.errored=null,O.errorEmitted=!1,O.reading=!1,O.ended=O.readable===!1,O.endEmitted=O.readable===!1),K&&(K.constructed=!0,K.destroyed=!1,K.closed=!1,K.closeEmitted=!1,K.errored=null,K.errorEmitted=!1,K.finalCalled=!1,K.prefinished=!1,K.ended=K.writable===!1,K.ending=K.writable===!1,K.finished=K.writable===!1)}function L(O,K,J){let W=O._readableState,be=O._writableState;if(be!=null&&be.destroyed||W!=null&&W.destroyed)return this;W!=null&&W.autoDestroy||be!=null&&be.autoDestroy?O.destroy(K):K&&(K.stack,be&&!be.errored&&(be.errored=K),W&&!W.errored&&(W.errored=K),J?o.nextTick(y,O,K):y(O,K))}function P(O,K){if(typeof O._construct!="function")return;let J=O._readableState,W=O._writableState;J&&(J.constructed=!1),W&&(W.constructed=!1),O.once(p,K),!(O.listenerCount(p)>1)&&o.nextTick(S,O)}function S(O){let K=!1;function J(W){if(K){L(O,W??new c);return}K=!0;let be=O._readableState,ce=O._writableState,le=ce||be;be&&(be.constructed=!0),ce&&(ce.constructed=!0),le.destroyed?O.emit(d,W):W?L(O,W,!0):o.nextTick(C,O)}try{O._construct(W=>{o.nextTick(J,W)})}catch(W){o.nextTick(J,W)}}function C(O){O.emit(p)}function j(O){return(O==null?void 0:O.setHeader)&&typeof O.abort=="function"}function Q(O){O.emit("close")}function ee(O,K){O.emit("error",K),o.nextTick(Q,O)}function ae(O,K){!O||t(O)||(!K&&!s(O)&&(K=new i),u(O)?(O.socket=null,O.destroy(K)):j(O)?O.abort():j(O.req)?O.req.abort():typeof O.destroy=="function"?O.destroy(K):typeof O.close=="function"?O.close():K?o.nextTick(ee,O,K):o.nextTick(Q,O),O.destroyed||(O[n]=!0))}a.exports={construct:P,destroyer:ae,destroy:b,undestroy:v,errorOrDestroy:L}}),zi=ye((r,a)=>{pe(),me(),ge();var{ArrayIsArray:o,ObjectSetPrototypeOf:l}=Ye(),{EventEmitter:c}=(ir(),De(Ht));function i(n){c.call(this,n)}l(i.prototype,c.prototype),l(i,c),i.prototype.pipe=function(n,t){let s=this;function u(A){n.writable&&n.write(A)===!1&&s.pause&&s.pause()}s.on("data",u);function d(){s.readable&&s.resume&&s.resume()}n.on("drain",d),!n._isStdio&&(!t||t.end!==!1)&&(s.on("end",m),s.on("close",b));let p=!1;function m(){p||(p=!0,n.end())}function b(){p||(p=!0,typeof n.destroy=="function"&&n.destroy())}function w(A){_(),c.listenerCount(this,"error")===0&&this.emit("error",A)}e(s,"error",w),e(n,"error",w);function _(){s.removeListener("data",u),n.removeListener("drain",d),s.removeListener("end",m),s.removeListener("close",b),s.removeListener("error",w),n.removeListener("error",w),s.removeListener("end",_),s.removeListener("close",_),n.removeListener("close",_)}return s.on("end",_),s.on("close",_),n.on("close",_),n.emit("pipe",s),n};function e(n,t,s){if(typeof n.prependListener=="function")return n.prependListener(t,s);!n._events||!n._events[t]?n.on(t,s):o(n._events[t])?n._events[t].unshift(s):n._events[t]=[s,n._events[t]]}a.exports={Stream:i,prependListener:e}}),zr=ye((r,a)=>{pe(),me(),ge();var{SymbolDispose:o}=Ye(),{AbortError:l,codes:c}=lt(),{isNodeStream:i,isWebStream:e,kControllerErrorFunction:n}=jt(),t=qt(),{ERR_INVALID_ARG_TYPE:s}=c,u,d=(p,m)=>{if(typeof p!="object"||!("aborted"in p))throw new s(m,"AbortSignal",p)};a.exports.addAbortSignal=function(p,m){if(d(p,"signal"),!i(m)&&!e(m))throw new s("stream",["ReadableStream","WritableStream","Stream"],m);return a.exports.addAbortSignalNoValidate(p,m)},a.exports.addAbortSignalNoValidate=function(p,m){if(typeof p!="object"||!("aborted"in p))return m;let b=i(m)?()=>{m.destroy(new l(void 0,{cause:p.reason}))}:()=>{m[n](new l(void 0,{cause:p.reason}))};if(p.aborted)b();else{u=u||ct().addAbortListener;let w=u(p,b);t(m,w[o])}return m}}),mu=ye((r,a)=>{pe(),me(),ge();var{StringPrototypeSlice:o,SymbolIterator:l,TypedArrayPrototypeSet:c,Uint8Array:i}=Ye(),{Buffer:e}=(et(),De(Xe)),{inspect:n}=ct();a.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){let s={data:t,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length}unshift(t){let s={data:t,next:this.head};this.length===0&&(this.tail=s),this.head=s,++this.length}shift(){if(this.length===0)return;let t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(this.length===0)return"";let s=this.head,u=""+s.data;for(;(s=s.next)!==null;)u+=t+s.data;return u}concat(t){if(this.length===0)return e.alloc(0);let s=e.allocUnsafe(t>>>0),u=this.head,d=0;for(;u;)c(s,u.data,d),d+=u.data.length,u=u.next;return s}consume(t,s){let u=this.head.data;if(t<u.length){let d=u.slice(0,t);return this.head.data=u.slice(t),d}return t===u.length?this.shift():s?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[l](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let s="",u=this.head,d=0;do{let p=u.data;if(t>p.length)s+=p,t-=p.length;else{t===p.length?(s+=p,++d,u.next?this.head=u.next:this.head=this.tail=null):(s+=o(p,0,t),this.head=u,u.data=o(p,t));break}++d}while((u=u.next)!==null);return this.length-=d,s}_getBuffer(t){let s=e.allocUnsafe(t),u=t,d=this.head,p=0;do{let m=d.data;if(t>m.length)c(s,m,u-t),t-=m.length;else{t===m.length?(c(s,m,u-t),++p,d.next?this.head=d.next:this.head=this.tail=null):(c(s,new i(m.buffer,m.byteOffset,t),u-t),this.head=d,d.data=m.slice(t));break}++p}while((d=d.next)!==null);return this.length-=p,s}[Symbol.for("nodejs.util.inspect.custom")](t,s){return n(this,{...s,depth:0,customInspect:!1})}}}),Yr=ye((r,a)=>{pe(),me(),ge();var{MathFloor:o,NumberIsInteger:l}=Ye(),{validateInteger:c}=Er(),{ERR_INVALID_ARG_VALUE:i}=lt().codes,e=16*1024,n=16;function t(p,m,b){return p.highWaterMark!=null?p.highWaterMark:m?p[b]:null}function s(p){return p?n:e}function u(p,m){c(m,"value",0),p?n=m:e=m}function d(p,m,b,w){let _=t(m,w,b);if(_!=null){if(!l(_)||_<0){let A=w?`options.${b}`:"options.highWaterMark";throw new i(A,_)}return o(_)}return s(p.objectMode)}a.exports={getHighWaterMark:d,getDefaultHighWaterMark:s,setDefaultHighWaterMark:u}}),bu=ye((r,a)=>{pe(),me(),ge();var o=(et(),De(Xe)),l=o.Buffer;function c(e,n){for(var t in e)n[t]=e[t]}l.from&&l.alloc&&l.allocUnsafe&&l.allocUnsafeSlow?a.exports=o:(c(o,r),r.Buffer=i);function i(e,n,t){return l(e,n,t)}i.prototype=Object.create(l.prototype),c(l,i),i.from=function(e,n,t){if(typeof e=="number")throw new TypeError("Argument must not be a number");return l(e,n,t)},i.alloc=function(e,n,t){if(typeof e!="number")throw new TypeError("Argument must be a number");var s=l(e);return n!==void 0?typeof t=="string"?s.fill(n,t):s.fill(n):s.fill(0),s},i.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return l(e)},i.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}}),yu=ye(r=>{pe(),me(),ge();var a=bu().Buffer,o=a.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function l(y){if(!y)return"utf8";for(var v;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(v)return;y=(""+y).toLowerCase(),v=!0}}function c(y){var v=l(y);if(typeof v!="string"&&(a.isEncoding===o||!o(y)))throw new Error("Unknown encoding: "+y);return v||y}r.StringDecoder=i;function i(y){this.encoding=c(y);var v;switch(this.encoding){case"utf16le":this.text=p,this.end=m,v=4;break;case"utf8":this.fillLast=s,v=4;break;case"base64":this.text=b,this.end=w,v=3;break;default:this.write=_,this.end=A;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=a.allocUnsafe(v)}i.prototype.write=function(y){if(y.length===0)return"";var v,L;if(this.lastNeed){if(v=this.fillLast(y),v===void 0)return"";L=this.lastNeed,this.lastNeed=0}else L=0;return L<y.length?v?v+this.text(y,L):this.text(y,L):v||""},i.prototype.end=d,i.prototype.text=u,i.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function e(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function n(y,v,L){var P=v.length-1;if(P<L)return 0;var S=e(v[P]);return S>=0?(S>0&&(y.lastNeed=S-1),S):--P<L||S===-2?0:(S=e(v[P]),S>=0?(S>0&&(y.lastNeed=S-2),S):--P<L||S===-2?0:(S=e(v[P]),S>=0?(S>0&&(S===2?S=0:y.lastNeed=S-3),S):0))}function t(y,v,L){if((v[0]&192)!==128)return y.lastNeed=0,"�";if(y.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return y.lastNeed=1,"�";if(y.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return y.lastNeed=2,"�"}}function s(y){var v=this.lastTotal-this.lastNeed,L=t(this,y);if(L!==void 0)return L;if(this.lastNeed<=y.length)return y.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,v,0,y.length),this.lastNeed-=y.length}function u(y,v){var L=n(this,y,v);if(!this.lastNeed)return y.toString("utf8",v);this.lastTotal=L;var P=y.length-(L-this.lastNeed);return y.copy(this.lastChar,0,P),y.toString("utf8",v,P)}function d(y){var v=y&&y.length?this.write(y):"";return this.lastNeed?v+"�":v}function p(y,v){if((y.length-v)%2===0){var L=y.toString("utf16le",v);if(L){var P=L.charCodeAt(L.length-1);if(P>=55296&&P<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],L.slice(0,-1)}return L}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",v,y.length-1)}function m(y){var v=y&&y.length?this.write(y):"";if(this.lastNeed){var L=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,L)}return v}function b(y,v){var L=(y.length-v)%3;return L===0?y.toString("base64",v):(this.lastNeed=3-L,this.lastTotal=3,L===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",v,y.length-L))}function w(y){var v=y&&y.length?this.write(y):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function _(y){return y.toString(this.encoding)}function A(y){return y&&y.length?this.write(y):""}}),ps=ye((r,a)=>{pe(),me(),ge();var o=or(),{PromisePrototypeThen:l,SymbolAsyncIterator:c,SymbolIterator:i}=Ye(),{Buffer:e}=(et(),De(Xe)),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_NULL_VALUES:t}=lt().codes;function s(u,d,p){let m;if(typeof d=="string"||d instanceof e)return new u({objectMode:!0,...p,read(){this.push(d),this.push(null)}});let b;if(d&&d[c])b=!0,m=d[c]();else if(d&&d[i])b=!1,m=d[i]();else throw new n("iterable",["Iterable"],d);let w=new u({objectMode:!0,highWaterMark:1,...p}),_=!1;w._read=function(){_||(_=!0,y())},w._destroy=function(v,L){l(A(v),()=>o.nextTick(L,v),P=>o.nextTick(L,P||v))};async function A(v){let L=v!=null,P=typeof m.throw=="function";if(L&&P){let{value:S,done:C}=await m.throw(v);if(await S,C)return}if(typeof m.return=="function"){let{value:S}=await m.return();await S}}async function y(){for(;;){try{let{value:v,done:L}=b?await m.next():m.next();if(L)w.push(null);else{let P=v&&typeof v.then=="function"?await v:v;if(P===null)throw _=!1,new t;if(w.push(P))continue;_=!1}}catch(v){w.destroy(v)}break}}return w}a.exports=s}),Gr=ye((r,a)=>{pe(),me(),ge();var o=or(),{ArrayPrototypeIndexOf:l,NumberIsInteger:c,NumberIsNaN:i,NumberParseInt:e,ObjectDefineProperties:n,ObjectKeys:t,ObjectSetPrototypeOf:s,Promise:u,SafeSet:d,SymbolAsyncDispose:p,SymbolAsyncIterator:m,Symbol:b}=Ye();a.exports=ne,ne.ReadableState=we;var{EventEmitter:w}=(ir(),De(Ht)),{Stream:_,prependListener:A}=zi(),{Buffer:y}=(et(),De(Xe)),{addAbortSignal:v}=zr(),L=qt(),P=ct().debuglog("stream",k=>{P=k}),S=mu(),C=hr(),{getHighWaterMark:j,getDefaultHighWaterMark:Q}=Yr(),{aggregateTwoErrors:ee,codes:{ERR_INVALID_ARG_TYPE:ae,ERR_METHOD_NOT_IMPLEMENTED:O,ERR_OUT_OF_RANGE:K,ERR_STREAM_PUSH_AFTER_EOF:J,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:W},AbortError:be}=lt(),{validateObject:ce}=Er(),le=b("kPaused"),{StringDecoder:Se}=yu(),Y=ps();s(ne.prototype,_.prototype),s(ne,_);var X=()=>{},{errorOrDestroy:x}=C,te=1,de=2,U=4,ke=8,z=16,M=32,re=64,V=128,H=256,q=512,he=1024,oe=2048,B=4096,D=8192,Z=16384,se=32768,ie=65536,fe=1<<17,F=1<<18;function ue(k){return{enumerable:!1,get(){return(this.state&k)!==0},set(R){R?this.state|=k:this.state&=~k}}}n(we.prototype,{objectMode:ue(te),ended:ue(de),endEmitted:ue(U),reading:ue(ke),constructed:ue(z),sync:ue(M),needReadable:ue(re),emittedReadable:ue(V),readableListening:ue(H),resumeScheduled:ue(q),errorEmitted:ue(he),emitClose:ue(oe),autoDestroy:ue(B),destroyed:ue(D),closed:ue(Z),closeEmitted:ue(se),multiAwaitDrain:ue(ie),readingMore:ue(fe),dataEmitted:ue(F)});function we(k,R,_e){typeof _e!="boolean"&&(_e=R instanceof Ot()),this.state=oe|B|z|M,k&&k.objectMode&&(this.state|=te),_e&&k&&k.readableObjectMode&&(this.state|=te),this.highWaterMark=k?j(this,k,"readableHighWaterMark",_e):Q(!1),this.buffer=new S,this.length=0,this.pipes=[],this.flowing=null,this[le]=null,k&&k.emitClose===!1&&(this.state&=-2049),k&&k.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=k&&k.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,k&&k.encoding&&(this.decoder=new Se(k.encoding),this.encoding=k.encoding)}function ne(k){if(!(this instanceof ne))return new ne(k);let R=this instanceof Ot();this._readableState=new we(k,this,R),k&&(typeof k.read=="function"&&(this._read=k.read),typeof k.destroy=="function"&&(this._destroy=k.destroy),typeof k.construct=="function"&&(this._construct=k.construct),k.signal&&!R&&v(k.signal,this)),_.call(this,k),C.construct(this,()=>{this._readableState.needReadable&&ve(this,this._readableState)})}ne.prototype.destroy=C.destroy,ne.prototype._undestroy=C.undestroy,ne.prototype._destroy=function(k,R){R(k)},ne.prototype[w.captureRejectionSymbol]=function(k){this.destroy(k)},ne.prototype[p]=function(){let k;return this.destroyed||(k=this.readableEnded?null:new be,this.destroy(k)),new u((R,_e)=>L(this,Ae=>Ae&&Ae!==k?_e(Ae):R(null)))},ne.prototype.push=function(k,R){return Oe(this,k,R,!1)},ne.prototype.unshift=function(k,R){return Oe(this,k,R,!0)};function Oe(k,R,_e,Ae){P("readableAddChunk",R);let xe=k._readableState,nt;if(!(xe.state&te)&&(typeof R=="string"?(_e=_e||xe.defaultEncoding,xe.encoding!==_e&&(Ae&&xe.encoding?R=y.from(R,_e).toString(xe.encoding):(R=y.from(R,_e),_e=""))):R instanceof y?_e="":_._isUint8Array(R)?(R=_._uint8ArrayToBuffer(R),_e=""):R!=null&&(nt=new ae("chunk",["string","Buffer","Uint8Array"],R))),nt)x(k,nt);else if(R===null)xe.state&=-9,I(k,xe);else if(xe.state&te||R&&R.length>0)if(Ae)if(xe.state&U)x(k,new W);else{if(xe.destroyed||xe.errored)return!1;h(k,xe,R,!0)}else if(xe.ended)x(k,new J);else{if(xe.destroyed||xe.errored)return!1;xe.state&=-9,xe.decoder&&!_e?(R=xe.decoder.write(R),xe.objectMode||R.length!==0?h(k,xe,R,!1):ve(k,xe)):h(k,xe,R,!1)}else Ae||(xe.state&=-9,ve(k,xe));return!xe.ended&&(xe.length<xe.highWaterMark||xe.length===0)}function h(k,R,_e,Ae){R.flowing&&R.length===0&&!R.sync&&k.listenerCount("data")>0?(R.state&ie?R.awaitDrainWriters.clear():R.awaitDrainWriters=null,R.dataEmitted=!0,k.emit("data",_e)):(R.length+=R.objectMode?1:_e.length,Ae?R.buffer.unshift(_e):R.buffer.push(_e),R.state&re&&N(k)),ve(k,R)}ne.prototype.isPaused=function(){let k=this._readableState;return k[le]===!0||k.flowing===!1},ne.prototype.setEncoding=function(k){let R=new Se(k);this._readableState.decoder=R,this._readableState.encoding=this._readableState.decoder.encoding;let _e=this._readableState.buffer,Ae="";for(let xe of _e)Ae+=R.write(xe);return _e.clear(),Ae!==""&&_e.push(Ae),this._readableState.length=Ae.length,this};var f=1073741824;function g(k){if(k>f)throw new K("size","<= 1GiB",k);return k--,k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,k|=k>>>16,k++,k}function E(k,R){return k<=0||R.length===0&&R.ended?0:R.state&te?1:i(k)?R.flowing&&R.length?R.buffer.first().length:R.length:k<=R.length?k:R.ended?R.length:0}ne.prototype.read=function(k){P("read",k),k===void 0?k=NaN:c(k)||(k=e(k,10));let R=this._readableState,_e=k;if(k>R.highWaterMark&&(R.highWaterMark=g(k)),k!==0&&(R.state&=-129),k===0&&R.needReadable&&((R.highWaterMark!==0?R.length>=R.highWaterMark:R.length>0)||R.ended))return P("read: emitReadable",R.length,R.ended),R.length===0&&R.ended?Fe(this):N(this),null;if(k=E(k,R),k===0&&R.ended)return R.length===0&&Fe(this),null;let Ae=(R.state&re)!==0;if(P("need readable",Ae),(R.length===0||R.length-k<R.highWaterMark)&&(Ae=!0,P("length less than watermark",Ae)),R.ended||R.reading||R.destroyed||R.errored||!R.constructed)Ae=!1,P("reading, ended or constructing",Ae);else if(Ae){P("do read"),R.state|=ke|M,R.length===0&&(R.state|=re);try{this._read(R.highWaterMark)}catch(nt){x(this,nt)}R.state&=-33,R.reading||(k=E(_e,R))}let xe;return k>0?xe=Pe(k,R):xe=null,xe===null?(R.needReadable=R.length<=R.highWaterMark,k=0):(R.length-=k,R.multiAwaitDrain?R.awaitDrainWriters.clear():R.awaitDrainWriters=null),R.length===0&&(R.ended||(R.needReadable=!0),_e!==k&&R.ended&&Fe(this)),xe!==null&&!R.errorEmitted&&!R.closeEmitted&&(R.dataEmitted=!0,this.emit("data",xe)),xe};function I(k,R){if(P("onEofChunk"),!R.ended){if(R.decoder){let _e=R.decoder.end();_e&&_e.length&&(R.buffer.push(_e),R.length+=R.objectMode?1:_e.length)}R.ended=!0,R.sync?N(k):(R.needReadable=!1,R.emittedReadable=!0,G(k))}}function N(k){let R=k._readableState;P("emitReadable",R.needReadable,R.emittedReadable),R.needReadable=!1,R.emittedReadable||(P("emitReadable",R.flowing),R.emittedReadable=!0,o.nextTick(G,k))}function G(k){let R=k._readableState;P("emitReadable_",R.destroyed,R.length,R.ended),!R.destroyed&&!R.errored&&(R.length||R.ended)&&(k.emit("readable"),R.emittedReadable=!1),R.needReadable=!R.flowing&&!R.ended&&R.length<=R.highWaterMark,ft(k)}function ve(k,R){!R.readingMore&&R.constructed&&(R.readingMore=!0,o.nextTick(Ee,k,R))}function Ee(k,R){for(;!R.reading&&!R.ended&&(R.length<R.highWaterMark||R.flowing&&R.length===0);){let _e=R.length;if(P("maybeReadMore read 0"),k.read(0),_e===R.length)break}R.readingMore=!1}ne.prototype._read=function(k){throw new O("_read()")},ne.prototype.pipe=function(k,R){let _e=this,Ae=this._readableState;Ae.pipes.length===1&&(Ae.multiAwaitDrain||(Ae.multiAwaitDrain=!0,Ae.awaitDrainWriters=new d(Ae.awaitDrainWriters?[Ae.awaitDrainWriters]:[]))),Ae.pipes.push(k),P("pipe count=%d opts=%j",Ae.pipes.length,R);let xe=(!R||R.end!==!1)&&k!==o.stdout&&k!==o.stderr?pt:fr;Ae.endEmitted?o.nextTick(xe):_e.once("end",xe),k.on("unpipe",nt);function nt(Yt,St){P("onunpipe"),Yt===_e&&St&&St.hasUnpiped===!1&&(St.hasUnpiped=!0,Aa())}function pt(){P("onend"),k.end()}let zt,Ji=!1;function Aa(){P("cleanup"),k.removeListener("close",Jr),k.removeListener("finish",Xr),zt&&k.removeListener("drain",zt),k.removeListener("error",Zr),k.removeListener("unpipe",nt),_e.removeListener("end",pt),_e.removeListener("end",fr),_e.removeListener("data",eo),Ji=!0,zt&&Ae.awaitDrainWriters&&(!k._writableState||k._writableState.needDrain)&&zt()}function Xi(){Ji||(Ae.pipes.length===1&&Ae.pipes[0]===k?(P("false write response, pause",0),Ae.awaitDrainWriters=k,Ae.multiAwaitDrain=!1):Ae.pipes.length>1&&Ae.pipes.includes(k)&&(P("false write response, pause",Ae.awaitDrainWriters.size),Ae.awaitDrainWriters.add(k)),_e.pause()),zt||(zt=Ie(_e,k),k.on("drain",zt))}_e.on("data",eo);function eo(Yt){P("ondata");let St=k.write(Yt);P("dest.write",St),St===!1&&Xi()}function Zr(Yt){if(P("onerror",Yt),fr(),k.removeListener("error",Zr),k.listenerCount("error")===0){let St=k._writableState||k._readableState;St&&!St.errorEmitted?x(k,Yt):k.emit("error",Yt)}}A(k,"error",Zr);function Jr(){k.removeListener("finish",Xr),fr()}k.once("close",Jr);function Xr(){P("onfinish"),k.removeListener("close",Jr),fr()}k.once("finish",Xr);function fr(){P("unpipe"),_e.unpipe(k)}return k.emit("pipe",_e),k.writableNeedDrain===!0?Xi():Ae.flowing||(P("pipe resume"),_e.resume()),k};function Ie(k,R){return function(){let _e=k._readableState;_e.awaitDrainWriters===R?(P("pipeOnDrain",1),_e.awaitDrainWriters=null):_e.multiAwaitDrain&&(P("pipeOnDrain",_e.awaitDrainWriters.size),_e.awaitDrainWriters.delete(R)),(!_e.awaitDrainWriters||_e.awaitDrainWriters.size===0)&&k.listenerCount("data")&&k.resume()}}ne.prototype.unpipe=function(k){let R=this._readableState,_e={hasUnpiped:!1};if(R.pipes.length===0)return this;if(!k){let xe=R.pipes;R.pipes=[],this.pause();for(let nt=0;nt<xe.length;nt++)xe[nt].emit("unpipe",this,{hasUnpiped:!1});return this}let Ae=l(R.pipes,k);return Ae===-1?this:(R.pipes.splice(Ae,1),R.pipes.length===0&&this.pause(),k.emit("unpipe",this,_e),this)},ne.prototype.on=function(k,R){let _e=_.prototype.on.call(this,k,R),Ae=this._readableState;return k==="data"?(Ae.readableListening=this.listenerCount("readable")>0,Ae.flowing!==!1&&this.resume()):k==="readable"&&!Ae.endEmitted&&!Ae.readableListening&&(Ae.readableListening=Ae.needReadable=!0,Ae.flowing=!1,Ae.emittedReadable=!1,P("on readable",Ae.length,Ae.reading),Ae.length?N(this):Ae.reading||o.nextTick(Re,this)),_e},ne.prototype.addListener=ne.prototype.on,ne.prototype.removeListener=function(k,R){let _e=_.prototype.removeListener.call(this,k,R);return k==="readable"&&o.nextTick(je,this),_e},ne.prototype.off=ne.prototype.removeListener,ne.prototype.removeAllListeners=function(k){let R=_.prototype.removeAllListeners.apply(this,arguments);return(k==="readable"||k===void 0)&&o.nextTick(je,this),R};function je(k){let R=k._readableState;R.readableListening=k.listenerCount("readable")>0,R.resumeScheduled&&R[le]===!1?R.flowing=!0:k.listenerCount("data")>0?k.resume():R.readableListening||(R.flowing=null)}function Re(k){P("readable nexttick read 0"),k.read(0)}ne.prototype.resume=function(){let k=this._readableState;return k.flowing||(P("resume"),k.flowing=!k.readableListening,yt(this,k)),k[le]=!1,this};function yt(k,R){R.resumeScheduled||(R.resumeScheduled=!0,o.nextTick(ut,k,R))}function ut(k,R){P("resume",R.reading),R.reading||k.read(0),R.resumeScheduled=!1,k.emit("resume"),ft(k),R.flowing&&!R.reading&&k.read(0)}ne.prototype.pause=function(){return P("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(P("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[le]=!0,this};function ft(k){let R=k._readableState;for(P("flow",R.flowing);R.flowing&&k.read()!==null;);}ne.prototype.wrap=function(k){let R=!1;k.on("data",Ae=>{!this.push(Ae)&&k.pause&&(R=!0,k.pause())}),k.on("end",()=>{this.push(null)}),k.on("error",Ae=>{x(this,Ae)}),k.on("close",()=>{this.destroy()}),k.on("destroy",()=>{this.destroy()}),this._read=()=>{R&&k.resume&&(R=!1,k.resume())};let _e=t(k);for(let Ae=1;Ae<_e.length;Ae++){let xe=_e[Ae];this[xe]===void 0&&typeof k[xe]=="function"&&(this[xe]=k[xe].bind(k))}return this},ne.prototype[m]=function(){return $e(this)},ne.prototype.iterator=function(k){return k!==void 0&&ce(k,"options"),$e(this,k)};function $e(k,R){typeof k.read!="function"&&(k=ne.wrap(k,{objectMode:!0}));let _e=Ze(k,R);return _e.stream=k,_e}async function*Ze(k,R){let _e=X;function Ae(pt){this===k?(_e(),_e=X):_e=pt}k.on("readable",Ae);let xe,nt=L(k,{writable:!1},pt=>{xe=pt?ee(xe,pt):null,_e(),_e=X});try{for(;;){let pt=k.destroyed?null:k.read();if(pt!==null)yield pt;else{if(xe)throw xe;if(xe===null)return;await new u(Ae)}}}catch(pt){throw xe=ee(xe,pt),xe}finally{(xe||(R==null?void 0:R.destroyOnReturn)!==!1)&&(xe===void 0||k._readableState.autoDestroy)?C.destroyer(k,null):(k.off("readable",Ae),nt())}}n(ne.prototype,{readable:{__proto__:null,get(){let k=this._readableState;return!!k&&k.readable!==!1&&!k.destroyed&&!k.errorEmitted&&!k.endEmitted},set(k){this._readableState&&(this._readableState.readable=!!k)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(k){this._readableState&&(this._readableState.flowing=k)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(k){this._readableState&&(this._readableState.destroyed=k)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),n(we.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[le]!==!1},set(k){this[le]=!!k}}}),ne._fromList=Pe;function Pe(k,R){if(R.length===0)return null;let _e;return R.objectMode?_e=R.buffer.shift():!k||k>=R.length?(R.decoder?_e=R.buffer.join(""):R.buffer.length===1?_e=R.buffer.first():_e=R.buffer.concat(R.length),R.buffer.clear()):_e=R.buffer.consume(k,R.decoder),_e}function Fe(k){let R=k._readableState;P("endReadable",R.endEmitted),R.endEmitted||(R.ended=!0,o.nextTick(rt,R,k))}function rt(k,R){if(P("endReadableNT",k.endEmitted,k.length),!k.errored&&!k.closeEmitted&&!k.endEmitted&&k.length===0){if(k.endEmitted=!0,R.emit("end"),R.writable&&R.allowHalfOpen===!1)o.nextTick(Qe,R);else if(k.autoDestroy){let _e=R._writableState;(!_e||_e.autoDestroy&&(_e.finished||_e.writable===!1))&&R.destroy()}}}function Qe(k){k.writable&&!k.writableEnded&&!k.destroyed&&k.end()}ne.from=function(k,R){return Y(ne,k,R)};var ot;function Lt(){return ot===void 0&&(ot={}),ot}ne.fromWeb=function(k,R){return Lt().newStreamReadableFromReadableStream(k,R)},ne.toWeb=function(k,R){return Lt().newReadableStreamFromStreamReadable(k,R)},ne.wrap=function(k,R){var _e,Ae;return new ne({objectMode:(_e=(Ae=k.readableObjectMode)!==null&&Ae!==void 0?Ae:k.objectMode)!==null&&_e!==void 0?_e:!0,...R,destroy(xe,nt){C.destroyer(k,xe),nt(xe)}}).wrap(k)}}),Yi=ye((r,a)=>{pe(),me(),ge();var o=or(),{ArrayPrototypeSlice:l,Error:c,FunctionPrototypeSymbolHasInstance:i,ObjectDefineProperty:e,ObjectDefineProperties:n,ObjectSetPrototypeOf:t,StringPrototypeToLowerCase:s,Symbol:u,SymbolHasInstance:d}=Ye();a.exports=ce,ce.WritableState=W;var{EventEmitter:p}=(ir(),De(Ht)),m=zi().Stream,{Buffer:b}=(et(),De(Xe)),w=hr(),{addAbortSignal:_}=zr(),{getHighWaterMark:A,getDefaultHighWaterMark:y}=Yr(),{ERR_INVALID_ARG_TYPE:v,ERR_METHOD_NOT_IMPLEMENTED:L,ERR_MULTIPLE_CALLBACK:P,ERR_STREAM_CANNOT_PIPE:S,ERR_STREAM_DESTROYED:C,ERR_STREAM_ALREADY_FINISHED:j,ERR_STREAM_NULL_VALUES:Q,ERR_STREAM_WRITE_AFTER_END:ee,ERR_UNKNOWN_ENCODING:ae}=lt().codes,{errorOrDestroy:O}=w;t(ce.prototype,m.prototype),t(ce,m);function K(){}var J=u("kOnFinished");function W(B,D,Z){typeof Z!="boolean"&&(Z=D instanceof Ot()),this.objectMode=!!(B&&B.objectMode),Z&&(this.objectMode=this.objectMode||!!(B&&B.writableObjectMode)),this.highWaterMark=B?A(this,B,"writableHighWaterMark",Z):y(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let se=!!(B&&B.decodeStrings===!1);this.decodeStrings=!se,this.defaultEncoding=B&&B.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=x.bind(void 0,D),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,be(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!B||B.emitClose!==!1,this.autoDestroy=!B||B.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[J]=[]}function be(B){B.buffered=[],B.bufferedIndex=0,B.allBuffers=!0,B.allNoop=!0}W.prototype.getBuffer=function(){return l(this.buffered,this.bufferedIndex)},e(W.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ce(B){let D=this instanceof Ot();if(!D&&!i(ce,this))return new ce(B);this._writableState=new W(B,this,D),B&&(typeof B.write=="function"&&(this._write=B.write),typeof B.writev=="function"&&(this._writev=B.writev),typeof B.destroy=="function"&&(this._destroy=B.destroy),typeof B.final=="function"&&(this._final=B.final),typeof B.construct=="function"&&(this._construct=B.construct),B.signal&&_(B.signal,this)),m.call(this,B),w.construct(this,()=>{let Z=this._writableState;Z.writing||ke(this,Z),V(this,Z)})}e(ce,d,{__proto__:null,value:function(B){return i(this,B)?!0:this!==ce?!1:B&&B._writableState instanceof W}}),ce.prototype.pipe=function(){O(this,new S)};function le(B,D,Z,se){let ie=B._writableState;if(typeof Z=="function")se=Z,Z=ie.defaultEncoding;else{if(!Z)Z=ie.defaultEncoding;else if(Z!=="buffer"&&!b.isEncoding(Z))throw new ae(Z);typeof se!="function"&&(se=K)}if(D===null)throw new Q;if(!ie.objectMode)if(typeof D=="string")ie.decodeStrings!==!1&&(D=b.from(D,Z),Z="buffer");else if(D instanceof b)Z="buffer";else if(m._isUint8Array(D))D=m._uint8ArrayToBuffer(D),Z="buffer";else throw new v("chunk",["string","Buffer","Uint8Array"],D);let fe;return ie.ending?fe=new ee:ie.destroyed&&(fe=new C("write")),fe?(o.nextTick(se,fe),O(B,fe,!0),fe):(ie.pendingcb++,Se(B,ie,D,Z,se))}ce.prototype.write=function(B,D,Z){return le(this,B,D,Z)===!0},ce.prototype.cork=function(){this._writableState.corked++},ce.prototype.uncork=function(){let B=this._writableState;B.corked&&(B.corked--,B.writing||ke(this,B))},ce.prototype.setDefaultEncoding=function(B){if(typeof B=="string"&&(B=s(B)),!b.isEncoding(B))throw new ae(B);return this._writableState.defaultEncoding=B,this};function Se(B,D,Z,se,ie){let fe=D.objectMode?1:Z.length;D.length+=fe;let F=D.length<D.highWaterMark;return F||(D.needDrain=!0),D.writing||D.corked||D.errored||!D.constructed?(D.buffered.push({chunk:Z,encoding:se,callback:ie}),D.allBuffers&&se!=="buffer"&&(D.allBuffers=!1),D.allNoop&&ie!==K&&(D.allNoop=!1)):(D.writelen=fe,D.writecb=ie,D.writing=!0,D.sync=!0,B._write(Z,se,D.onwrite),D.sync=!1),F&&!D.errored&&!D.destroyed}function Y(B,D,Z,se,ie,fe,F){D.writelen=se,D.writecb=F,D.writing=!0,D.sync=!0,D.destroyed?D.onwrite(new C("write")):Z?B._writev(ie,D.onwrite):B._write(ie,fe,D.onwrite),D.sync=!1}function X(B,D,Z,se){--D.pendingcb,se(Z),U(D),O(B,Z)}function x(B,D){let Z=B._writableState,se=Z.sync,ie=Z.writecb;if(typeof ie!="function"){O(B,new P);return}Z.writing=!1,Z.writecb=null,Z.length-=Z.writelen,Z.writelen=0,D?(D.stack,Z.errored||(Z.errored=D),B._readableState&&!B._readableState.errored&&(B._readableState.errored=D),se?o.nextTick(X,B,Z,D,ie):X(B,Z,D,ie)):(Z.buffered.length>Z.bufferedIndex&&ke(B,Z),se?Z.afterWriteTickInfo!==null&&Z.afterWriteTickInfo.cb===ie?Z.afterWriteTickInfo.count++:(Z.afterWriteTickInfo={count:1,cb:ie,stream:B,state:Z},o.nextTick(te,Z.afterWriteTickInfo)):de(B,Z,1,ie))}function te({stream:B,state:D,count:Z,cb:se}){return D.afterWriteTickInfo=null,de(B,D,Z,se)}function de(B,D,Z,se){for(!D.ending&&!B.destroyed&&D.length===0&&D.needDrain&&(D.needDrain=!1,B.emit("drain"));Z-- >0;)D.pendingcb--,se();D.destroyed&&U(D),V(B,D)}function U(B){if(B.writing)return;for(let ie=B.bufferedIndex;ie<B.buffered.length;++ie){var D;let{chunk:fe,callback:F}=B.buffered[ie],ue=B.objectMode?1:fe.length;B.length-=ue,F((D=B.errored)!==null&&D!==void 0?D:new C("write"))}let Z=B[J].splice(0);for(let ie=0;ie<Z.length;ie++){var se;Z[ie]((se=B.errored)!==null&&se!==void 0?se:new C("end"))}be(B)}function ke(B,D){if(D.corked||D.bufferProcessing||D.destroyed||!D.constructed)return;let{buffered:Z,bufferedIndex:se,objectMode:ie}=D,fe=Z.length-se;if(!fe)return;let F=se;if(D.bufferProcessing=!0,fe>1&&B._writev){D.pendingcb-=fe-1;let ue=D.allNoop?K:ne=>{for(let Oe=F;Oe<Z.length;++Oe)Z[Oe].callback(ne)},we=D.allNoop&&F===0?Z:l(Z,F);we.allBuffers=D.allBuffers,Y(B,D,!0,D.length,we,"",ue),be(D)}else{do{let{chunk:ue,encoding:we,callback:ne}=Z[F];Z[F++]=null;let Oe=ie?1:ue.length;Y(B,D,!1,Oe,ue,we,ne)}while(F<Z.length&&!D.writing);F===Z.length?be(D):F>256?(Z.splice(0,F),D.bufferedIndex=0):D.bufferedIndex=F}D.bufferProcessing=!1}ce.prototype._write=function(B,D,Z){if(this._writev)this._writev([{chunk:B,encoding:D}],Z);else throw new L("_write()")},ce.prototype._writev=null,ce.prototype.end=function(B,D,Z){let se=this._writableState;typeof B=="function"?(Z=B,B=null,D=null):typeof D=="function"&&(Z=D,D=null);let ie;if(B!=null){let fe=le(this,B,D);fe instanceof c&&(ie=fe)}return se.corked&&(se.corked=1,this.uncork()),ie||(!se.errored&&!se.ending?(se.ending=!0,V(this,se,!0),se.ended=!0):se.finished?ie=new j("end"):se.destroyed&&(ie=new C("end"))),typeof Z=="function"&&(ie||se.finished?o.nextTick(Z,ie):se[J].push(Z)),this};function z(B){return B.ending&&!B.destroyed&&B.constructed&&B.length===0&&!B.errored&&B.buffered.length===0&&!B.finished&&!B.writing&&!B.errorEmitted&&!B.closeEmitted}function M(B,D){let Z=!1;function se(ie){if(Z){O(B,ie??P());return}if(Z=!0,D.pendingcb--,ie){let fe=D[J].splice(0);for(let F=0;F<fe.length;F++)fe[F](ie);O(B,ie,D.sync)}else z(D)&&(D.prefinished=!0,B.emit("prefinish"),D.pendingcb++,o.nextTick(H,B,D))}D.sync=!0,D.pendingcb++;try{B._final(se)}catch(ie){se(ie)}D.sync=!1}function re(B,D){!D.prefinished&&!D.finalCalled&&(typeof B._final=="function"&&!D.destroyed?(D.finalCalled=!0,M(B,D)):(D.prefinished=!0,B.emit("prefinish")))}function V(B,D,Z){z(D)&&(re(B,D),D.pendingcb===0&&(Z?(D.pendingcb++,o.nextTick((se,ie)=>{z(ie)?H(se,ie):ie.pendingcb--},B,D)):z(D)&&(D.pendingcb++,H(B,D))))}function H(B,D){D.pendingcb--,D.finished=!0;let Z=D[J].splice(0);for(let se=0;se<Z.length;se++)Z[se]();if(B.emit("finish"),D.autoDestroy){let se=B._readableState;(!se||se.autoDestroy&&(se.endEmitted||se.readable===!1))&&B.destroy()}}n(ce.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(B){this._writableState&&(this._writableState.destroyed=B)}},writable:{__proto__:null,get(){let B=this._writableState;return!!B&&B.writable!==!1&&!B.destroyed&&!B.errored&&!B.ending&&!B.ended},set(B){this._writableState&&(this._writableState.writable=!!B)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let B=this._writableState;return B?!B.destroyed&&!B.ending&&B.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var q=w.destroy;ce.prototype.destroy=function(B,D){let Z=this._writableState;return!Z.destroyed&&(Z.bufferedIndex<Z.buffered.length||Z[J].length)&&o.nextTick(U,Z),q.call(this,B,D),this},ce.prototype._undestroy=w.undestroy,ce.prototype._destroy=function(B,D){D(B)},ce.prototype[p.captureRejectionSymbol]=function(B){this.destroy(B)};var he;function oe(){return he===void 0&&(he={}),he}ce.fromWeb=function(B,D){return oe().newStreamWritableFromWritableStream(B,D)},ce.toWeb=function(B){return oe().newWritableStreamFromStreamWritable(B)}}),wu=ye((r,a)=>{pe(),me(),ge();var o=or(),l=(et(),De(Xe)),{isReadable:c,isWritable:i,isIterable:e,isNodeStream:n,isReadableNodeStream:t,isWritableNodeStream:s,isDuplexNodeStream:u,isReadableStream:d,isWritableStream:p}=jt(),m=qt(),{AbortError:b,codes:{ERR_INVALID_ARG_TYPE:w,ERR_INVALID_RETURN_VALUE:_}}=lt(),{destroyer:A}=hr(),y=Ot(),v=Gr(),L=Yi(),{createDeferredPromise:P}=ct(),S=ps(),C=globalThis.Blob||l.Blob,j=typeof C<"u"?function(J){return J instanceof C}:function(J){return!1},Q=globalThis.AbortController||_r().AbortController,{FunctionPrototypeCall:ee}=Ye(),ae=class extends y{constructor(J){super(J),(J==null?void 0:J.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(J==null?void 0:J.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};a.exports=function J(W,be){if(u(W))return W;if(t(W))return K({readable:W});if(s(W))return K({writable:W});if(n(W))return K({writable:!1,readable:!1});if(d(W))return K({readable:v.fromWeb(W)});if(p(W))return K({writable:L.fromWeb(W)});if(typeof W=="function"){let{value:le,write:Se,final:Y,destroy:X}=O(W);if(e(le))return S(ae,le,{objectMode:!0,write:Se,final:Y,destroy:X});let x=le==null?void 0:le.then;if(typeof x=="function"){let te,de=ee(x,le,U=>{if(U!=null)throw new _("nully","body",U)},U=>{A(te,U)});return te=new ae({objectMode:!0,readable:!1,write:Se,final(U){Y(async()=>{try{await de,o.nextTick(U,null)}catch(ke){o.nextTick(U,ke)}})},destroy:X})}throw new _("Iterable, AsyncIterable or AsyncFunction",be,le)}if(j(W))return J(W.arrayBuffer());if(e(W))return S(ae,W,{objectMode:!0,writable:!1});if(d(W==null?void 0:W.readable)&&p(W==null?void 0:W.writable))return ae.fromWeb(W);if(typeof(W==null?void 0:W.writable)=="object"||typeof(W==null?void 0:W.readable)=="object"){let le=W!=null&&W.readable?t(W==null?void 0:W.readable)?W==null?void 0:W.readable:J(W.readable):void 0,Se=W!=null&&W.writable?s(W==null?void 0:W.writable)?W==null?void 0:W.writable:J(W.writable):void 0;return K({readable:le,writable:Se})}let ce=W==null?void 0:W.then;if(typeof ce=="function"){let le;return ee(ce,W,Se=>{Se!=null&&le.push(Se),le.push(null)},Se=>{A(le,Se)}),le=new ae({objectMode:!0,writable:!1,read(){}})}throw new w(be,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],W)};function O(J){let{promise:W,resolve:be}=P(),ce=new Q,le=ce.signal;return{value:J(async function*(){for(;;){let Se=W;W=null;let{chunk:Y,done:X,cb:x}=await Se;if(o.nextTick(x),X)return;if(le.aborted)throw new b(void 0,{cause:le.reason});({promise:W,resolve:be}=P()),yield Y}}(),{signal:le}),write(Se,Y,X){let x=be;be=null,x({chunk:Se,done:!1,cb:X})},final(Se){let Y=be;be=null,Y({done:!0,cb:Se})},destroy(Se,Y){ce.abort(),Y(Se)}}}function K(J){let W=J.readable&&typeof J.readable.read!="function"?v.wrap(J.readable):J.readable,be=J.writable,ce=!!c(W),le=!!i(be),Se,Y,X,x,te;function de(U){let ke=x;x=null,ke?ke(U):U&&te.destroy(U)}return te=new ae({readableObjectMode:!!(W!=null&&W.readableObjectMode),writableObjectMode:!!(be!=null&&be.writableObjectMode),readable:ce,writable:le}),le&&(m(be,U=>{le=!1,U&&A(W,U),de(U)}),te._write=function(U,ke,z){be.write(U,ke)?z():Se=z},te._final=function(U){be.end(),Y=U},be.on("drain",function(){if(Se){let U=Se;Se=null,U()}}),be.on("finish",function(){if(Y){let U=Y;Y=null,U()}})),ce&&(m(W,U=>{ce=!1,U&&A(W,U),de(U)}),W.on("readable",function(){if(X){let U=X;X=null,U()}}),W.on("end",function(){te.push(null)}),te._read=function(){for(;;){let U=W.read();if(U===null){X=te._read;return}if(!te.push(U))return}}),te._destroy=function(U,ke){!U&&x!==null&&(U=new b),X=null,Se=null,Y=null,x===null?ke(U):(x=ke,A(be,U),A(W,U))},te}}),Ot=ye((r,a)=>{pe(),me(),ge();var{ObjectDefineProperties:o,ObjectGetOwnPropertyDescriptor:l,ObjectKeys:c,ObjectSetPrototypeOf:i}=Ye();a.exports=t;var e=Gr(),n=Yi();i(t.prototype,e.prototype),i(t,e);{let p=c(n.prototype);for(let m=0;m<p.length;m++){let b=p[m];t.prototype[b]||(t.prototype[b]=n.prototype[b])}}function t(p){if(!(this instanceof t))return new t(p);e.call(this,p),n.call(this,p),p?(this.allowHalfOpen=p.allowHalfOpen!==!1,p.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),p.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}o(t.prototype,{writable:{__proto__:null,...l(n.prototype,"writable")},writableHighWaterMark:{__proto__:null,...l(n.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...l(n.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...l(n.prototype,"writableBuffer")},writableLength:{__proto__:null,...l(n.prototype,"writableLength")},writableFinished:{__proto__:null,...l(n.prototype,"writableFinished")},writableCorked:{__proto__:null,...l(n.prototype,"writableCorked")},writableEnded:{__proto__:null,...l(n.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...l(n.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(p){this._readableState&&this._writableState&&(this._readableState.destroyed=p,this._writableState.destroyed=p)}}});var s;function u(){return s===void 0&&(s={}),s}t.fromWeb=function(p,m){return u().newStreamDuplexFromReadableWritablePair(p,m)},t.toWeb=function(p){return u().newReadableWritablePairFromDuplex(p)};var d;t.from=function(p){return d||(d=wu()),d(p,"body")}}),gs=ye((r,a)=>{pe(),me(),ge();var{ObjectSetPrototypeOf:o,Symbol:l}=Ye();a.exports=t;var{ERR_METHOD_NOT_IMPLEMENTED:c}=lt().codes,i=Ot(),{getHighWaterMark:e}=Yr();o(t.prototype,i.prototype),o(t,i);var n=l("kCallback");function t(d){if(!(this instanceof t))return new t(d);let p=d?e(this,d,"readableHighWaterMark",!0):null;p===0&&(d={...d,highWaterMark:null,readableHighWaterMark:p,writableHighWaterMark:d.writableHighWaterMark||0}),i.call(this,d),this._readableState.sync=!1,this[n]=null,d&&(typeof d.transform=="function"&&(this._transform=d.transform),typeof d.flush=="function"&&(this._flush=d.flush)),this.on("prefinish",u)}function s(d){typeof this._flush=="function"&&!this.destroyed?this._flush((p,m)=>{if(p){d?d(p):this.destroy(p);return}m!=null&&this.push(m),this.push(null),d&&d()}):(this.push(null),d&&d())}function u(){this._final!==s&&s.call(this)}t.prototype._final=s,t.prototype._transform=function(d,p,m){throw new c("_transform()")},t.prototype._write=function(d,p,m){let b=this._readableState,w=this._writableState,_=b.length;this._transform(d,p,(A,y)=>{if(A){m(A);return}y!=null&&this.push(y),w.ended||_===b.length||b.length<b.highWaterMark?m():this[n]=m})},t.prototype._read=function(){if(this[n]){let d=this[n];this[n]=null,d()}}}),ms=ye((r,a)=>{pe(),me(),ge();var{ObjectSetPrototypeOf:o}=Ye();a.exports=c;var l=gs();o(c.prototype,l.prototype),o(c,l);function c(i){if(!(this instanceof c))return new c(i);l.call(this,i)}c.prototype._transform=function(i,e,n){n(null,i)}}),Gi=ye((r,a)=>{pe(),me(),ge();var o=or(),{ArrayIsArray:l,Promise:c,SymbolAsyncIterator:i,SymbolDispose:e}=Ye(),n=qt(),{once:t}=ct(),s=hr(),u=Ot(),{aggregateTwoErrors:d,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:m,ERR_MISSING_ARGS:b,ERR_STREAM_DESTROYED:w,ERR_STREAM_PREMATURE_CLOSE:_},AbortError:A}=lt(),{validateFunction:y,validateAbortSignal:v}=Er(),{isIterable:L,isReadable:P,isReadableNodeStream:S,isNodeStream:C,isTransformStream:j,isWebStream:Q,isReadableStream:ee,isReadableFinished:ae}=jt(),O=globalThis.AbortController||_r().AbortController,K,J,W;function be(U,ke,z){let M=!1;U.on("close",()=>{M=!0});let re=n(U,{readable:ke,writable:z},V=>{M=!V});return{destroy:V=>{M||(M=!0,s.destroyer(U,V||new w("pipe")))},cleanup:re}}function ce(U){return y(U[U.length-1],"streams[stream.length - 1]"),U.pop()}function le(U){if(L(U))return U;if(S(U))return Se(U);throw new p("val",["Readable","Iterable","AsyncIterable"],U)}async function*Se(U){J||(J=Gr()),yield*J.prototype[i].call(U)}async function Y(U,ke,z,{end:M}){let re,V=null,H=oe=>{if(oe&&(re=oe),V){let B=V;V=null,B()}},q=()=>new c((oe,B)=>{re?B(re):V=()=>{re?B(re):oe()}});ke.on("drain",H);let he=n(ke,{readable:!1},H);try{ke.writableNeedDrain&&await q();for await(let oe of U)ke.write(oe)||await q();M&&(ke.end(),await q()),z()}catch(oe){z(re!==oe?d(re,oe):oe)}finally{he(),ke.off("drain",H)}}async function X(U,ke,z,{end:M}){j(ke)&&(ke=ke.writable);let re=ke.getWriter();try{for await(let V of U)await re.ready,re.write(V).catch(()=>{});await re.ready,M&&await re.close(),z()}catch(V){try{await re.abort(V),z(V)}catch(H){z(H)}}}function x(...U){return te(U,t(ce(U)))}function te(U,ke,z){if(U.length===1&&l(U[0])&&(U=U[0]),U.length<2)throw new b("streams");let M=new O,re=M.signal,V=z==null?void 0:z.signal,H=[];v(V,"options.signal");function q(){ie(new A)}W=W||ct().addAbortListener;let he;V&&(he=W(V,q));let oe,B,D=[],Z=0;function se(we){ie(we,--Z===0)}function ie(we,ne){var Oe;if(we&&(!oe||oe.code==="ERR_STREAM_PREMATURE_CLOSE")&&(oe=we),!(!oe&&!ne)){for(;D.length;)D.shift()(oe);(Oe=he)===null||Oe===void 0||Oe[e](),M.abort(),ne&&(oe||H.forEach(h=>h()),o.nextTick(ke,oe,B))}}let fe;for(let we=0;we<U.length;we++){let ne=U[we],Oe=we<U.length-1,h=we>0,f=Oe||(z==null?void 0:z.end)!==!1,g=we===U.length-1;if(C(ne)){let E=function(I){I&&I.name!=="AbortError"&&I.code!=="ERR_STREAM_PREMATURE_CLOSE"&&se(I)};if(f){let{destroy:I,cleanup:N}=be(ne,Oe,h);D.push(I),P(ne)&&g&&H.push(N)}ne.on("error",E),P(ne)&&g&&H.push(()=>{ne.removeListener("error",E)})}if(we===0)if(typeof ne=="function"){if(fe=ne({signal:re}),!L(fe))throw new m("Iterable, AsyncIterable or Stream","source",fe)}else L(ne)||S(ne)||j(ne)?fe=ne:fe=u.from(ne);else if(typeof ne=="function"){if(j(fe)){var F;fe=le((F=fe)===null||F===void 0?void 0:F.readable)}else fe=le(fe);if(fe=ne(fe,{signal:re}),Oe){if(!L(fe,!0))throw new m("AsyncIterable",`transform[${we-1}]`,fe)}else{var ue;K||(K=ms());let E=new K({objectMode:!0}),I=(ue=fe)===null||ue===void 0?void 0:ue.then;if(typeof I=="function")Z++,I.call(fe,ve=>{B=ve,ve!=null&&E.write(ve),f&&E.end(),o.nextTick(se)},ve=>{E.destroy(ve),o.nextTick(se,ve)});else if(L(fe,!0))Z++,Y(fe,E,se,{end:f});else if(ee(fe)||j(fe)){let ve=fe.readable||fe;Z++,Y(ve,E,se,{end:f})}else throw new m("AsyncIterable or Promise","destination",fe);fe=E;let{destroy:N,cleanup:G}=be(fe,!1,!0);D.push(N),g&&H.push(G)}}else if(C(ne)){if(S(fe)){Z+=2;let E=de(fe,ne,se,{end:f});P(ne)&&g&&H.push(E)}else if(j(fe)||ee(fe)){let E=fe.readable||fe;Z++,Y(E,ne,se,{end:f})}else if(L(fe))Z++,Y(fe,ne,se,{end:f});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],fe);fe=ne}else if(Q(ne)){if(S(fe))Z++,X(le(fe),ne,se,{end:f});else if(ee(fe)||L(fe))Z++,X(fe,ne,se,{end:f});else if(j(fe))Z++,X(fe.readable,ne,se,{end:f});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],fe);fe=ne}else fe=u.from(ne)}return(re!=null&&re.aborted||V!=null&&V.aborted)&&o.nextTick(q),fe}function de(U,ke,z,{end:M}){let re=!1;if(ke.on("close",()=>{re||z(new _)}),U.pipe(ke,{end:!1}),M){let V=function(){re=!0,ke.end()};ae(U)?o.nextTick(V):U.once("end",V)}else z();return n(U,{readable:!0,writable:!1},V=>{let H=U._readableState;V&&V.code==="ERR_STREAM_PREMATURE_CLOSE"&&H&&H.ended&&!H.errored&&!H.errorEmitted?U.once("end",z).once("error",z):z(V)}),n(ke,{readable:!1,writable:!0},z)}a.exports={pipelineImpl:te,pipeline:x}}),bs=ye((r,a)=>{pe(),me(),ge();var{pipeline:o}=Gi(),l=Ot(),{destroyer:c}=hr(),{isNodeStream:i,isReadable:e,isWritable:n,isWebStream:t,isTransformStream:s,isWritableStream:u,isReadableStream:d}=jt(),{AbortError:p,codes:{ERR_INVALID_ARG_VALUE:m,ERR_MISSING_ARGS:b}}=lt(),w=qt();a.exports=function(..._){if(_.length===0)throw new b("streams");if(_.length===1)return l.from(_[0]);let A=[..._];if(typeof _[0]=="function"&&(_[0]=l.from(_[0])),typeof _[_.length-1]=="function"){let O=_.length-1;_[O]=l.from(_[O])}for(let O=0;O<_.length;++O)if(!(!i(_[O])&&!t(_[O]))){if(O<_.length-1&&!(e(_[O])||d(_[O])||s(_[O])))throw new m(`streams[${O}]`,A[O],"must be readable");if(O>0&&!(n(_[O])||u(_[O])||s(_[O])))throw new m(`streams[${O}]`,A[O],"must be writable")}let y,v,L,P,S;function C(O){let K=P;P=null,K?K(O):O?S.destroy(O):!ae&&!ee&&S.destroy()}let j=_[0],Q=o(_,C),ee=!!(n(j)||u(j)||s(j)),ae=!!(e(Q)||d(Q)||s(Q));if(S=new l({writableObjectMode:!!(j!=null&&j.writableObjectMode),readableObjectMode:!!(Q!=null&&Q.readableObjectMode),writable:ee,readable:ae}),ee){if(i(j))S._write=function(K,J,W){j.write(K,J)?W():y=W},S._final=function(K){j.end(),v=K},j.on("drain",function(){if(y){let K=y;y=null,K()}});else if(t(j)){let K=(s(j)?j.writable:j).getWriter();S._write=async function(J,W,be){try{await K.ready,K.write(J).catch(()=>{}),be()}catch(ce){be(ce)}},S._final=async function(J){try{await K.ready,K.close().catch(()=>{}),v=J}catch(W){J(W)}}}let O=s(Q)?Q.readable:Q;w(O,()=>{if(v){let K=v;v=null,K()}})}if(ae){if(i(Q))Q.on("readable",function(){if(L){let O=L;L=null,O()}}),Q.on("end",function(){S.push(null)}),S._read=function(){for(;;){let O=Q.read();if(O===null){L=S._read;return}if(!S.push(O))return}};else if(t(Q)){let O=(s(Q)?Q.readable:Q).getReader();S._read=async function(){for(;;)try{let{value:K,done:J}=await O.read();if(!S.push(K))return;if(J){S.push(null);return}}catch{return}}}}return S._destroy=function(O,K){!O&&P!==null&&(O=new p),L=null,y=null,v=null,P===null?K(O):(P=K,i(Q)&&c(Q,O))},S}}),_u=ye((r,a)=>{pe(),me(),ge();var o=globalThis.AbortController||_r().AbortController,{codes:{ERR_INVALID_ARG_VALUE:l,ERR_INVALID_ARG_TYPE:c,ERR_MISSING_ARGS:i,ERR_OUT_OF_RANGE:e},AbortError:n}=lt(),{validateAbortSignal:t,validateInteger:s,validateObject:u}=Er(),d=Ye().Symbol("kWeak"),p=Ye().Symbol("kResistStopPropagation"),{finished:m}=qt(),b=bs(),{addAbortSignalNoValidate:w}=zr(),{isWritable:_,isNodeStream:A}=jt(),{deprecate:y}=ct(),{ArrayPrototypePush:v,Boolean:L,MathFloor:P,Number:S,NumberIsNaN:C,Promise:j,PromiseReject:Q,PromiseResolve:ee,PromisePrototypeThen:ae,Symbol:O}=Ye(),K=O("kEmpty"),J=O("kEof");function W(V,H){if(H!=null&&u(H,"options"),(H==null?void 0:H.signal)!=null&&t(H.signal,"options.signal"),A(V)&&!_(V))throw new l("stream",V,"must be writable");let q=b(this,V);return H!=null&&H.signal&&w(H.signal,q),q}function be(V,H){if(typeof V!="function")throw new c("fn",["Function","AsyncFunction"],V);H!=null&&u(H,"options"),(H==null?void 0:H.signal)!=null&&t(H.signal,"options.signal");let q=1;(H==null?void 0:H.concurrency)!=null&&(q=P(H.concurrency));let he=q-1;return(H==null?void 0:H.highWaterMark)!=null&&(he=P(H.highWaterMark)),s(q,"options.concurrency",1),s(he,"options.highWaterMark",0),he+=q,(async function*(){let oe=ct().AbortSignalAny([H==null?void 0:H.signal].filter(L)),B=this,D=[],Z={signal:oe},se,ie,fe=!1,F=0;function ue(){fe=!0,we()}function we(){F-=1,ne()}function ne(){ie&&!fe&&F<q&&D.length<he&&(ie(),ie=null)}async function Oe(){try{for await(let h of B){if(fe)return;if(oe.aborted)throw new n;try{if(h=V(h,Z),h===K)continue;h=ee(h)}catch(f){h=Q(f)}F+=1,ae(h,we,ue),D.push(h),se&&(se(),se=null),!fe&&(D.length>=he||F>=q)&&await new j(f=>{ie=f})}D.push(J)}catch(h){let f=Q(h);ae(f,we,ue),D.push(f)}finally{fe=!0,se&&(se(),se=null)}}Oe();try{for(;;){for(;D.length>0;){let h=await D[0];if(h===J)return;if(oe.aborted)throw new n;h!==K&&(yield h),D.shift(),ne()}await new j(h=>{se=h})}}finally{fe=!0,ie&&(ie(),ie=null)}}).call(this)}function ce(V=void 0){return V!=null&&u(V,"options"),(V==null?void 0:V.signal)!=null&&t(V.signal,"options.signal"),(async function*(){let H=0;for await(let he of this){var q;if(V!=null&&(q=V.signal)!==null&&q!==void 0&&q.aborted)throw new n({cause:V.signal.reason});yield[H++,he]}}).call(this)}async function le(V,H=void 0){for await(let q of x.call(this,V,H))return!0;return!1}async function Se(V,H=void 0){if(typeof V!="function")throw new c("fn",["Function","AsyncFunction"],V);return!await le.call(this,async(...q)=>!await V(...q),H)}async function Y(V,H){for await(let q of x.call(this,V,H))return q}async function X(V,H){if(typeof V!="function")throw new c("fn",["Function","AsyncFunction"],V);async function q(he,oe){return await V(he,oe),K}for await(let he of be.call(this,q,H));}function x(V,H){if(typeof V!="function")throw new c("fn",["Function","AsyncFunction"],V);async function q(he,oe){return await V(he,oe)?he:K}return be.call(this,q,H)}var te=class extends i{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function de(V,H,q){var he;if(typeof V!="function")throw new c("reducer",["Function","AsyncFunction"],V);q!=null&&u(q,"options"),(q==null?void 0:q.signal)!=null&&t(q.signal,"options.signal");let oe=arguments.length>1;if(q!=null&&(he=q.signal)!==null&&he!==void 0&&he.aborted){let ie=new n(void 0,{cause:q.signal.reason});throw this.once("error",()=>{}),await m(this.destroy(ie)),ie}let B=new o,D=B.signal;if(q!=null&&q.signal){let ie={once:!0,[d]:this,[p]:!0};q.signal.addEventListener("abort",()=>B.abort(),ie)}let Z=!1;try{for await(let ie of this){var se;if(Z=!0,q!=null&&(se=q.signal)!==null&&se!==void 0&&se.aborted)throw new n;oe?H=await V(H,ie,{signal:D}):(H=ie,oe=!0)}if(!Z&&!oe)throw new te}finally{B.abort()}return H}async function U(V){V!=null&&u(V,"options"),(V==null?void 0:V.signal)!=null&&t(V.signal,"options.signal");let H=[];for await(let he of this){var q;if(V!=null&&(q=V.signal)!==null&&q!==void 0&&q.aborted)throw new n(void 0,{cause:V.signal.reason});v(H,he)}return H}function ke(V,H){let q=be.call(this,V,H);return(async function*(){for await(let he of q)yield*he}).call(this)}function z(V){if(V=S(V),C(V))return 0;if(V<0)throw new e("number",">= 0",V);return V}function M(V,H=void 0){return H!=null&&u(H,"options"),(H==null?void 0:H.signal)!=null&&t(H.signal,"options.signal"),V=z(V),(async function*(){var q;if(H!=null&&(q=H.signal)!==null&&q!==void 0&&q.aborted)throw new n;for await(let oe of this){var he;if(H!=null&&(he=H.signal)!==null&&he!==void 0&&he.aborted)throw new n;V--<=0&&(yield oe)}}).call(this)}function re(V,H=void 0){return H!=null&&u(H,"options"),(H==null?void 0:H.signal)!=null&&t(H.signal,"options.signal"),V=z(V),(async function*(){var q;if(H!=null&&(q=H.signal)!==null&&q!==void 0&&q.aborted)throw new n;for await(let oe of this){var he;if(H!=null&&(he=H.signal)!==null&&he!==void 0&&he.aborted)throw new n;if(V-- >0&&(yield oe),V<=0)return}}).call(this)}a.exports.streamReturningOperators={asIndexedPairs:y(ce,"readable.asIndexedPairs will be removed in a future version."),drop:M,filter:x,flatMap:ke,map:be,take:re,compose:W},a.exports.promiseReturningOperators={every:Se,forEach:X,reduce:de,toArray:U,some:le,find:Y}}),ys=ye((r,a)=>{pe(),me(),ge();var{ArrayPrototypePop:o,Promise:l}=Ye(),{isIterable:c,isNodeStream:i,isWebStream:e}=jt(),{pipelineImpl:n}=Gi(),{finished:t}=qt();ws();function s(...u){return new l((d,p)=>{let m,b,w=u[u.length-1];if(w&&typeof w=="object"&&!i(w)&&!c(w)&&!e(w)){let _=o(u);m=_.signal,b=_.end}n(u,(_,A)=>{_?p(_):d(A)},{signal:m,end:b})})}a.exports={finished:t,pipeline:s}}),ws=ye((r,a)=>{pe(),me(),ge();var{Buffer:o}=(et(),De(Xe)),{ObjectDefineProperty:l,ObjectKeys:c,ReflectApply:i}=Ye(),{promisify:{custom:e}}=ct(),{streamReturningOperators:n,promiseReturningOperators:t}=_u(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:s}}=lt(),u=bs(),{setDefaultHighWaterMark:d,getDefaultHighWaterMark:p}=Yr(),{pipeline:m}=Gi(),{destroyer:b}=hr(),w=qt(),_=ys(),A=jt(),y=a.exports=zi().Stream;y.isDestroyed=A.isDestroyed,y.isDisturbed=A.isDisturbed,y.isErrored=A.isErrored,y.isReadable=A.isReadable,y.isWritable=A.isWritable,y.Readable=Gr();for(let L of c(n)){let P=function(...C){if(new.target)throw s();return y.Readable.from(i(S,this,C))},S=n[L];l(P,"name",{__proto__:null,value:S.name}),l(P,"length",{__proto__:null,value:S.length}),l(y.Readable.prototype,L,{__proto__:null,value:P,enumerable:!1,configurable:!0,writable:!0})}for(let L of c(t)){let P=function(...C){if(new.target)throw s();return i(S,this,C)},S=t[L];l(P,"name",{__proto__:null,value:S.name}),l(P,"length",{__proto__:null,value:S.length}),l(y.Readable.prototype,L,{__proto__:null,value:P,enumerable:!1,configurable:!0,writable:!0})}y.Writable=Yi(),y.Duplex=Ot(),y.Transform=gs(),y.PassThrough=ms(),y.pipeline=m;var{addAbortSignal:v}=zr();y.addAbortSignal=v,y.finished=w,y.destroy=b,y.compose=u,y.setDefaultHighWaterMark=d,y.getDefaultHighWaterMark=p,l(y,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return _}}),l(m,e,{__proto__:null,enumerable:!0,get(){return _.pipeline}}),l(w,e,{__proto__:null,enumerable:!0,get(){return _.finished}}),y.Stream=y,y._isUint8Array=function(L){return L instanceof Uint8Array},y._uint8ArrayToBuffer=function(L){return o.from(L.buffer,L.byteOffset,L.byteLength)}}),sr=ye((r,a)=>{pe(),me(),ge();var o=ws(),l=ys(),c=o.Readable.destroy;a.exports=o.Readable,a.exports._uint8ArrayToBuffer=o._uint8ArrayToBuffer,a.exports._isUint8Array=o._isUint8Array,a.exports.isDisturbed=o.isDisturbed,a.exports.isErrored=o.isErrored,a.exports.isReadable=o.isReadable,a.exports.Readable=o.Readable,a.exports.Writable=o.Writable,a.exports.Duplex=o.Duplex,a.exports.Transform=o.Transform,a.exports.PassThrough=o.PassThrough,a.exports.addAbortSignal=o.addAbortSignal,a.exports.finished=o.finished,a.exports.destroy=o.destroy,a.exports.destroy=c,a.exports.pipeline=o.pipeline,a.exports.compose=o.compose,Object.defineProperty(o,"promises",{configurable:!0,enumerable:!0,get(){return l}}),a.exports.Stream=o.Stream,a.exports.default=a.exports}),vu=ye((r,a)=>{pe(),me(),ge(),typeof Object.create=="function"?a.exports=function(o,l){l&&(o.super_=l,o.prototype=Object.create(l.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}))}:a.exports=function(o,l){if(l){o.super_=l;var c=function(){};c.prototype=l.prototype,o.prototype=new c,o.prototype.constructor=o}}}),Eu=ye((r,a)=>{pe(),me(),ge();var{Buffer:o}=(et(),De(Xe)),l=Symbol.for("BufferList");function c(i){if(!(this instanceof c))return new c(i);c._init.call(this,i)}c._init=function(i){Object.defineProperty(this,l,{value:!0}),this._bufs=[],this.length=0,i&&this.append(i)},c.prototype._new=function(i){return new c(i)},c.prototype._offset=function(i){if(i===0)return[0,0];let e=0;for(let n=0;n<this._bufs.length;n++){let t=e+this._bufs[n].length;if(i<t||n===this._bufs.length-1)return[n,i-e];e=t}},c.prototype._reverseOffset=function(i){let e=i[0],n=i[1];for(let t=0;t<e;t++)n+=this._bufs[t].length;return n},c.prototype.get=function(i){if(i>this.length||i<0)return;let e=this._offset(i);return this._bufs[e[0]][e[1]]},c.prototype.slice=function(i,e){return typeof i=="number"&&i<0&&(i+=this.length),typeof e=="number"&&e<0&&(e+=this.length),this.copy(null,0,i,e)},c.prototype.copy=function(i,e,n,t){if((typeof n!="number"||n<0)&&(n=0),(typeof t!="number"||t>this.length)&&(t=this.length),n>=this.length||t<=0)return i||o.alloc(0);let s=!!i,u=this._offset(n),d=t-n,p=d,m=s&&e||0,b=u[1];if(n===0&&t===this.length){if(!s)return this._bufs.length===1?this._bufs[0]:o.concat(this._bufs,this.length);for(let w=0;w<this._bufs.length;w++)this._bufs[w].copy(i,m),m+=this._bufs[w].length;return i}if(p<=this._bufs[u[0]].length-b)return s?this._bufs[u[0]].copy(i,e,b,b+p):this._bufs[u[0]].slice(b,b+p);s||(i=o.allocUnsafe(d));for(let w=u[0];w<this._bufs.length;w++){let _=this._bufs[w].length-b;if(p>_)this._bufs[w].copy(i,m,b),m+=_;else{this._bufs[w].copy(i,m,b,b+p),m+=_;break}p-=_,b&&(b=0)}return i.length>m?i.slice(0,m):i},c.prototype.shallowSlice=function(i,e){if(i=i||0,e=typeof e!="number"?this.length:e,i<0&&(i+=this.length),e<0&&(e+=this.length),i===e)return this._new();let n=this._offset(i),t=this._offset(e),s=this._bufs.slice(n[0],t[0]+1);return t[1]===0?s.pop():s[s.length-1]=s[s.length-1].slice(0,t[1]),n[1]!==0&&(s[0]=s[0].slice(n[1])),this._new(s)},c.prototype.toString=function(i,e,n){return this.slice(e,n).toString(i)},c.prototype.consume=function(i){if(i=Math.trunc(i),Number.isNaN(i)||i<=0)return this;for(;this._bufs.length;)if(i>=this._bufs[0].length)i-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(i),this.length-=i;break}return this},c.prototype.duplicate=function(){let i=this._new();for(let e=0;e<this._bufs.length;e++)i.append(this._bufs[e]);return i},c.prototype.append=function(i){if(i==null)return this;if(i.buffer)this._appendBuffer(o.from(i.buffer,i.byteOffset,i.byteLength));else if(Array.isArray(i))for(let e=0;e<i.length;e++)this.append(i[e]);else if(this._isBufferList(i))for(let e=0;e<i._bufs.length;e++)this.append(i._bufs[e]);else typeof i=="number"&&(i=i.toString()),this._appendBuffer(o.from(i));return this},c.prototype._appendBuffer=function(i){this._bufs.push(i),this.length+=i.length},c.prototype.indexOf=function(i,e,n){if(n===void 0&&typeof e=="string"&&(n=e,e=void 0),typeof i=="function"||Array.isArray(i))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof i=="number"?i=o.from([i]):typeof i=="string"?i=o.from(i,n):this._isBufferList(i)?i=i.slice():Array.isArray(i.buffer)?i=o.from(i.buffer,i.byteOffset,i.byteLength):o.isBuffer(i)||(i=o.from(i)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),i.length===0)return e>this.length?this.length:e;let t=this._offset(e),s=t[0],u=t[1];for(;s<this._bufs.length;s++){let d=this._bufs[s];for(;u<d.length;)if(d.length-u>=i.length){let p=d.indexOf(i,u);if(p!==-1)return this._reverseOffset([s,p]);u=d.length-i.length+1}else{let p=this._reverseOffset([s,u]);if(this._match(p,i))return p;u++}u=0}return-1},c.prototype._match=function(i,e){if(this.length-i<e.length)return!1;for(let n=0;n<e.length;n++)if(this.get(i+n)!==e[n])return!1;return!0},function(){let i={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in i)(function(n){i[n]===null?c.prototype[n]=function(t,s){return this.slice(t,t+s)[n](0,s)}:c.prototype[n]=function(t=0){return this.slice(t,t+i[n])[n](0)}})(e)}(),c.prototype._isBufferList=function(i){return i instanceof c||c.isBufferList(i)},c.isBufferList=function(i){return i!=null&&i[l]},a.exports=c}),Su=ye((r,a)=>{pe(),me(),ge();var o=sr().Duplex,l=vu(),c=Eu();function i(e){if(!(this instanceof i))return new i(e);if(typeof e=="function"){this._callback=e;let n=(function(t){this._callback&&(this._callback(t),this._callback=null)}).bind(this);this.on("pipe",function(t){t.on("error",n)}),this.on("unpipe",function(t){t.removeListener("error",n)}),e=null}c._init.call(this,e),o.call(this)}l(i,o),Object.assign(i.prototype,c.prototype),i.prototype._new=function(e){return new i(e)},i.prototype._write=function(e,n,t){this._appendBuffer(e),typeof t=="function"&&t()},i.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},i.prototype.end=function(e){o.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},i.prototype._destroy=function(e,n){this._bufs.length=0,this.length=0,n(e)},i.prototype._isBufferList=function(e){return e instanceof i||e instanceof c||i.isBufferList(e)},i.isBufferList=c.isBufferList,a.exports=i,a.exports.BufferListStream=i,a.exports.BufferList=c}),ku=ye((r,a)=>{pe(),me(),ge();var o=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};a.exports=o}),_s=ye((r,a)=>{pe(),me(),ge();var o=a.exports,{Buffer:l}=(et(),De(Xe));o.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},o.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},o.requiredHeaderFlagsErrors={};for(let i in o.requiredHeaderFlags){let e=o.requiredHeaderFlags[i];o.requiredHeaderFlagsErrors[i]="Invalid header flag bits, must be 0x"+e.toString(16)+" for "+o.types[i]+" packet"}o.codes={};for(let i in o.types){let e=o.types[i];o.codes[e]=i}o.CMD_SHIFT=4,o.CMD_MASK=240,o.DUP_MASK=8,o.QOS_MASK=3,o.QOS_SHIFT=1,o.RETAIN_MASK=1,o.VARBYTEINT_MASK=127,o.VARBYTEINT_FIN_MASK=128,o.VARBYTEINT_MAX=268435455,o.SESSIONPRESENT_MASK=1,o.SESSIONPRESENT_HEADER=l.from([o.SESSIONPRESENT_MASK]),o.CONNACK_HEADER=l.from([o.codes.connack<<o.CMD_SHIFT]),o.USERNAME_MASK=128,o.PASSWORD_MASK=64,o.WILL_RETAIN_MASK=32,o.WILL_QOS_MASK=24,o.WILL_QOS_SHIFT=3,o.WILL_FLAG_MASK=4,o.CLEAN_SESSION_MASK=2,o.CONNECT_HEADER=l.from([o.codes.connect<<o.CMD_SHIFT]),o.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},o.propertiesCodes={};for(let i in o.properties){let e=o.properties[i];o.propertiesCodes[e]=i}o.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function c(i){return[0,1,2].map(e=>[0,1].map(n=>[0,1].map(t=>{let s=l.alloc(1);return s.writeUInt8(o.codes[i]<<o.CMD_SHIFT|(n?o.DUP_MASK:0)|e<<o.QOS_SHIFT|t,0,!0),s})))}o.PUBLISH_HEADER=c("publish"),o.SUBSCRIBE_HEADER=c("subscribe"),o.SUBSCRIBE_OPTIONS_QOS_MASK=3,o.SUBSCRIBE_OPTIONS_NL_MASK=1,o.SUBSCRIBE_OPTIONS_NL_SHIFT=2,o.SUBSCRIBE_OPTIONS_RAP_MASK=1,o.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,o.SUBSCRIBE_OPTIONS_RH_MASK=3,o.SUBSCRIBE_OPTIONS_RH_SHIFT=4,o.SUBSCRIBE_OPTIONS_RH=[0,16,32],o.SUBSCRIBE_OPTIONS_NL=4,o.SUBSCRIBE_OPTIONS_RAP=8,o.SUBSCRIBE_OPTIONS_QOS=[0,1,2],o.UNSUBSCRIBE_HEADER=c("unsubscribe"),o.ACKS={unsuback:c("unsuback"),puback:c("puback"),pubcomp:c("pubcomp"),pubrel:c("pubrel"),pubrec:c("pubrec")},o.SUBACK_HEADER=l.from([o.codes.suback<<o.CMD_SHIFT]),o.VERSION3=l.from([3]),o.VERSION4=l.from([4]),o.VERSION5=l.from([5]),o.VERSION131=l.from([131]),o.VERSION132=l.from([132]),o.QOS=[0,1,2].map(i=>l.from([i])),o.EMPTY={pingreq:l.from([o.codes.pingreq<<4,0]),pingresp:l.from([o.codes.pingresp<<4,0]),disconnect:l.from([o.codes.disconnect<<4,0])},o.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},o.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},o.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},o.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},o.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},o.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),Au=ye((r,a)=>{pe(),me(),ge();var o=1e3,l=o*60,c=l*60,i=c*24,e=i*7,n=i*365.25;a.exports=function(p,m){m=m||{};var b=typeof p;if(b==="string"&&p.length>0)return t(p);if(b==="number"&&isFinite(p))return m.long?u(p):s(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))};function t(p){if(p=String(p),!(p.length>100)){var m=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(m){var b=parseFloat(m[1]),w=(m[2]||"ms").toLowerCase();switch(w){case"years":case"year":case"yrs":case"yr":case"y":return b*n;case"weeks":case"week":case"w":return b*e;case"days":case"day":case"d":return b*i;case"hours":case"hour":case"hrs":case"hr":case"h":return b*c;case"minutes":case"minute":case"mins":case"min":case"m":return b*l;case"seconds":case"second":case"secs":case"sec":case"s":return b*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function s(p){var m=Math.abs(p);return m>=i?Math.round(p/i)+"d":m>=c?Math.round(p/c)+"h":m>=l?Math.round(p/l)+"m":m>=o?Math.round(p/o)+"s":p+"ms"}function u(p){var m=Math.abs(p);return m>=i?d(p,m,i,"day"):m>=c?d(p,m,c,"hour"):m>=l?d(p,m,l,"minute"):m>=o?d(p,m,o,"second"):p+" ms"}function d(p,m,b,w){var _=m>=b*1.5;return Math.round(p/b)+" "+w+(_?"s":"")}}),Cu=ye((r,a)=>{pe(),me(),ge();function o(l){i.debug=i,i.default=i,i.coerce=d,i.disable=s,i.enable=n,i.enabled=u,i.humanize=Au(),i.destroy=p,Object.keys(l).forEach(m=>{i[m]=l[m]}),i.names=[],i.skips=[],i.formatters={};function c(m){let b=0;for(let w=0;w<m.length;w++)b=(b<<5)-b+m.charCodeAt(w),b|=0;return i.colors[Math.abs(b)%i.colors.length]}i.selectColor=c;function i(m){let b,w=null,_,A;function y(...v){if(!y.enabled)return;let L=y,P=Number(new Date),S=P-(b||P);L.diff=S,L.prev=b,L.curr=P,b=P,v[0]=i.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let C=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(j,Q)=>{if(j==="%%")return"%";C++;let ee=i.formatters[Q];if(typeof ee=="function"){let ae=v[C];j=ee.call(L,ae),v.splice(C,1),C--}return j}),i.formatArgs.call(L,v),(L.log||i.log).apply(L,v)}return y.namespace=m,y.useColors=i.useColors(),y.color=i.selectColor(m),y.extend=e,y.destroy=i.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>w!==null?w:(_!==i.namespaces&&(_=i.namespaces,A=i.enabled(m)),A),set:v=>{w=v}}),typeof i.init=="function"&&i.init(y),y}function e(m,b){let w=i(this.namespace+(typeof b>"u"?":":b)+m);return w.log=this.log,w}function n(m){i.save(m),i.namespaces=m,i.names=[],i.skips=[];let b=(typeof m=="string"?m:"").trim().replace(" ",",").split(",").filter(Boolean);for(let w of b)w[0]==="-"?i.skips.push(w.slice(1)):i.names.push(w)}function t(m,b){let w=0,_=0,A=-1,y=0;for(;w<m.length;)if(_<b.length&&(b[_]===m[w]||b[_]==="*"))b[_]==="*"?(A=_,y=w,_++):(w++,_++);else if(A!==-1)_=A+1,y++,w=y;else return!1;for(;_<b.length&&b[_]==="*";)_++;return _===b.length}function s(){let m=[...i.names,...i.skips.map(b=>"-"+b)].join(",");return i.enable(""),m}function u(m){for(let b of i.skips)if(t(m,b))return!1;for(let b of i.names)if(t(m,b))return!0;return!1}function d(m){return m instanceof Error?m.stack||m.message:m}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}a.exports=o}),Rt=ye((r,a)=>{pe(),me(),ge(),r.formatArgs=l,r.save=c,r.load=i,r.useColors=o,r.storage=e(),r.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function l(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+a.exports.humanize(this.diff),!this.useColors)return;let s="color: "+this.color;t.splice(1,0,s,"color: inherit");let u=0,d=0;t[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(u++,p==="%c"&&(d=u))}),t.splice(d,0,s)}r.log=console.debug||console.log||(()=>{});function c(t){try{t?r.storage.setItem("debug",t):r.storage.removeItem("debug")}catch{}}function i(){let t;try{t=r.storage.getItem("debug")}catch{}return!t&&typeof Le<"u"&&"env"in Le&&(t=Le.env.DEBUG),t}function e(){try{return localStorage}catch{}}a.exports=Cu()(r);var{formatters:n}=a.exports;n.j=function(t){try{return JSON.stringify(t)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}}),xu=ye((r,a)=>{pe(),me(),ge();var o=Su(),{EventEmitter:l}=(ir(),De(Ht)),c=ku(),i=_s(),e=Rt()("mqtt-packet:parser"),n=class Ci extends l{constructor(){super(),this.parser=this.constructor.parser}static parser(s){return this instanceof Ci?(this.settings=s||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new Ci().parser(s)}_resetState(){e("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new c,this.error=null,this._list=o(),this._stateCounter=0}parse(s){for(this.error&&this._resetState(),this._list.append(s),e("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,e("parse: state complete. _stateCounter is now: %d",this._stateCounter),e("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return e("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let s=this._list.readUInt8(0),u=s>>i.CMD_SHIFT;this.packet.cmd=i.types[u];let d=s&15,p=i.requiredHeaderFlags[u];return p!=null&&d!==p?this._emitError(new Error(i.requiredHeaderFlagsErrors[u])):(this.packet.retain=(s&i.RETAIN_MASK)!==0,this.packet.qos=s>>i.QOS_SHIFT&i.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(s&i.DUP_MASK)!==0,e("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let s=this._parseVarByteNum(!0);return s&&(this.packet.length=s.value,this._list.consume(s.bytes)),e("_parseLength %d",s.value),!!s}_parsePayload(){e("_parsePayload: payload %O",this._list);let s=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}s=!0}return e("_parsePayload complete result: %s",s),s}_parseConnect(){e("_parseConnect");let s,u,d,p,m={},b=this.packet,w=this._parseString();if(w===null)return this._emitError(new Error("Cannot parse protocolId"));if(w!=="MQTT"&&w!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(b.protocolId=w,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(b.protocolVersion=this._list.readUInt8(this._pos),b.protocolVersion>=128&&(b.bridgeMode=!0,b.protocolVersion=b.protocolVersion-128),b.protocolVersion!==3&&b.protocolVersion!==4&&b.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));m.username=this._list.readUInt8(this._pos)&i.USERNAME_MASK,m.password=this._list.readUInt8(this._pos)&i.PASSWORD_MASK,m.will=this._list.readUInt8(this._pos)&i.WILL_FLAG_MASK;let _=!!(this._list.readUInt8(this._pos)&i.WILL_RETAIN_MASK),A=(this._list.readUInt8(this._pos)&i.WILL_QOS_MASK)>>i.WILL_QOS_SHIFT;if(m.will)b.will={},b.will.retain=_,b.will.qos=A;else{if(_)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(A)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(b.clean=(this._list.readUInt8(this._pos)&i.CLEAN_SESSION_MASK)!==0,this._pos++,b.keepalive=this._parseNum(),b.keepalive===-1)return this._emitError(new Error("Packet too short"));if(b.protocolVersion===5){let v=this._parseProperties();Object.getOwnPropertyNames(v).length&&(b.properties=v)}let y=this._parseString();if(y===null)return this._emitError(new Error("Packet too short"));if(b.clientId=y,e("_parseConnect: packet.clientId: %s",b.clientId),m.will){if(b.protocolVersion===5){let v=this._parseProperties();Object.getOwnPropertyNames(v).length&&(b.will.properties=v)}if(s=this._parseString(),s===null)return this._emitError(new Error("Cannot parse will topic"));if(b.will.topic=s,e("_parseConnect: packet.will.topic: %s",b.will.topic),u=this._parseBuffer(),u===null)return this._emitError(new Error("Cannot parse will payload"));b.will.payload=u,e("_parseConnect: packet.will.paylaod: %s",b.will.payload)}if(m.username){if(p=this._parseString(),p===null)return this._emitError(new Error("Cannot parse username"));b.username=p,e("_parseConnect: packet.username: %s",b.username)}if(m.password){if(d=this._parseBuffer(),d===null)return this._emitError(new Error("Cannot parse password"));b.password=d}return this.settings=b,e("_parseConnect: complete"),b}_parseConnack(){e("_parseConnack");let s=this.packet;if(this._list.length<1)return null;let u=this._list.readUInt8(this._pos++);if(u>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(s.sessionPresent=!!(u&i.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?s.reasonCode=this._list.readUInt8(this._pos++):s.reasonCode=0;else{if(this._list.length<2)return null;s.returnCode=this._list.readUInt8(this._pos++)}if(s.returnCode===-1||s.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(s.properties=d)}e("_parseConnack: complete")}_parsePublish(){e("_parsePublish");let s=this.packet;if(s.topic=this._parseString(),s.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(s.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(s.properties=u)}s.payload=this._list.slice(this._pos,s.length),e("_parsePublish: payload from buffer list: %o",s.payload)}}_parseSubscribe(){e("_parseSubscribe");let s=this.packet,u,d,p,m,b,w,_;if(s.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let A=this._parseProperties();Object.getOwnPropertyNames(A).length&&(s.properties=A)}if(s.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<s.length;){if(u=this._parseString(),u===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=s.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(d=this._parseByte(),this.settings.protocolVersion===5){if(d&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(d&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(p=d&i.SUBSCRIBE_OPTIONS_QOS_MASK,p>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(w=(d>>i.SUBSCRIBE_OPTIONS_NL_SHIFT&i.SUBSCRIBE_OPTIONS_NL_MASK)!==0,b=(d>>i.SUBSCRIBE_OPTIONS_RAP_SHIFT&i.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,m=d>>i.SUBSCRIBE_OPTIONS_RH_SHIFT&i.SUBSCRIBE_OPTIONS_RH_MASK,m>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));_={topic:u,qos:p},this.settings.protocolVersion===5?(_.nl=w,_.rap=b,_.rh=m):this.settings.bridgeMode&&(_.rh=0,_.rap=!0,_.nl=!0),e("_parseSubscribe: push subscription `%s` to subscription",_),s.subscriptions.push(_)}}}_parseSuback(){e("_parseSuback");let s=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(s.properties=u)}if(s.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let u=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!i.MQTT5_SUBACK_CODES[u])return this._emitError(new Error("Invalid suback code"))}else if(u>2&&u!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(u)}}}_parseUnsubscribe(){e("_parseUnsubscribe");let s=this.packet;if(s.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(s.properties=u)}if(s.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<s.length;){let u=this._parseString();if(u===null)return this._emitError(new Error("Cannot parse topic"));e("_parseUnsubscribe: push topic `%s` to unsubscriptions",u),s.unsubscriptions.push(u)}}}_parseUnsuback(){e("_parseUnsuback");let s=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&s.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(s.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let u=this._parseProperties();for(Object.getOwnPropertyNames(u).length&&(s.properties=u),s.granted=[];this._pos<this.packet.length;){let d=this._list.readUInt8(this._pos++);if(!i.MQTT5_UNSUBACK_CODES[d])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(d)}}}_parseConfirmation(){e("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let s=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(s.length>2){switch(s.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!i.MQTT5_PUBACK_PUBREC_CODES[s.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!i.MQTT5_PUBREL_PUBCOMP_CODES[s.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}e("_parseConfirmation: packet.reasonCode `%d`",s.reasonCode)}else s.reasonCode=0;if(s.length>3){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(s.properties=u)}}return!0}_parseDisconnect(){let s=this.packet;if(e("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(s.reasonCode=this._parseByte(),i.MQTT5_DISCONNECT_CODES[s.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):s.reasonCode=0;let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(s.properties=u)}return e("_parseDisconnect result: true"),!0}_parseAuth(){e("_parseAuth");let s=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(s.reasonCode=this._parseByte(),!i.MQTT5_AUTH_CODES[s.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let u=this._parseProperties();return Object.getOwnPropertyNames(u).length&&(s.properties=u),e("_parseAuth: result: true"),!0}_parseMessageId(){let s=this.packet;return s.messageId=this._parseNum(),s.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(e("_parseMessageId: packet.messageId %d",s.messageId),!0)}_parseString(s){let u=this._parseNum(),d=u+this._pos;if(u===-1||d>this._list.length||d>this.packet.length)return null;let p=this._list.toString("utf8",this._pos,d);return this._pos+=u,e("_parseString: result: %s",p),p}_parseStringPair(){return e("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let s=this._parseNum(),u=s+this._pos;if(s===-1||u>this._list.length||u>this.packet.length)return null;let d=this._list.slice(this._pos,u);return this._pos+=s,e("_parseBuffer: result: %o",d),d}_parseNum(){if(this._list.length-this._pos<2)return-1;let s=this._list.readUInt16BE(this._pos);return this._pos+=2,e("_parseNum: result: %s",s),s}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let s=this._list.readUInt32BE(this._pos);return this._pos+=4,e("_parse4ByteNum: result: %s",s),s}_parseVarByteNum(s){e("_parseVarByteNum");let u=4,d=0,p=1,m=0,b=!1,w,_=this._pos?this._pos:0;for(;d<u&&_+d<this._list.length;){if(w=this._list.readUInt8(_+d++),m+=p*(w&i.VARBYTEINT_MASK),p*=128,(w&i.VARBYTEINT_FIN_MASK)===0){b=!0;break}if(this._list.length<=d)break}return!b&&d===u&&this._list.length>=d&&this._emitError(new Error("Invalid variable byte integer")),_&&(this._pos+=d),b?s?b={bytes:d,value:m}:b=m:b=!1,e("_parseVarByteNum: result: %o",b),b}_parseByte(){let s;return this._pos<this._list.length&&(s=this._list.readUInt8(this._pos),this._pos++),e("_parseByte: result: %o",s),s}_parseByType(s){switch(e("_parseByType: type: %s",s),s){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){e("_parseProperties");let s=this._parseVarByteNum(),u=this._pos+s,d={};for(;this._pos<u;){let p=this._parseByte();if(!p)return this._emitError(new Error("Cannot parse property code type")),!1;let m=i.propertiesCodes[p];if(!m)return this._emitError(new Error("Unknown property")),!1;if(m==="userProperties"){d[m]||(d[m]=Object.create(null));let b=this._parseByType(i.propertiesTypes[m]);if(d[m][b.name])if(Array.isArray(d[m][b.name]))d[m][b.name].push(b.value);else{let w=d[m][b.name];d[m][b.name]=[w],d[m][b.name].push(b.value)}else d[m][b.name]=b.value;continue}d[m]?Array.isArray(d[m])?d[m].push(this._parseByType(i.propertiesTypes[m])):(d[m]=[d[m]],d[m].push(this._parseByType(i.propertiesTypes[m]))):d[m]=this._parseByType(i.propertiesTypes[m])}return d}_newPacket(){return e("_newPacket"),this.packet&&(this._list.consume(this.packet.length),e("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),e("_newPacket: new packet"),this.packet=new c,this._pos=0,!0}_emitError(s){e("_emitError",s),this.error=s,this.emit("error",s)}};a.exports=n}),Iu=ye((r,a)=>{pe(),me(),ge();var{Buffer:o}=(et(),De(Xe)),l=65536,c={},i=o.isBuffer(o.from([1,2]).subarray(0,1));function e(u){let d=o.allocUnsafe(2);return d.writeUInt8(u>>8,0),d.writeUInt8(u&255,1),d}function n(){for(let u=0;u<l;u++)c[u]=e(u)}function t(u){let d=0,p=0,m=o.allocUnsafe(4);do d=u%128|0,u=u/128|0,u>0&&(d=d|128),m.writeUInt8(d,p++);while(u>0&&p<4);return u>0&&(p=0),i?m.subarray(0,p):m.slice(0,p)}function s(u){let d=o.allocUnsafe(4);return d.writeUInt32BE(u,0),d}a.exports={cache:c,generateCache:n,generateNumber:e,genBufVariableByteInt:t,generate4ByteBuffer:s}}),Tu=ye((r,a)=>{pe(),me(),ge(),typeof Le>"u"||!Le.version||Le.version.indexOf("v0.")===0||Le.version.indexOf("v1.")===0&&Le.version.indexOf("v1.8.")!==0?a.exports={nextTick:o}:a.exports=Le;function o(l,c,i,e){if(typeof l!="function")throw new TypeError('"callback" argument must be a function');var n=arguments.length,t,s;switch(n){case 0:case 1:return Le.nextTick(l);case 2:return Le.nextTick(function(){l.call(null,c)});case 3:return Le.nextTick(function(){l.call(null,c,i)});case 4:return Le.nextTick(function(){l.call(null,c,i,e)});default:for(t=new Array(n-1),s=0;s<t.length;)t[s++]=arguments[s];return Le.nextTick(function(){l.apply(null,t)})}}}),vs=ye((r,a)=>{pe(),me(),ge();var o=_s(),{Buffer:l}=(et(),De(Xe)),c=l.allocUnsafe(0),i=l.from([0]),e=Iu(),n=Tu().nextTick,t=Rt()("mqtt-packet:writeToStream"),s=e.cache,u=e.generateNumber,d=e.generateCache,p=e.genBufVariableByteInt,m=e.generate4ByteBuffer,b=ce,w=!0;function _(z,M,re){switch(t("generate called"),M.cork&&(M.cork(),n(A,M)),w&&(w=!1,d()),t("generate: packet.cmd: %s",z.cmd),z.cmd){case"connect":return y(z,M);case"connack":return v(z,M,re);case"publish":return L(z,M,re);case"puback":case"pubrec":case"pubrel":case"pubcomp":return P(z,M,re);case"subscribe":return S(z,M,re);case"suback":return C(z,M,re);case"unsubscribe":return j(z,M,re);case"unsuback":return Q(z,M,re);case"pingreq":case"pingresp":return ee(z,M);case"disconnect":return ae(z,M,re);case"auth":return O(z,M,re);default:return M.destroy(new Error("Unknown command")),!1}}Object.defineProperty(_,"cacheNumbers",{get(){return b===ce},set(z){z?((!s||Object.keys(s).length===0)&&(w=!0),b=ce):(w=!1,b=le)}});function A(z){z.uncork()}function y(z,M,re){let V=z||{},H=V.protocolId||"MQTT",q=V.protocolVersion||4,he=V.will,oe=V.clean,B=V.keepalive||0,D=V.clientId||"",Z=V.username,se=V.password,ie=V.properties;oe===void 0&&(oe=!0);let fe=0;if(!H||typeof H!="string"&&!l.isBuffer(H))return M.destroy(new Error("Invalid protocolId")),!1;if(fe+=H.length+2,q!==3&&q!==4&&q!==5)return M.destroy(new Error("Invalid protocol version")),!1;if(fe+=1,(typeof D=="string"||l.isBuffer(D))&&(D||q>=4)&&(D||oe))fe+=l.byteLength(D)+2;else{if(q<4)return M.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(oe*1===0)return M.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof B!="number"||B<0||B>65535||B%1!==0)return M.destroy(new Error("Invalid keepalive")),!1;fe+=2,fe+=1;let F,ue;if(q===5){if(F=X(M,ie),!F)return!1;fe+=F.length}if(he){if(typeof he!="object")return M.destroy(new Error("Invalid will")),!1;if(!he.topic||typeof he.topic!="string")return M.destroy(new Error("Invalid will topic")),!1;if(fe+=l.byteLength(he.topic)+2,fe+=2,he.payload)if(he.payload.length>=0)typeof he.payload=="string"?fe+=l.byteLength(he.payload):fe+=he.payload.length;else return M.destroy(new Error("Invalid will payload")),!1;if(ue={},q===5){if(ue=X(M,he.properties),!ue)return!1;fe+=ue.length}}let we=!1;if(Z!=null)if(ke(Z))we=!0,fe+=l.byteLength(Z)+2;else return M.destroy(new Error("Invalid username")),!1;if(se!=null){if(!we)return M.destroy(new Error("Username is required to use password")),!1;if(ke(se))fe+=U(se)+2;else return M.destroy(new Error("Invalid password")),!1}M.write(o.CONNECT_HEADER),J(M,fe),Y(M,H),V.bridgeMode&&(q+=128),M.write(q===131?o.VERSION131:q===132?o.VERSION132:q===4?o.VERSION4:q===5?o.VERSION5:o.VERSION3);let ne=0;return ne|=Z!=null?o.USERNAME_MASK:0,ne|=se!=null?o.PASSWORD_MASK:0,ne|=he&&he.retain?o.WILL_RETAIN_MASK:0,ne|=he&&he.qos?he.qos<<o.WILL_QOS_SHIFT:0,ne|=he?o.WILL_FLAG_MASK:0,ne|=oe?o.CLEAN_SESSION_MASK:0,M.write(l.from([ne])),b(M,B),q===5&&F.write(),Y(M,D),he&&(q===5&&ue.write(),W(M,he.topic),Y(M,he.payload)),Z!=null&&Y(M,Z),se!=null&&Y(M,se),!0}function v(z,M,re){let V=re?re.protocolVersion:4,H=z||{},q=V===5?H.reasonCode:H.returnCode,he=H.properties,oe=2;if(typeof q!="number")return M.destroy(new Error("Invalid return code")),!1;let B=null;if(V===5){if(B=X(M,he),!B)return!1;oe+=B.length}return M.write(o.CONNACK_HEADER),J(M,oe),M.write(H.sessionPresent?o.SESSIONPRESENT_HEADER:i),M.write(l.from([q])),B==null||B.write(),!0}function L(z,M,re){t("publish: packet: %o",z);let V=re?re.protocolVersion:4,H=z||{},q=H.qos||0,he=H.retain?o.RETAIN_MASK:0,oe=H.topic,B=H.payload||c,D=H.messageId,Z=H.properties,se=0;if(typeof oe=="string")se+=l.byteLength(oe)+2;else if(l.isBuffer(oe))se+=oe.length+2;else return M.destroy(new Error("Invalid topic")),!1;if(l.isBuffer(B)?se+=B.length:se+=l.byteLength(B),q&&typeof D!="number")return M.destroy(new Error("Invalid messageId")),!1;q&&(se+=2);let ie=null;if(V===5){if(ie=X(M,Z),!ie)return!1;se+=ie.length}return M.write(o.PUBLISH_HEADER[q][H.dup?1:0][he?1:0]),J(M,se),b(M,U(oe)),M.write(oe),q>0&&b(M,D),ie==null||ie.write(),t("publish: payload: %o",B),M.write(B)}function P(z,M,re){let V=re?re.protocolVersion:4,H=z||{},q=H.cmd||"puback",he=H.messageId,oe=H.dup&&q==="pubrel"?o.DUP_MASK:0,B=0,D=H.reasonCode,Z=H.properties,se=V===5?3:2;if(q==="pubrel"&&(B=1),typeof he!="number")return M.destroy(new Error("Invalid messageId")),!1;let ie=null;if(V===5&&typeof Z=="object"){if(ie=x(M,Z,re,se),!ie)return!1;se+=ie.length}return M.write(o.ACKS[q][B][oe][0]),se===3&&(se+=D!==0?1:-1),J(M,se),b(M,he),V===5&&se!==2&&M.write(l.from([D])),ie!==null?ie.write():se===4&&M.write(l.from([0])),!0}function S(z,M,re){t("subscribe: packet: ");let V=re?re.protocolVersion:4,H=z||{},q=H.dup?o.DUP_MASK:0,he=H.messageId,oe=H.subscriptions,B=H.properties,D=0;if(typeof he!="number")return M.destroy(new Error("Invalid messageId")),!1;D+=2;let Z=null;if(V===5){if(Z=X(M,B),!Z)return!1;D+=Z.length}if(typeof oe=="object"&&oe.length)for(let ie=0;ie<oe.length;ie+=1){let fe=oe[ie].topic,F=oe[ie].qos;if(typeof fe!="string")return M.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof F!="number")return M.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(V===5){if(typeof(oe[ie].nl||!1)!="boolean")return M.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(oe[ie].rap||!1)!="boolean")return M.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let ue=oe[ie].rh||0;if(typeof ue!="number"||ue>2)return M.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}D+=l.byteLength(fe)+2+1}else return M.destroy(new Error("Invalid subscriptions")),!1;t("subscribe: writing to stream: %o",o.SUBSCRIBE_HEADER),M.write(o.SUBSCRIBE_HEADER[1][q?1:0][0]),J(M,D),b(M,he),Z!==null&&Z.write();let se=!0;for(let ie of oe){let fe=ie.topic,F=ie.qos,ue=+ie.nl,we=+ie.rap,ne=ie.rh,Oe;W(M,fe),Oe=o.SUBSCRIBE_OPTIONS_QOS[F],V===5&&(Oe|=ue?o.SUBSCRIBE_OPTIONS_NL:0,Oe|=we?o.SUBSCRIBE_OPTIONS_RAP:0,Oe|=ne?o.SUBSCRIBE_OPTIONS_RH[ne]:0),se=M.write(l.from([Oe]))}return se}function C(z,M,re){let V=re?re.protocolVersion:4,H=z||{},q=H.messageId,he=H.granted,oe=H.properties,B=0;if(typeof q!="number")return M.destroy(new Error("Invalid messageId")),!1;if(B+=2,typeof he=="object"&&he.length)for(let Z=0;Z<he.length;Z+=1){if(typeof he[Z]!="number")return M.destroy(new Error("Invalid qos vector")),!1;B+=1}else return M.destroy(new Error("Invalid qos vector")),!1;let D=null;if(V===5){if(D=x(M,oe,re,B),!D)return!1;B+=D.length}return M.write(o.SUBACK_HEADER),J(M,B),b(M,q),D!==null&&D.write(),M.write(l.from(he))}function j(z,M,re){let V=re?re.protocolVersion:4,H=z||{},q=H.messageId,he=H.dup?o.DUP_MASK:0,oe=H.unsubscriptions,B=H.properties,D=0;if(typeof q!="number")return M.destroy(new Error("Invalid messageId")),!1;if(D+=2,typeof oe=="object"&&oe.length)for(let ie=0;ie<oe.length;ie+=1){if(typeof oe[ie]!="string")return M.destroy(new Error("Invalid unsubscriptions")),!1;D+=l.byteLength(oe[ie])+2}else return M.destroy(new Error("Invalid unsubscriptions")),!1;let Z=null;if(V===5){if(Z=X(M,B),!Z)return!1;D+=Z.length}M.write(o.UNSUBSCRIBE_HEADER[1][he?1:0][0]),J(M,D),b(M,q),Z!==null&&Z.write();let se=!0;for(let ie=0;ie<oe.length;ie++)se=W(M,oe[ie]);return se}function Q(z,M,re){let V=re?re.protocolVersion:4,H=z||{},q=H.messageId,he=H.dup?o.DUP_MASK:0,oe=H.granted,B=H.properties,D=H.cmd,Z=0,se=2;if(typeof q!="number")return M.destroy(new Error("Invalid messageId")),!1;if(V===5)if(typeof oe=="object"&&oe.length)for(let fe=0;fe<oe.length;fe+=1){if(typeof oe[fe]!="number")return M.destroy(new Error("Invalid qos vector")),!1;se+=1}else return M.destroy(new Error("Invalid qos vector")),!1;let ie=null;if(V===5){if(ie=x(M,B,re,se),!ie)return!1;se+=ie.length}return M.write(o.ACKS[D][Z][he][0]),J(M,se),b(M,q),ie!==null&&ie.write(),V===5&&M.write(l.from(oe)),!0}function ee(z,M,re){return M.write(o.EMPTY[z.cmd])}function ae(z,M,re){let V=re?re.protocolVersion:4,H=z||{},q=H.reasonCode,he=H.properties,oe=V===5?1:0,B=null;if(V===5){if(B=x(M,he,re,oe),!B)return!1;oe+=B.length}return M.write(l.from([o.codes.disconnect<<4])),J(M,oe),V===5&&M.write(l.from([q])),B!==null&&B.write(),!0}function O(z,M,re){let V=re?re.protocolVersion:4,H=z||{},q=H.reasonCode,he=H.properties,oe=V===5?1:0;V!==5&&M.destroy(new Error("Invalid mqtt version for auth packet"));let B=x(M,he,re,oe);return B?(oe+=B.length,M.write(l.from([o.codes.auth<<4])),J(M,oe),M.write(l.from([q])),B!==null&&B.write(),!0):!1}var K={};function J(z,M){if(M>o.VARBYTEINT_MAX)return z.destroy(new Error(`Invalid variable byte integer: ${M}`)),!1;let re=K[M];return re||(re=p(M),M<16384&&(K[M]=re)),t("writeVarByteInt: writing to stream: %o",re),z.write(re)}function W(z,M){let re=l.byteLength(M);return b(z,re),t("writeString: %s",M),z.write(M,"utf8")}function be(z,M,re){W(z,M),W(z,re)}function ce(z,M){return t("writeNumberCached: number: %d",M),t("writeNumberCached: %o",s[M]),z.write(s[M])}function le(z,M){let re=u(M);return t("writeNumberGenerated: %o",re),z.write(re)}function Se(z,M){let re=m(M);return t("write4ByteNumber: %o",re),z.write(re)}function Y(z,M){typeof M=="string"?W(z,M):M?(b(z,M.length),z.write(M)):b(z,0)}function X(z,M){if(typeof M!="object"||M.length!=null)return{length:1,write(){de(z,{},0)}};let re=0;function V(H,q){let he=o.propertiesTypes[H],oe=0;switch(he){case"byte":{if(typeof q!="boolean")return z.destroy(new Error(`Invalid ${H}: ${q}`)),!1;oe+=2;break}case"int8":{if(typeof q!="number"||q<0||q>255)return z.destroy(new Error(`Invalid ${H}: ${q}`)),!1;oe+=2;break}case"binary":{if(q&&q===null)return z.destroy(new Error(`Invalid ${H}: ${q}`)),!1;oe+=1+l.byteLength(q)+2;break}case"int16":{if(typeof q!="number"||q<0||q>65535)return z.destroy(new Error(`Invalid ${H}: ${q}`)),!1;oe+=3;break}case"int32":{if(typeof q!="number"||q<0||q>4294967295)return z.destroy(new Error(`Invalid ${H}: ${q}`)),!1;oe+=5;break}case"var":{if(typeof q!="number"||q<0||q>268435455)return z.destroy(new Error(`Invalid ${H}: ${q}`)),!1;oe+=1+l.byteLength(p(q));break}case"string":{if(typeof q!="string")return z.destroy(new Error(`Invalid ${H}: ${q}`)),!1;oe+=3+l.byteLength(q.toString());break}case"pair":{if(typeof q!="object")return z.destroy(new Error(`Invalid ${H}: ${q}`)),!1;oe+=Object.getOwnPropertyNames(q).reduce((B,D)=>{let Z=q[D];return Array.isArray(Z)?B+=Z.reduce((se,ie)=>(se+=3+l.byteLength(D.toString())+2+l.byteLength(ie.toString()),se),0):B+=3+l.byteLength(D.toString())+2+l.byteLength(q[D].toString()),B},0);break}default:return z.destroy(new Error(`Invalid property ${H}: ${q}`)),!1}return oe}if(M)for(let H in M){let q=0,he=0,oe=M[H];if(oe!==void 0){if(Array.isArray(oe))for(let B=0;B<oe.length;B++){if(he=V(H,oe[B]),!he)return!1;q+=he}else{if(he=V(H,oe),!he)return!1;q=he}if(!q)return!1;re+=q}}return{length:l.byteLength(p(re))+re,write(){de(z,M,re)}}}function x(z,M,re,V){let H=["reasonString","userProperties"],q=re&&re.properties&&re.properties.maximumPacketSize?re.properties.maximumPacketSize:0,he=X(z,M);if(q)for(;V+he.length>q;){let oe=H.shift();if(oe&&M[oe])delete M[oe],he=X(z,M);else return!1}return he}function te(z,M,re){switch(o.propertiesTypes[M]){case"byte":{z.write(l.from([o.properties[M]])),z.write(l.from([+re]));break}case"int8":{z.write(l.from([o.properties[M]])),z.write(l.from([re]));break}case"binary":{z.write(l.from([o.properties[M]])),Y(z,re);break}case"int16":{z.write(l.from([o.properties[M]])),b(z,re);break}case"int32":{z.write(l.from([o.properties[M]])),Se(z,re);break}case"var":{z.write(l.from([o.properties[M]])),J(z,re);break}case"string":{z.write(l.from([o.properties[M]])),W(z,re);break}case"pair":{Object.getOwnPropertyNames(re).forEach(V=>{let H=re[V];Array.isArray(H)?H.forEach(q=>{z.write(l.from([o.properties[M]])),be(z,V.toString(),q.toString())}):(z.write(l.from([o.properties[M]])),be(z,V.toString(),H.toString()))});break}default:return z.destroy(new Error(`Invalid property ${M} value: ${re}`)),!1}}function de(z,M,re){J(z,re);for(let V in M)if(Object.prototype.hasOwnProperty.call(M,V)&&M[V]!=null){let H=M[V];if(Array.isArray(H))for(let q=0;q<H.length;q++)te(z,V,H[q]);else te(z,V,H)}}function U(z){return z?z instanceof l?z.length:l.byteLength(z):0}function ke(z){return typeof z=="string"||z instanceof l}a.exports=_}),Ou=ye((r,a)=>{pe(),me(),ge();var o=vs(),{EventEmitter:l}=(ir(),De(Ht)),{Buffer:c}=(et(),De(Xe));function i(n,t){let s=new e;return o(n,s,t),s.concat()}var e=class extends l{constructor(){super(),this._array=new Array(20),this._i=0}write(n){return this._array[this._i++]=n,!0}concat(){let n=0,t=new Array(this._array.length),s=this._array,u=0,d;for(d=0;d<s.length&&s[d]!==void 0;d++)typeof s[d]!="string"?t[d]=s[d].length:t[d]=c.byteLength(s[d]),n+=t[d];let p=c.allocUnsafe(n);for(d=0;d<s.length&&s[d]!==void 0;d++)typeof s[d]!="string"?(s[d].copy(p,u),u+=t[d]):(p.write(s[d],u),u+=t[d]);return p}destroy(n){n&&this.emit("error",n)}};a.exports=i}),Ru=ye(r=>{pe(),me(),ge(),r.parser=xu().parser,r.generate=Ou(),r.writeToStream=vs()}),Es=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0});var a=class{constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let o=this.nextId++;return this.nextId===65536&&(this.nextId=1),o}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(o){return!0}deallocate(o){}clear(){}};r.default=a}),Pu=ye((r,a)=>{pe(),me(),ge(),a.exports=l;function o(i){return i instanceof Dr?Dr.from(i):new i.constructor(i.buffer.slice(),i.byteOffset,i.length)}function l(i){if(i=i||{},i.circles)return c(i);let e=new Map;if(e.set(Date,d=>new Date(d)),e.set(Map,(d,p)=>new Map(t(Array.from(d),p))),e.set(Set,(d,p)=>new Set(t(Array.from(d),p))),i.constructorHandlers)for(let d of i.constructorHandlers)e.set(d[0],d[1]);let n=null;return i.proto?u:s;function t(d,p){let m=Object.keys(d),b=new Array(m.length);for(let w=0;w<m.length;w++){let _=m[w],A=d[_];typeof A!="object"||A===null?b[_]=A:A.constructor!==Object&&(n=e.get(A.constructor))?b[_]=n(A,p):ArrayBuffer.isView(A)?b[_]=o(A):b[_]=p(A)}return b}function s(d){if(typeof d!="object"||d===null)return d;if(Array.isArray(d))return t(d,s);if(d.constructor!==Object&&(n=e.get(d.constructor)))return n(d,s);let p={};for(let m in d){if(Object.hasOwnProperty.call(d,m)===!1)continue;let b=d[m];typeof b!="object"||b===null?p[m]=b:b.constructor!==Object&&(n=e.get(b.constructor))?p[m]=n(b,s):ArrayBuffer.isView(b)?p[m]=o(b):p[m]=s(b)}return p}function u(d){if(typeof d!="object"||d===null)return d;if(Array.isArray(d))return t(d,u);if(d.constructor!==Object&&(n=e.get(d.constructor)))return n(d,u);let p={};for(let m in d){let b=d[m];typeof b!="object"||b===null?p[m]=b:b.constructor!==Object&&(n=e.get(b.constructor))?p[m]=n(b,u):ArrayBuffer.isView(b)?p[m]=o(b):p[m]=u(b)}return p}}function c(i){let e=[],n=[],t=new Map;if(t.set(Date,m=>new Date(m)),t.set(Map,(m,b)=>new Map(u(Array.from(m),b))),t.set(Set,(m,b)=>new Set(u(Array.from(m),b))),i.constructorHandlers)for(let m of i.constructorHandlers)t.set(m[0],m[1]);let s=null;return i.proto?p:d;function u(m,b){let w=Object.keys(m),_=new Array(w.length);for(let A=0;A<w.length;A++){let y=w[A],v=m[y];if(typeof v!="object"||v===null)_[y]=v;else if(v.constructor!==Object&&(s=t.get(v.constructor)))_[y]=s(v,b);else if(ArrayBuffer.isView(v))_[y]=o(v);else{let L=e.indexOf(v);L!==-1?_[y]=n[L]:_[y]=b(v)}}return _}function d(m){if(typeof m!="object"||m===null)return m;if(Array.isArray(m))return u(m,d);if(m.constructor!==Object&&(s=t.get(m.constructor)))return s(m,d);let b={};e.push(m),n.push(b);for(let w in m){if(Object.hasOwnProperty.call(m,w)===!1)continue;let _=m[w];if(typeof _!="object"||_===null)b[w]=_;else if(_.constructor!==Object&&(s=t.get(_.constructor)))b[w]=s(_,d);else if(ArrayBuffer.isView(_))b[w]=o(_);else{let A=e.indexOf(_);A!==-1?b[w]=n[A]:b[w]=d(_)}}return e.pop(),n.pop(),b}function p(m){if(typeof m!="object"||m===null)return m;if(Array.isArray(m))return u(m,p);if(m.constructor!==Object&&(s=t.get(m.constructor)))return s(m,p);let b={};e.push(m),n.push(b);for(let w in m){let _=m[w];if(typeof _!="object"||_===null)b[w]=_;else if(_.constructor!==Object&&(s=t.get(_.constructor)))b[w]=s(_,p);else if(ArrayBuffer.isView(_))b[w]=o(_);else{let A=e.indexOf(_);A!==-1?b[w]=n[A]:b[w]=p(_)}}return e.pop(),n.pop(),b}}}),ju=ye((r,a)=>{pe(),me(),ge(),a.exports=Pu()()}),Bu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0}),r.validateTopic=a,r.validateTopics=o;function a(l){let c=l.split("/");for(let i=0;i<c.length;i++)if(c[i]!=="+"){if(c[i]==="#")return i===c.length-1;if(c[i].indexOf("+")!==-1||c[i].indexOf("#")!==-1)return!1}return!0}function o(l){if(l.length===0)return"empty_topic_list";for(let c=0;c<l.length;c++)if(!a(l[c]))return l[c];return null}}),Ss=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0});var a=sr(),o={objectMode:!0},l={clean:!0},c=class{constructor(i){this.options=i||{},this.options=Object.assign(Object.assign({},l),i),this._inflights=new Map}put(i,e){return this._inflights.set(i.messageId,i),e&&e(),this}createStream(){let i=new a.Readable(o),e=[],n=!1,t=0;return this._inflights.forEach((s,u)=>{e.push(s)}),i._read=()=>{!n&&t<e.length?i.push(e[t++]):i.push(null)},i.destroy=s=>{if(!n)return n=!0,setTimeout(()=>{i.emit("close")},0),i},i}del(i,e){let n=this._inflights.get(i.messageId);return n?(this._inflights.delete(i.messageId),e(null,n)):e&&e(new Error("missing packet")),this}get(i,e){let n=this._inflights.get(i.messageId);return n?e(null,n):e&&e(new Error("missing packet")),this}close(i){this.options.clean&&(this._inflights=null),i&&i()}};r.default=c}),Mu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0});var a=[0,16,128,131,135,144,145,151,153],o=(l,c,i)=>{l.log("handlePublish: packet %o",c),i=typeof i<"u"?i:l.noop;let e=c.topic.toString(),n=c.payload,{qos:t}=c,{messageId:s}=c,{options:u}=l;if(l.options.protocolVersion===5){let d;if(c.properties&&(d=c.properties.topicAlias),typeof d<"u")if(e.length===0)if(d>0&&d<=65535){let p=l.topicAliasRecv.getTopicByAlias(d);if(p)e=p,l.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",e,d);else{l.log("handlePublish :: unregistered topic alias. alias: %d",d),l.emit("error",new Error("Received unregistered Topic Alias"));return}}else{l.log("handlePublish :: topic alias out of range. alias: %d",d),l.emit("error",new Error("Received Topic Alias is out of range"));return}else if(l.topicAliasRecv.put(e,d))l.log("handlePublish :: registered topic: %s - alias: %d",e,d);else{l.log("handlePublish :: topic alias out of range. alias: %d",d),l.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(l.log("handlePublish: qos %d",t),t){case 2:{u.customHandleAcks(e,n,c,(d,p)=>{if(typeof d=="number"&&(p=d,d=null),d)return l.emit("error",d);if(a.indexOf(p)===-1)return l.emit("error",new Error("Wrong reason code for pubrec"));p?l._sendPacket({cmd:"pubrec",messageId:s,reasonCode:p},i):l.incomingStore.put(c,()=>{l._sendPacket({cmd:"pubrec",messageId:s},i)})});break}case 1:{u.customHandleAcks(e,n,c,(d,p)=>{if(typeof d=="number"&&(p=d,d=null),d)return l.emit("error",d);if(a.indexOf(p)===-1)return l.emit("error",new Error("Wrong reason code for puback"));p||l.emit("message",e,n,c),l.handleMessage(c,m=>{if(m)return i&&i(m);l._sendPacket({cmd:"puback",messageId:s,reasonCode:p},i)})});break}case 0:l.emit("message",e,n,c),l.handleMessage(c,i);break;default:l.log("handlePublish: unknown QoS. Doing nothing.");break}};r.default=o}),Lu=ye((r,a)=>{a.exports={version:"5.12.0"}}),cr=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0}),r.MQTTJS_VERSION=r.nextTick=r.ErrorWithReasonCode=void 0,r.applyMixin=o;var a=class ks extends Error{constructor(c,i){super(c),this.code=i,Object.setPrototypeOf(this,ks.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};r.ErrorWithReasonCode=a;function o(l,c,i=!1){var e;let n=[c];for(;;){let t=n[0],s=Object.getPrototypeOf(t);if(s!=null&&s.prototype)n.unshift(s);else break}for(let t of n)for(let s of Object.getOwnPropertyNames(t.prototype))(i||s!=="constructor")&&Object.defineProperty(l.prototype,s,(e=Object.getOwnPropertyDescriptor(t.prototype,s))!==null&&e!==void 0?e:Object.create(null))}r.nextTick=typeof(Le==null?void 0:Le.nextTick)=="function"?Le.nextTick:l=>{setTimeout(l,0)},r.MQTTJS_VERSION=Lu().version}),Kr=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0}),r.ReasonCodes=void 0;var a=cr();r.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var o=(l,c)=>{let{messageId:i}=c,e=c.cmd,n=null,t=l.outgoing[i]?l.outgoing[i].cb:null,s=null;if(!t){l.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(l.log("_handleAck :: packet type",e),e){case"pubcomp":case"puback":{let u=c.reasonCode;u&&u>0&&u!==16?(s=new a.ErrorWithReasonCode(`Publish error: ${r.ReasonCodes[u]}`,u),l._removeOutgoingAndStoreMessage(i,()=>{t(s,c)})):l._removeOutgoingAndStoreMessage(i,t);break}case"pubrec":{n={cmd:"pubrel",qos:2,messageId:i};let u=c.reasonCode;u&&u>0&&u!==16?(s=new a.ErrorWithReasonCode(`Publish error: ${r.ReasonCodes[u]}`,u),l._removeOutgoingAndStoreMessage(i,()=>{t(s,c)})):l._sendPacket(n);break}case"suback":{delete l.outgoing[i],l.messageIdProvider.deallocate(i);let u=c.granted;for(let d=0;d<u.length;d++){let p=u[d];if(p&128){s=new Error(`Subscribe error: ${r.ReasonCodes[p]}`),s.code=p;let m=l.messageIdToTopic[i];m&&m.forEach(b=>{delete l._resubscribeTopics[b]})}}delete l.messageIdToTopic[i],l._invokeStoreProcessingQueue(),t(s,c);break}case"unsuback":{delete l.outgoing[i],l.messageIdProvider.deallocate(i),l._invokeStoreProcessingQueue(),t(null,c);break}default:l.emit("error",new Error("unrecognized packet type"))}l.disconnecting&&Object.keys(l.outgoing).length===0&&l.emit("outgoingEmpty")};r.default=o}),Nu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0});var a=cr(),o=Kr(),l=(c,i)=>{let{options:e}=c,n=e.protocolVersion,t=n===5?i.reasonCode:i.returnCode;if(n!==5){let s=new a.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${n}`,t);c.emit("error",s);return}c.handleAuth(i,(s,u)=>{if(s){c.emit("error",s);return}if(t===24)c.reconnecting=!1,c._sendPacket(u);else{let d=new a.ErrorWithReasonCode(`Connection refused: ${o.ReasonCodes[t]}`,t);c.emit("error",d)}})};r.default=l}),Uu=ye(r=>{var m,b,w,_,A,y,v,L,P,S,C,j,Q,ee,ae,O,K,J,W,be,ce,le,Se,Y,X,x,te,de,U,xi,z,M,re,V,As,q,he,oe,Dt,Ft,Ii,jr,Br,We,Ti,mr,Wt,Oi,Oe;pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0}),r.LRUCache=void 0;var a=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,o=new Set,l=typeof Le=="object"&&Le?Le:{},c=(h,f,g,E)=>{typeof l.emitWarning=="function"?l.emitWarning(h,f,g,E):console.error(`[${g}] ${f}: ${h}`)},i=globalThis.AbortController,e=globalThis.AbortSignal;if(typeof i>"u"){e=class{constructor(){Ve(this,"onabort");Ve(this,"_onabort",[]);Ve(this,"reason");Ve(this,"aborted",!1)}addEventListener(g,E){this._onabort.push(E)}},i=class{constructor(){Ve(this,"signal",new e);f()}abort(g){var E,I;if(!this.signal.aborted){this.signal.reason=g,this.signal.aborted=!0;for(let N of this.signal._onabort)N(g);(I=(E=this.signal).onabort)==null||I.call(E,g)}}};let h=((m=l.env)==null?void 0:m.LRU_CACHE_IGNORE_AC_WARNING)!=="1",f=()=>{h&&(h=!1,c("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",f))}}var n=h=>!o.has(h),t=h=>h&&h===Math.floor(h)&&h>0&&isFinite(h),s=h=>t(h)?h<=Math.pow(2,8)?Uint8Array:h<=Math.pow(2,16)?Uint16Array:h<=Math.pow(2,32)?Uint32Array:h<=Number.MAX_SAFE_INTEGER?u:null:null,u=class extends Array{constructor(h){super(h),this.fill(0)}},d=(b=class{constructor(f,g){Ve(this,"heap");Ve(this,"length");if(!T(b,w))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new g(f),this.length=0}static create(f){let g=s(f);if(!g)return[];Te(b,w,!0);let E=new b(f,g);return Te(b,w,!1),E}push(f){this.heap[this.length++]=f}pop(){return this.heap[--this.length]}},w=new WeakMap,Me(b,w,!1),b),p=(Oe=class{constructor(f){Me(this,U);Me(this,y);Me(this,v);Me(this,L);Me(this,P);Me(this,S);Me(this,C);Ve(this,"ttl");Ve(this,"ttlResolution");Ve(this,"ttlAutopurge");Ve(this,"updateAgeOnGet");Ve(this,"updateAgeOnHas");Ve(this,"allowStale");Ve(this,"noDisposeOnSet");Ve(this,"noUpdateTTL");Ve(this,"maxEntrySize");Ve(this,"sizeCalculation");Ve(this,"noDeleteOnFetchRejection");Ve(this,"noDeleteOnStaleGet");Ve(this,"allowStaleOnFetchAbort");Ve(this,"allowStaleOnFetchRejection");Ve(this,"ignoreFetchAbort");Me(this,j);Me(this,Q);Me(this,ee);Me(this,ae);Me(this,O);Me(this,K);Me(this,J);Me(this,W);Me(this,be);Me(this,ce);Me(this,le);Me(this,Se);Me(this,Y);Me(this,X);Me(this,x);Me(this,te);Me(this,de);Me(this,z,()=>{});Me(this,M,()=>{});Me(this,re,()=>{});Me(this,V,()=>!1);Me(this,q,f=>{});Me(this,he,(f,g,E)=>{});Me(this,oe,(f,g,E,I)=>{if(E||I)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});Ve(this,_,"LRUCache");let{max:g=0,ttl:E,ttlResolution:I=1,ttlAutopurge:N,updateAgeOnGet:G,updateAgeOnHas:ve,allowStale:Ee,dispose:Ie,disposeAfter:je,noDisposeOnSet:Re,noUpdateTTL:yt,maxSize:ut=0,maxEntrySize:ft=0,sizeCalculation:$e,fetchMethod:Ze,memoMethod:Pe,noDeleteOnFetchRejection:Fe,noDeleteOnStaleGet:rt,allowStaleOnFetchRejection:Qe,allowStaleOnFetchAbort:ot,ignoreFetchAbort:Lt}=f;if(g!==0&&!t(g))throw new TypeError("max option must be a nonnegative integer");let k=g?s(g):Array;if(!k)throw new Error("invalid max value: "+g);if(Te(this,y,g),Te(this,v,ut),this.maxEntrySize=ft||T(this,v),this.sizeCalculation=$e,this.sizeCalculation){if(!T(this,v)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(Pe!==void 0&&typeof Pe!="function")throw new TypeError("memoMethod must be a function if defined");if(Te(this,C,Pe),Ze!==void 0&&typeof Ze!="function")throw new TypeError("fetchMethod must be a function if specified");if(Te(this,S,Ze),Te(this,te,!!Ze),Te(this,ee,new Map),Te(this,ae,new Array(g).fill(void 0)),Te(this,O,new Array(g).fill(void 0)),Te(this,K,new k(g)),Te(this,J,new k(g)),Te(this,W,0),Te(this,be,0),Te(this,ce,d.create(g)),Te(this,j,0),Te(this,Q,0),typeof Ie=="function"&&Te(this,L,Ie),typeof je=="function"?(Te(this,P,je),Te(this,le,[])):(Te(this,P,void 0),Te(this,le,void 0)),Te(this,x,!!T(this,L)),Te(this,de,!!T(this,P)),this.noDisposeOnSet=!!Re,this.noUpdateTTL=!!yt,this.noDeleteOnFetchRejection=!!Fe,this.allowStaleOnFetchRejection=!!Qe,this.allowStaleOnFetchAbort=!!ot,this.ignoreFetchAbort=!!Lt,this.maxEntrySize!==0){if(T(this,v)!==0&&!t(T(this,v)))throw new TypeError("maxSize must be a positive integer if specified");if(!t(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Ce(this,U,As).call(this)}if(this.allowStale=!!Ee,this.noDeleteOnStaleGet=!!rt,this.updateAgeOnGet=!!G,this.updateAgeOnHas=!!ve,this.ttlResolution=t(I)||I===0?I:1,this.ttlAutopurge=!!N,this.ttl=E||0,this.ttl){if(!t(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Ce(this,U,xi).call(this)}if(T(this,y)===0&&this.ttl===0&&T(this,v)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!T(this,y)&&!T(this,v)){let R="LRU_CACHE_UNBOUNDED";n(R)&&(o.add(R),c("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",R,Oe))}}static unsafeExposeInternals(f){return{starts:T(f,Y),ttls:T(f,X),sizes:T(f,Se),keyMap:T(f,ee),keyList:T(f,ae),valList:T(f,O),next:T(f,K),prev:T(f,J),get head(){return T(f,W)},get tail(){return T(f,be)},free:T(f,ce),isBackgroundFetch:g=>{var E;return Ce(E=f,U,We).call(E,g)},backgroundFetch:(g,E,I,N)=>{var G;return Ce(G=f,U,Br).call(G,g,E,I,N)},moveToTail:g=>{var E;return Ce(E=f,U,mr).call(E,g)},indexes:g=>{var E;return Ce(E=f,U,Dt).call(E,g)},rindexes:g=>{var E;return Ce(E=f,U,Ft).call(E,g)},isStale:g=>{var E;return T(E=f,V).call(E,g)}}}get max(){return T(this,y)}get maxSize(){return T(this,v)}get calculatedSize(){return T(this,Q)}get size(){return T(this,j)}get fetchMethod(){return T(this,S)}get memoMethod(){return T(this,C)}get dispose(){return T(this,L)}get disposeAfter(){return T(this,P)}getRemainingTTL(f){return T(this,ee).has(f)?1/0:0}*entries(){for(let f of Ce(this,U,Dt).call(this))T(this,O)[f]!==void 0&&T(this,ae)[f]!==void 0&&!Ce(this,U,We).call(this,T(this,O)[f])&&(yield[T(this,ae)[f],T(this,O)[f]])}*rentries(){for(let f of Ce(this,U,Ft).call(this))T(this,O)[f]!==void 0&&T(this,ae)[f]!==void 0&&!Ce(this,U,We).call(this,T(this,O)[f])&&(yield[T(this,ae)[f],T(this,O)[f]])}*keys(){for(let f of Ce(this,U,Dt).call(this)){let g=T(this,ae)[f];g!==void 0&&!Ce(this,U,We).call(this,T(this,O)[f])&&(yield g)}}*rkeys(){for(let f of Ce(this,U,Ft).call(this)){let g=T(this,ae)[f];g!==void 0&&!Ce(this,U,We).call(this,T(this,O)[f])&&(yield g)}}*values(){for(let f of Ce(this,U,Dt).call(this))T(this,O)[f]!==void 0&&!Ce(this,U,We).call(this,T(this,O)[f])&&(yield T(this,O)[f])}*rvalues(){for(let f of Ce(this,U,Ft).call(this))T(this,O)[f]!==void 0&&!Ce(this,U,We).call(this,T(this,O)[f])&&(yield T(this,O)[f])}[(A=Symbol.iterator,_=Symbol.toStringTag,A)](){return this.entries()}find(f,g={}){for(let E of Ce(this,U,Dt).call(this)){let I=T(this,O)[E],N=Ce(this,U,We).call(this,I)?I.__staleWhileFetching:I;if(N!==void 0&&f(N,T(this,ae)[E],this))return this.get(T(this,ae)[E],g)}}forEach(f,g=this){for(let E of Ce(this,U,Dt).call(this)){let I=T(this,O)[E],N=Ce(this,U,We).call(this,I)?I.__staleWhileFetching:I;N!==void 0&&f.call(g,N,T(this,ae)[E],this)}}rforEach(f,g=this){for(let E of Ce(this,U,Ft).call(this)){let I=T(this,O)[E],N=Ce(this,U,We).call(this,I)?I.__staleWhileFetching:I;N!==void 0&&f.call(g,N,T(this,ae)[E],this)}}purgeStale(){let f=!1;for(let g of Ce(this,U,Ft).call(this,{allowStale:!0}))T(this,V).call(this,g)&&(Ce(this,U,Wt).call(this,T(this,ae)[g],"expire"),f=!0);return f}info(f){let g=T(this,ee).get(f);if(g===void 0)return;let E=T(this,O)[g],I=Ce(this,U,We).call(this,E)?E.__staleWhileFetching:E;if(I===void 0)return;let N={value:I};if(T(this,X)&&T(this,Y)){let G=T(this,X)[g],ve=T(this,Y)[g];if(G&&ve){let Ee=G-(a.now()-ve);N.ttl=Ee,N.start=Date.now()}}return T(this,Se)&&(N.size=T(this,Se)[g]),N}dump(){let f=[];for(let g of Ce(this,U,Dt).call(this,{allowStale:!0})){let E=T(this,ae)[g],I=T(this,O)[g],N=Ce(this,U,We).call(this,I)?I.__staleWhileFetching:I;if(N===void 0||E===void 0)continue;let G={value:N};if(T(this,X)&&T(this,Y)){G.ttl=T(this,X)[g];let ve=a.now()-T(this,Y)[g];G.start=Math.floor(Date.now()-ve)}T(this,Se)&&(G.size=T(this,Se)[g]),f.unshift([E,G])}return f}load(f){this.clear();for(let[g,E]of f){if(E.start){let I=Date.now()-E.start;E.start=a.now()-I}this.set(g,E.value,E)}}set(f,g,E={}){var yt,ut,ft,$e,Ze;if(g===void 0)return this.delete(f),this;let{ttl:I=this.ttl,start:N,noDisposeOnSet:G=this.noDisposeOnSet,sizeCalculation:ve=this.sizeCalculation,status:Ee}=E,{noUpdateTTL:Ie=this.noUpdateTTL}=E,je=T(this,oe).call(this,f,g,E.size||0,ve);if(this.maxEntrySize&&je>this.maxEntrySize)return Ee&&(Ee.set="miss",Ee.maxEntrySizeExceeded=!0),Ce(this,U,Wt).call(this,f,"set"),this;let Re=T(this,j)===0?void 0:T(this,ee).get(f);if(Re===void 0)Re=T(this,j)===0?T(this,be):T(this,ce).length!==0?T(this,ce).pop():T(this,j)===T(this,y)?Ce(this,U,jr).call(this,!1):T(this,j),T(this,ae)[Re]=f,T(this,O)[Re]=g,T(this,ee).set(f,Re),T(this,K)[T(this,be)]=Re,T(this,J)[Re]=T(this,be),Te(this,be,Re),Sr(this,j)._++,T(this,he).call(this,Re,je,Ee),Ee&&(Ee.set="add"),Ie=!1;else{Ce(this,U,mr).call(this,Re);let Pe=T(this,O)[Re];if(g!==Pe){if(T(this,te)&&Ce(this,U,We).call(this,Pe)){Pe.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:Fe}=Pe;Fe!==void 0&&!G&&(T(this,x)&&((yt=T(this,L))==null||yt.call(this,Fe,f,"set")),T(this,de)&&((ut=T(this,le))==null||ut.push([Fe,f,"set"])))}else G||(T(this,x)&&((ft=T(this,L))==null||ft.call(this,Pe,f,"set")),T(this,de)&&(($e=T(this,le))==null||$e.push([Pe,f,"set"])));if(T(this,q).call(this,Re),T(this,he).call(this,Re,je,Ee),T(this,O)[Re]=g,Ee){Ee.set="replace";let Fe=Pe&&Ce(this,U,We).call(this,Pe)?Pe.__staleWhileFetching:Pe;Fe!==void 0&&(Ee.oldValue=Fe)}}else Ee&&(Ee.set="update")}if(I!==0&&!T(this,X)&&Ce(this,U,xi).call(this),T(this,X)&&(Ie||T(this,re).call(this,Re,I,N),Ee&&T(this,M).call(this,Ee,Re)),!G&&T(this,de)&&T(this,le)){let Pe=T(this,le),Fe;for(;Fe=Pe==null?void 0:Pe.shift();)(Ze=T(this,P))==null||Ze.call(this,...Fe)}return this}pop(){var f;try{for(;T(this,j);){let g=T(this,O)[T(this,W)];if(Ce(this,U,jr).call(this,!0),Ce(this,U,We).call(this,g)){if(g.__staleWhileFetching)return g.__staleWhileFetching}else if(g!==void 0)return g}}finally{if(T(this,de)&&T(this,le)){let g=T(this,le),E;for(;E=g==null?void 0:g.shift();)(f=T(this,P))==null||f.call(this,...E)}}}has(f,g={}){let{updateAgeOnHas:E=this.updateAgeOnHas,status:I}=g,N=T(this,ee).get(f);if(N!==void 0){let G=T(this,O)[N];if(Ce(this,U,We).call(this,G)&&G.__staleWhileFetching===void 0)return!1;if(T(this,V).call(this,N))I&&(I.has="stale",T(this,M).call(this,I,N));else return E&&T(this,z).call(this,N),I&&(I.has="hit",T(this,M).call(this,I,N)),!0}else I&&(I.has="miss");return!1}peek(f,g={}){let{allowStale:E=this.allowStale}=g,I=T(this,ee).get(f);if(I===void 0||!E&&T(this,V).call(this,I))return;let N=T(this,O)[I];return Ce(this,U,We).call(this,N)?N.__staleWhileFetching:N}async fetch(f,g={}){let{allowStale:E=this.allowStale,updateAgeOnGet:I=this.updateAgeOnGet,noDeleteOnStaleGet:N=this.noDeleteOnStaleGet,ttl:G=this.ttl,noDisposeOnSet:ve=this.noDisposeOnSet,size:Ee=0,sizeCalculation:Ie=this.sizeCalculation,noUpdateTTL:je=this.noUpdateTTL,noDeleteOnFetchRejection:Re=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:yt=this.allowStaleOnFetchRejection,ignoreFetchAbort:ut=this.ignoreFetchAbort,allowStaleOnFetchAbort:ft=this.allowStaleOnFetchAbort,context:$e,forceRefresh:Ze=!1,status:Pe,signal:Fe}=g;if(!T(this,te))return Pe&&(Pe.fetch="get"),this.get(f,{allowStale:E,updateAgeOnGet:I,noDeleteOnStaleGet:N,status:Pe});let rt={allowStale:E,updateAgeOnGet:I,noDeleteOnStaleGet:N,ttl:G,noDisposeOnSet:ve,size:Ee,sizeCalculation:Ie,noUpdateTTL:je,noDeleteOnFetchRejection:Re,allowStaleOnFetchRejection:yt,allowStaleOnFetchAbort:ft,ignoreFetchAbort:ut,status:Pe,signal:Fe},Qe=T(this,ee).get(f);if(Qe===void 0){Pe&&(Pe.fetch="miss");let ot=Ce(this,U,Br).call(this,f,Qe,rt,$e);return ot.__returned=ot}else{let ot=T(this,O)[Qe];if(Ce(this,U,We).call(this,ot)){let _e=E&&ot.__staleWhileFetching!==void 0;return Pe&&(Pe.fetch="inflight",_e&&(Pe.returnedStale=!0)),_e?ot.__staleWhileFetching:ot.__returned=ot}let Lt=T(this,V).call(this,Qe);if(!Ze&&!Lt)return Pe&&(Pe.fetch="hit"),Ce(this,U,mr).call(this,Qe),I&&T(this,z).call(this,Qe),Pe&&T(this,M).call(this,Pe,Qe),ot;let k=Ce(this,U,Br).call(this,f,Qe,rt,$e),R=k.__staleWhileFetching!==void 0&&E;return Pe&&(Pe.fetch=Lt?"stale":"refresh",R&&Lt&&(Pe.returnedStale=!0)),R?k.__staleWhileFetching:k.__returned=k}}async forceFetch(f,g={}){let E=await this.fetch(f,g);if(E===void 0)throw new Error("fetch() returned undefined");return E}memo(f,g={}){let E=T(this,C);if(!E)throw new Error("no memoMethod provided to constructor");let{context:I,forceRefresh:N,...G}=g,ve=this.get(f,G);if(!N&&ve!==void 0)return ve;let Ee=E(f,ve,{options:G,context:I});return this.set(f,Ee,G),Ee}get(f,g={}){let{allowStale:E=this.allowStale,updateAgeOnGet:I=this.updateAgeOnGet,noDeleteOnStaleGet:N=this.noDeleteOnStaleGet,status:G}=g,ve=T(this,ee).get(f);if(ve!==void 0){let Ee=T(this,O)[ve],Ie=Ce(this,U,We).call(this,Ee);return G&&T(this,M).call(this,G,ve),T(this,V).call(this,ve)?(G&&(G.get="stale"),Ie?(G&&E&&Ee.__staleWhileFetching!==void 0&&(G.returnedStale=!0),E?Ee.__staleWhileFetching:void 0):(N||Ce(this,U,Wt).call(this,f,"expire"),G&&E&&(G.returnedStale=!0),E?Ee:void 0)):(G&&(G.get="hit"),Ie?Ee.__staleWhileFetching:(Ce(this,U,mr).call(this,ve),I&&T(this,z).call(this,ve),Ee))}else G&&(G.get="miss")}delete(f){return Ce(this,U,Wt).call(this,f,"delete")}clear(){return Ce(this,U,Oi).call(this,"delete")}},y=new WeakMap,v=new WeakMap,L=new WeakMap,P=new WeakMap,S=new WeakMap,C=new WeakMap,j=new WeakMap,Q=new WeakMap,ee=new WeakMap,ae=new WeakMap,O=new WeakMap,K=new WeakMap,J=new WeakMap,W=new WeakMap,be=new WeakMap,ce=new WeakMap,le=new WeakMap,Se=new WeakMap,Y=new WeakMap,X=new WeakMap,x=new WeakMap,te=new WeakMap,de=new WeakMap,U=new WeakSet,xi=function(){let f=new u(T(this,y)),g=new u(T(this,y));Te(this,X,f),Te(this,Y,g),Te(this,re,(N,G,ve=a.now())=>{if(g[N]=G!==0?ve:0,f[N]=G,G!==0&&this.ttlAutopurge){let Ee=setTimeout(()=>{T(this,V).call(this,N)&&Ce(this,U,Wt).call(this,T(this,ae)[N],"expire")},G+1);Ee.unref&&Ee.unref()}}),Te(this,z,N=>{g[N]=f[N]!==0?a.now():0}),Te(this,M,(N,G)=>{if(f[G]){let ve=f[G],Ee=g[G];if(!ve||!Ee)return;N.ttl=ve,N.start=Ee,N.now=E||I();let Ie=N.now-Ee;N.remainingTTL=ve-Ie}});let E=0,I=()=>{let N=a.now();if(this.ttlResolution>0){E=N;let G=setTimeout(()=>E=0,this.ttlResolution);G.unref&&G.unref()}return N};this.getRemainingTTL=N=>{let G=T(this,ee).get(N);if(G===void 0)return 0;let ve=f[G],Ee=g[G];if(!ve||!Ee)return 1/0;let Ie=(E||I())-Ee;return ve-Ie},Te(this,V,N=>{let G=g[N],ve=f[N];return!!ve&&!!G&&(E||I())-G>ve})},z=new WeakMap,M=new WeakMap,re=new WeakMap,V=new WeakMap,As=function(){let f=new u(T(this,y));Te(this,Q,0),Te(this,Se,f),Te(this,q,g=>{Te(this,Q,T(this,Q)-f[g]),f[g]=0}),Te(this,oe,(g,E,I,N)=>{if(Ce(this,U,We).call(this,E))return 0;if(!t(I))if(N){if(typeof N!="function")throw new TypeError("sizeCalculation must be a function");if(I=N(E,g),!t(I))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return I}),Te(this,he,(g,E,I)=>{if(f[g]=E,T(this,v)){let N=T(this,v)-f[g];for(;T(this,Q)>N;)Ce(this,U,jr).call(this,!0)}Te(this,Q,T(this,Q)+f[g]),I&&(I.entrySize=E,I.totalCalculatedSize=T(this,Q))})},q=new WeakMap,he=new WeakMap,oe=new WeakMap,Dt=function*({allowStale:f=this.allowStale}={}){if(T(this,j))for(let g=T(this,be);!(!Ce(this,U,Ii).call(this,g)||((f||!T(this,V).call(this,g))&&(yield g),g===T(this,W)));)g=T(this,J)[g]},Ft=function*({allowStale:f=this.allowStale}={}){if(T(this,j))for(let g=T(this,W);!(!Ce(this,U,Ii).call(this,g)||((f||!T(this,V).call(this,g))&&(yield g),g===T(this,be)));)g=T(this,K)[g]},Ii=function(f){return f!==void 0&&T(this,ee).get(T(this,ae)[f])===f},jr=function(f){var N,G;let g=T(this,W),E=T(this,ae)[g],I=T(this,O)[g];return T(this,te)&&Ce(this,U,We).call(this,I)?I.__abortController.abort(new Error("evicted")):(T(this,x)||T(this,de))&&(T(this,x)&&((N=T(this,L))==null||N.call(this,I,E,"evict")),T(this,de)&&((G=T(this,le))==null||G.push([I,E,"evict"]))),T(this,q).call(this,g),f&&(T(this,ae)[g]=void 0,T(this,O)[g]=void 0,T(this,ce).push(g)),T(this,j)===1?(Te(this,W,Te(this,be,0)),T(this,ce).length=0):Te(this,W,T(this,K)[g]),T(this,ee).delete(E),Sr(this,j)._--,g},Br=function(f,g,E,I){let N=g===void 0?void 0:T(this,O)[g];if(Ce(this,U,We).call(this,N))return N;let G=new i,{signal:ve}=E;ve==null||ve.addEventListener("abort",()=>G.abort(ve.reason),{signal:G.signal});let Ee={signal:G.signal,options:E,context:I},Ie=($e,Ze=!1)=>{let{aborted:Pe}=G.signal,Fe=E.ignoreFetchAbort&&$e!==void 0;if(E.status&&(Pe&&!Ze?(E.status.fetchAborted=!0,E.status.fetchError=G.signal.reason,Fe&&(E.status.fetchAbortIgnored=!0)):E.status.fetchResolved=!0),Pe&&!Fe&&!Ze)return Re(G.signal.reason);let rt=ut;return T(this,O)[g]===ut&&($e===void 0?rt.__staleWhileFetching?T(this,O)[g]=rt.__staleWhileFetching:Ce(this,U,Wt).call(this,f,"fetch"):(E.status&&(E.status.fetchUpdated=!0),this.set(f,$e,Ee.options))),$e},je=$e=>(E.status&&(E.status.fetchRejected=!0,E.status.fetchError=$e),Re($e)),Re=$e=>{let{aborted:Ze}=G.signal,Pe=Ze&&E.allowStaleOnFetchAbort,Fe=Pe||E.allowStaleOnFetchRejection,rt=Fe||E.noDeleteOnFetchRejection,Qe=ut;if(T(this,O)[g]===ut&&(!rt||Qe.__staleWhileFetching===void 0?Ce(this,U,Wt).call(this,f,"fetch"):Pe||(T(this,O)[g]=Qe.__staleWhileFetching)),Fe)return E.status&&Qe.__staleWhileFetching!==void 0&&(E.status.returnedStale=!0),Qe.__staleWhileFetching;if(Qe.__returned===Qe)throw $e},yt=($e,Ze)=>{var Fe;let Pe=(Fe=T(this,S))==null?void 0:Fe.call(this,f,N,Ee);Pe&&Pe instanceof Promise&&Pe.then(rt=>$e(rt===void 0?void 0:rt),Ze),G.signal.addEventListener("abort",()=>{(!E.ignoreFetchAbort||E.allowStaleOnFetchAbort)&&($e(void 0),E.allowStaleOnFetchAbort&&($e=rt=>Ie(rt,!0)))})};E.status&&(E.status.fetchDispatched=!0);let ut=new Promise(yt).then(Ie,je),ft=Object.assign(ut,{__abortController:G,__staleWhileFetching:N,__returned:void 0});return g===void 0?(this.set(f,ft,{...Ee.options,status:void 0}),g=T(this,ee).get(f)):T(this,O)[g]=ft,ft},We=function(f){if(!T(this,te))return!1;let g=f;return!!g&&g instanceof Promise&&g.hasOwnProperty("__staleWhileFetching")&&g.__abortController instanceof i},Ti=function(f,g){T(this,J)[g]=f,T(this,K)[f]=g},mr=function(f){f!==T(this,be)&&(f===T(this,W)?Te(this,W,T(this,K)[f]):Ce(this,U,Ti).call(this,T(this,J)[f],T(this,K)[f]),Ce(this,U,Ti).call(this,T(this,be),f),Te(this,be,f))},Wt=function(f,g){var I,N,G,ve;let E=!1;if(T(this,j)!==0){let Ee=T(this,ee).get(f);if(Ee!==void 0)if(E=!0,T(this,j)===1)Ce(this,U,Oi).call(this,g);else{T(this,q).call(this,Ee);let Ie=T(this,O)[Ee];if(Ce(this,U,We).call(this,Ie)?Ie.__abortController.abort(new Error("deleted")):(T(this,x)||T(this,de))&&(T(this,x)&&((I=T(this,L))==null||I.call(this,Ie,f,g)),T(this,de)&&((N=T(this,le))==null||N.push([Ie,f,g]))),T(this,ee).delete(f),T(this,ae)[Ee]=void 0,T(this,O)[Ee]=void 0,Ee===T(this,be))Te(this,be,T(this,J)[Ee]);else if(Ee===T(this,W))Te(this,W,T(this,K)[Ee]);else{let je=T(this,J)[Ee];T(this,K)[je]=T(this,K)[Ee];let Re=T(this,K)[Ee];T(this,J)[Re]=T(this,J)[Ee]}Sr(this,j)._--,T(this,ce).push(Ee)}}if(T(this,de)&&((G=T(this,le))!=null&&G.length)){let Ee=T(this,le),Ie;for(;Ie=Ee==null?void 0:Ee.shift();)(ve=T(this,P))==null||ve.call(this,...Ie)}return E},Oi=function(f){var g,E,I;for(let N of Ce(this,U,Ft).call(this,{allowStale:!0})){let G=T(this,O)[N];if(Ce(this,U,We).call(this,G))G.__abortController.abort(new Error("deleted"));else{let ve=T(this,ae)[N];T(this,x)&&((g=T(this,L))==null||g.call(this,G,ve,f)),T(this,de)&&((E=T(this,le))==null||E.push([G,ve,f]))}}if(T(this,ee).clear(),T(this,O).fill(void 0),T(this,ae).fill(void 0),T(this,X)&&T(this,Y)&&(T(this,X).fill(0),T(this,Y).fill(0)),T(this,Se)&&T(this,Se).fill(0),Te(this,W,0),Te(this,be,0),T(this,ce).length=0,Te(this,Q,0),Te(this,j,0),T(this,de)&&T(this,le)){let N=T(this,le),G;for(;G=N==null?void 0:N.shift();)(I=T(this,P))==null||I.call(this,...G)}},Oe);r.LRUCache=p}),Bt=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.ContainerIterator=r.Container=r.Base=void 0;var a=class{constructor(c=0){this.iteratorType=c}equals(c){return this.o===c.o}};r.ContainerIterator=a;var o=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};r.Base=o;var l=class extends o{};r.Container=l}),Du=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=Bt(),o=class extends a.Base{constructor(c=[]){super(),this.S=[];let i=this;c.forEach(function(e){i.push(e)})}clear(){this.i=0,this.S=[]}push(c){return this.S.push(c),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},l=o;r.default=l}),Fu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=Bt(),o=class extends a.Base{constructor(c=[]){super(),this.j=0,this.q=[];let i=this;c.forEach(function(e){i.push(e)})}clear(){this.q=[],this.i=this.j=0}push(c){let i=this.q.length;if(this.j/i>.5&&this.j+this.i>=i&&i>4096){let e=this.i;for(let n=0;n<e;++n)this.q[n]=this.q[this.j+n];this.j=0,this.q[this.i]=c}else this.q[this.j+this.i]=c;return++this.i}pop(){if(this.i===0)return;let c=this.q[this.j++];return this.i-=1,c}front(){if(this.i!==0)return this.q[this.j]}},l=o;r.default=l}),Wu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=Bt(),o=class extends a.Base{constructor(c=[],i=function(n,t){return n>t?-1:n<t?1:0},e=!0){if(super(),this.v=i,Array.isArray(c))this.C=e?[...c]:c;else{this.C=[];let t=this;c.forEach(function(s){t.C.push(s)})}this.i=this.C.length;let n=this.i>>1;for(let t=this.i-1>>1;t>=0;--t)this.k(t,n)}m(c){let i=this.C[c];for(;c>0;){let e=c-1>>1,n=this.C[e];if(this.v(n,i)<=0)break;this.C[c]=n,c=e}this.C[c]=i}k(c,i){let e=this.C[c];for(;c<i;){let n=c<<1|1,t=n+1,s=this.C[n];if(t<this.i&&this.v(s,this.C[t])>0&&(n=t,s=this.C[t]),this.v(s,e)>=0)break;this.C[c]=s,c=n}this.C[c]=e}clear(){this.i=0,this.C.length=0}push(c){this.C.push(c),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let c=this.C[0],i=this.C.pop();return this.i-=1,this.i&&(this.C[0]=i,this.k(0,this.i>>1)),c}top(){return this.C[0]}find(c){return this.C.indexOf(c)>=0}remove(c){let i=this.C.indexOf(c);return i<0?!1:(i===0?this.pop():i===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(i,1,this.C.pop()),this.i-=1,this.m(i),this.k(i,this.i>>1)),!0)}updateItem(c){let i=this.C.indexOf(c);return i<0?!1:(this.m(i),this.k(i,this.i>>1),!0)}toArray(){return[...this.C]}},l=o;r.default=l}),Ki=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=Bt(),o=class extends a.Container{},l=o;r.default=l}),Mt=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.throwIteratorAccessError=a;function a(){throw new RangeError("Iterator access denied!")}}),Cs=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.RandomIterator=void 0;var a=Bt(),o=Mt(),l=class extends a.ContainerIterator{constructor(c,i){super(i),this.o=c,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,o.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,o.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,o.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,o.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(c){this.container.setElementByPos(this.o,c)}};r.RandomIterator=l}),$u=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=l(Ki()),o=Cs();function l(n){return n&&n.t?n:{default:n}}var c=class xs extends o.RandomIterator{constructor(t,s,u){super(t,u),this.container=s}copy(){return new xs(this.o,this.container,this.iteratorType)}},i=class extends a.default{constructor(n=[],t=!0){if(super(),Array.isArray(n))this.J=t?[...n]:n,this.i=n.length;else{this.J=[];let s=this;n.forEach(function(u){s.pushBack(u)})}}clear(){this.i=0,this.J.length=0}begin(){return new c(0,this)}end(){return new c(this.i,this)}rBegin(){return new c(this.i-1,this,1)}rEnd(){return new c(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;return this.J[n]}eraseElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;return this.J.splice(n,1),this.i-=1,this.i}eraseElementByValue(n){let t=0;for(let s=0;s<this.i;++s)this.J[s]!==n&&(this.J[t++]=this.J[s]);return this.i=this.J.length=t,this.i}eraseElementByIterator(n){let t=n.o;return n=n.next(),this.eraseElementByPos(t),n}pushBack(n){return this.J.push(n),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(n,t){if(n<0||n>this.i-1)throw new RangeError;this.J[n]=t}insert(n,t,s=1){if(n<0||n>this.i)throw new RangeError;return this.J.splice(n,0,...new Array(s).fill(t)),this.i+=s,this.i}find(n){for(let t=0;t<this.i;++t)if(this.J[t]===n)return new c(t,this);return this.end()}reverse(){this.J.reverse()}unique(){let n=1;for(let t=1;t<this.i;++t)this.J[t]!==this.J[t-1]&&(this.J[n++]=this.J[t]);return this.i=this.J.length=n,this.i}sort(n){this.J.sort(n)}forEach(n){for(let t=0;t<this.i;++t)n(this.J[t],t,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},e=i;r.default=e}),Vu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=c(Ki()),o=Bt(),l=Mt();function c(t){return t&&t.t?t:{default:t}}var i=class Is extends o.ContainerIterator{constructor(s,u,d,p){super(p),this.o=s,this.h=u,this.container=d,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o.l}set pointer(s){this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o.l=s}copy(){return new Is(this.o,this.h,this.container,this.iteratorType)}},e=class extends a.default{constructor(t=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let s=this;t.forEach(function(u){s.pushBack(u)})}V(t){let{L:s,B:u}=t;s.B=u,u.L=s,t===this.p&&(this.p=u),t===this._&&(this._=s),this.i-=1}G(t,s){let u=s.B,d={l:t,L:s,B:u};s.B=d,u.L=d,s===this.h&&(this.p=d),u===this.h&&(this._=d),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new i(this.p,this.h,this)}end(){return new i(this.h,this.h,this)}rBegin(){return new i(this._,this.h,this,1)}rEnd(){return new i(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let s=this.p;for(;t--;)s=s.B;return s.l}eraseElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let s=this.p;for(;t--;)s=s.B;return this.V(s),this.i}eraseElementByValue(t){let s=this.p;for(;s!==this.h;)s.l===t&&this.V(s),s=s.B;return this.i}eraseElementByIterator(t){let s=t.o;return s===this.h&&(0,l.throwIteratorAccessError)(),t=t.next(),this.V(s),t}pushBack(t){return this.G(t,this._),this.i}popBack(){if(this.i===0)return;let t=this._.l;return this.V(this._),t}pushFront(t){return this.G(t,this.h),this.i}popFront(){if(this.i===0)return;let t=this.p.l;return this.V(this.p),t}setElementByPos(t,s){if(t<0||t>this.i-1)throw new RangeError;let u=this.p;for(;t--;)u=u.B;u.l=s}insert(t,s,u=1){if(t<0||t>this.i)throw new RangeError;if(u<=0)return this.i;if(t===0)for(;u--;)this.pushFront(s);else if(t===this.i)for(;u--;)this.pushBack(s);else{let d=this.p;for(let m=1;m<t;++m)d=d.B;let p=d.B;for(this.i+=u;u--;)d.B={l:s,L:d},d.B.L=d,d=d.B;d.B=p,p.L=d}return this.i}find(t){let s=this.p;for(;s!==this.h;){if(s.l===t)return new i(s,this.h,this);s=s.B}return this.end()}reverse(){if(this.i<=1)return;let t=this.p,s=this._,u=0;for(;u<<1<this.i;){let d=t.l;t.l=s.l,s.l=d,t=t.B,s=s.L,u+=1}}unique(){if(this.i<=1)return this.i;let t=this.p;for(;t!==this.h;){let s=t;for(;s.B!==this.h&&s.l===s.B.l;)s=s.B,this.i-=1;t.B=s.B,t.B.L=t,t=t.B}return this.i}sort(t){if(this.i<=1)return;let s=[];this.forEach(function(d){s.push(d)}),s.sort(t);let u=this.p;s.forEach(function(d){u.l=d,u=u.B})}merge(t){let s=this;if(this.i===0)t.forEach(function(u){s.pushBack(u)});else{let u=this.p;t.forEach(function(d){for(;u!==s.h&&u.l<=d;)u=u.B;s.G(d,u.L)})}return this.i}forEach(t){let s=this.p,u=0;for(;s!==this.h;)t(s.l,u++,this),s=s.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let t=this.p;for(;t!==this.h;)yield t.l,t=t.B}).bind(this)()}},n=e;r.default=n}),Hu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=l(Ki()),o=Cs();function l(n){return n&&n.t?n:{default:n}}var c=class Ts extends o.RandomIterator{constructor(t,s,u){super(t,u),this.container=s}copy(){return new Ts(this.o,this.container,this.iteratorType)}},i=class extends a.default{constructor(n=[],t=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let s=(()=>{if(typeof n.length=="number")return n.length;if(typeof n.size=="number")return n.size;if(typeof n.size=="function")return n.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=t,this.P=Math.max(Math.ceil(s/this.F),1);for(let p=0;p<this.P;++p)this.A.push(new Array(this.F));let u=Math.ceil(s/this.F);this.j=this.R=(this.P>>1)-(u>>1),this.D=this.N=this.F-s%this.F>>1;let d=this;n.forEach(function(p){d.pushBack(p)})}T(){let n=[],t=Math.max(this.P>>1,1);for(let s=0;s<t;++s)n[s]=new Array(this.F);for(let s=this.j;s<this.P;++s)n[n.length]=this.A[s];for(let s=0;s<this.R;++s)n[n.length]=this.A[s];n[n.length]=[...this.A[this.R]],this.j=t,this.R=n.length-1;for(let s=0;s<t;++s)n[n.length]=new Array(this.F);this.A=n,this.P=n.length}O(n){let t=this.D+n+1,s=t%this.F,u=s-1,d=this.j+(t-s)/this.F;return s===0&&(d-=1),d%=this.P,u<0&&(u+=this.F),{curNodeBucketIndex:d,curNodePointerIndex:u}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new c(0,this)}end(){return new c(this.i,this)}rBegin(){return new c(this.i-1,this,1)}rEnd(){return new c(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(n){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=n,this.i}popBack(){if(this.i===0)return;let n=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,n}pushFront(n){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=n,this.i}popFront(){if(this.i===0)return;let n=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,n}getElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let{curNodeBucketIndex:t,curNodePointerIndex:s}=this.O(n);return this.A[t][s]}setElementByPos(n,t){if(n<0||n>this.i-1)throw new RangeError;let{curNodeBucketIndex:s,curNodePointerIndex:u}=this.O(n);this.A[s][u]=t}insert(n,t,s=1){if(n<0||n>this.i)throw new RangeError;if(n===0)for(;s--;)this.pushFront(t);else if(n===this.i)for(;s--;)this.pushBack(t);else{let u=[];for(let d=n;d<this.i;++d)u.push(this.getElementByPos(d));this.cut(n-1);for(let d=0;d<s;++d)this.pushBack(t);for(let d=0;d<u.length;++d)this.pushBack(u[d])}return this.i}cut(n){if(n<0)return this.clear(),0;let{curNodeBucketIndex:t,curNodePointerIndex:s}=this.O(n);return this.R=t,this.N=s,this.i=n+1,this.i}eraseElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;if(n===0)this.popFront();else if(n===this.i-1)this.popBack();else{let t=[];for(let u=n+1;u<this.i;++u)t.push(this.getElementByPos(u));this.cut(n),this.popBack();let s=this;t.forEach(function(u){s.pushBack(u)})}return this.i}eraseElementByValue(n){if(this.i===0)return 0;let t=[];for(let u=0;u<this.i;++u){let d=this.getElementByPos(u);d!==n&&t.push(d)}let s=t.length;for(let u=0;u<s;++u)this.setElementByPos(u,t[u]);return this.cut(s-1)}eraseElementByIterator(n){let t=n.o;return this.eraseElementByPos(t),n=n.next(),n}find(n){for(let t=0;t<this.i;++t)if(this.getElementByPos(t)===n)return new c(t,this);return this.end()}reverse(){let n=0,t=this.i-1;for(;n<t;){let s=this.getElementByPos(n);this.setElementByPos(n,this.getElementByPos(t)),this.setElementByPos(t,s),n+=1,t-=1}}unique(){if(this.i<=1)return this.i;let n=1,t=this.getElementByPos(0);for(let s=1;s<this.i;++s){let u=this.getElementByPos(s);u!==t&&(t=u,this.setElementByPos(n++,u))}for(;this.i>n;)this.popBack();return this.i}sort(n){let t=[];for(let s=0;s<this.i;++s)t.push(this.getElementByPos(s));t.sort(n);for(let s=0;s<this.i;++s)this.setElementByPos(s,t[s])}shrinkToFit(){if(this.i===0)return;let n=[];this.forEach(function(t){n.push(t)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let t=0;t<this.P;++t)this.A.push(new Array(this.F));for(let t=0;t<n.length;++t)this.pushBack(n[t])}forEach(n){for(let t=0;t<this.i;++t)n(this.getElementByPos(t),t,this)}[Symbol.iterator](){return(function*(){for(let n=0;n<this.i;++n)yield this.getElementByPos(n)}).bind(this)()}},e=i;r.default=e}),qu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.TreeNodeEnableIndex=r.TreeNode=void 0;var a=class{constructor(l,c){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=l,this.l=c}L(){let l=this;if(l.ee===1&&l.tt.tt===l)l=l.W;else if(l.U)for(l=l.U;l.W;)l=l.W;else{let c=l.tt;for(;c.U===l;)l=c,c=l.tt;l=c}return l}B(){let l=this;if(l.W){for(l=l.W;l.U;)l=l.U;return l}else{let c=l.tt;for(;c.W===l;)l=c,c=l.tt;return l.W!==c?c:l}}te(){let l=this.tt,c=this.W,i=c.U;return l.tt===this?l.tt=c:l.U===this?l.U=c:l.W=c,c.tt=l,c.U=this,this.tt=c,this.W=i,i&&(i.tt=this),c}se(){let l=this.tt,c=this.U,i=c.W;return l.tt===this?l.tt=c:l.U===this?l.U=c:l.W=c,c.tt=l,c.W=this,this.tt=c,this.U=i,i&&(i.tt=this),c}};r.TreeNode=a;var o=class extends a{constructor(){super(...arguments),this.rt=1}te(){let l=super.te();return this.ie(),l.ie(),l}se(){let l=super.se();return this.ie(),l.ie(),l}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};r.TreeNodeEnableIndex=o}),Os=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=qu(),o=Bt(),l=Mt(),c=class extends o.Container{constructor(e=function(t,s){return t<s?-1:t>s?1:0},n=!1){super(),this.Y=void 0,this.v=e,n?(this.re=a.TreeNodeEnableIndex,this.M=function(t,s,u){let d=this.ne(t,s,u);if(d){let p=d.tt;for(;p!==this.h;)p.rt+=1,p=p.tt;let m=this.he(d);if(m){let{parentNode:b,grandParent:w,curNode:_}=m;b.ie(),w.ie(),_.ie()}}return this.i},this.V=function(t){let s=this.fe(t);for(;s!==this.h;)s.rt-=1,s=s.tt}):(this.re=a.TreeNode,this.M=function(t,s,u){let d=this.ne(t,s,u);return d&&this.he(d),this.i},this.V=this.fe),this.h=new this.re}X(e,n){let t=this.h;for(;e;){let s=this.v(e.u,n);if(s<0)e=e.W;else if(s>0)t=e,e=e.U;else return e}return t}Z(e,n){let t=this.h;for(;e;)this.v(e.u,n)<=0?e=e.W:(t=e,e=e.U);return t}$(e,n){let t=this.h;for(;e;){let s=this.v(e.u,n);if(s<0)t=e,e=e.W;else if(s>0)e=e.U;else return e}return t}rr(e,n){let t=this.h;for(;e;)this.v(e.u,n)<0?(t=e,e=e.W):e=e.U;return t}ue(e){for(;;){let n=e.tt;if(n===this.h)return;if(e.ee===1){e.ee=0;return}if(e===n.U){let t=n.W;if(t.ee===1)t.ee=0,n.ee=1,n===this.Y?this.Y=n.te():n.te();else if(t.W&&t.W.ee===1){t.ee=n.ee,n.ee=0,t.W.ee=0,n===this.Y?this.Y=n.te():n.te();return}else t.U&&t.U.ee===1?(t.ee=1,t.U.ee=0,t.se()):(t.ee=1,e=n)}else{let t=n.U;if(t.ee===1)t.ee=0,n.ee=1,n===this.Y?this.Y=n.se():n.se();else if(t.U&&t.U.ee===1){t.ee=n.ee,n.ee=0,t.U.ee=0,n===this.Y?this.Y=n.se():n.se();return}else t.W&&t.W.ee===1?(t.ee=1,t.W.ee=0,t.te()):(t.ee=1,e=n)}}}fe(e){if(this.i===1)return this.clear(),this.h;let n=e;for(;n.U||n.W;){if(n.W)for(n=n.W;n.U;)n=n.U;else n=n.U;[e.u,n.u]=[n.u,e.u],[e.l,n.l]=[n.l,e.l],e=n}this.h.U===n?this.h.U=n.tt:this.h.W===n&&(this.h.W=n.tt),this.ue(n);let t=n.tt;return n===t.U?t.U=void 0:t.W=void 0,this.i-=1,this.Y.ee=0,t}oe(e,n){return e===void 0?!1:this.oe(e.U,n)||n(e)?!0:this.oe(e.W,n)}he(e){for(;;){let n=e.tt;if(n.ee===0)return;let t=n.tt;if(n===t.U){let s=t.W;if(s&&s.ee===1){if(s.ee=n.ee=0,t===this.Y)return;t.ee=1,e=t;continue}else if(e===n.W){if(e.ee=0,e.U&&(e.U.tt=n),e.W&&(e.W.tt=t),n.W=e.U,t.U=e.W,e.U=n,e.W=t,t===this.Y)this.Y=e,this.h.tt=e;else{let u=t.tt;u.U===t?u.U=e:u.W=e}return e.tt=t.tt,n.tt=e,t.tt=e,t.ee=1,{parentNode:n,grandParent:t,curNode:e}}else n.ee=0,t===this.Y?this.Y=t.se():t.se(),t.ee=1}else{let s=t.U;if(s&&s.ee===1){if(s.ee=n.ee=0,t===this.Y)return;t.ee=1,e=t;continue}else if(e===n.U){if(e.ee=0,e.U&&(e.U.tt=t),e.W&&(e.W.tt=n),t.W=e.U,n.U=e.W,e.U=t,e.W=n,t===this.Y)this.Y=e,this.h.tt=e;else{let u=t.tt;u.U===t?u.U=e:u.W=e}return e.tt=t.tt,n.tt=e,t.tt=e,t.ee=1,{parentNode:n,grandParent:t,curNode:e}}else n.ee=0,t===this.Y?this.Y=t.te():t.te(),t.ee=1}return}}ne(e,n,t){if(this.Y===void 0){this.i+=1,this.Y=new this.re(e,n),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let s,u=this.h.U,d=this.v(u.u,e);if(d===0){u.l=n;return}else if(d>0)u.U=new this.re(e,n),u.U.tt=u,s=u.U,this.h.U=s;else{let p=this.h.W,m=this.v(p.u,e);if(m===0){p.l=n;return}else if(m<0)p.W=new this.re(e,n),p.W.tt=p,s=p.W,this.h.W=s;else{if(t!==void 0){let b=t.o;if(b!==this.h){let w=this.v(b.u,e);if(w===0){b.l=n;return}else if(w>0){let _=b.L(),A=this.v(_.u,e);if(A===0){_.l=n;return}else A<0&&(s=new this.re(e,n),_.W===void 0?(_.W=s,s.tt=_):(b.U=s,s.tt=b))}}}if(s===void 0)for(s=this.Y;;){let b=this.v(s.u,e);if(b>0){if(s.U===void 0){s.U=new this.re(e,n),s.U.tt=s,s=s.U;break}s=s.U}else if(b<0){if(s.W===void 0){s.W=new this.re(e,n),s.W.tt=s,s=s.W;break}s=s.W}else{s.l=n;return}}}}return this.i+=1,s}I(e,n){for(;e;){let t=this.v(e.u,n);if(t<0)e=e.W;else if(t>0)e=e.U;else return e}return e||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(e,n){let t=e.o;if(t===this.h&&(0,l.throwIteratorAccessError)(),this.i===1)return t.u=n,!0;if(t===this.h.U)return this.v(t.B().u,n)>0?(t.u=n,!0):!1;if(t===this.h.W)return this.v(t.L().u,n)<0?(t.u=n,!0):!1;let s=t.L().u;if(this.v(s,n)>=0)return!1;let u=t.B().u;return this.v(u,n)<=0?!1:(t.u=n,!0)}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let n=0,t=this;return this.oe(this.Y,function(s){return e===n?(t.V(s),!0):(n+=1,!1)}),this.i}eraseElementByKey(e){if(this.i===0)return!1;let n=this.I(this.Y,e);return n===this.h?!1:(this.V(n),!0)}eraseElementByIterator(e){let n=e.o;n===this.h&&(0,l.throwIteratorAccessError)();let t=n.W===void 0;return e.iteratorType===0?t&&e.next():(!t||n.U===void 0)&&e.next(),this.V(n),e}forEach(e){let n=0;for(let t of this)e(t,n++,this)}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let n,t=0;for(let s of this){if(t===e){n=s;break}t+=1}return n}getHeight(){if(this.i===0)return 0;let e=function(n){return n?Math.max(e(n.U),e(n.W))+1:0};return e(this.Y)}},i=c;r.default=i}),Rs=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=Bt(),o=Mt(),l=class extends a.ContainerIterator{constructor(i,e,n){super(n),this.o=i,this.h=e,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,o.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,o.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let i=this.o,e=this.h.tt;if(i===this.h)return e?e.rt-1:0;let n=0;for(i.U&&(n+=i.U.rt);i!==e;){let t=i.tt;i===t.W&&(n+=1,t.U&&(n+=t.U.rt)),i=t}return n}},c=l;r.default=c}),zu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=c(Os()),o=c(Rs()),l=Mt();function c(t){return t&&t.t?t:{default:t}}var i=class Ps extends o.default{constructor(s,u,d,p){super(s,u,p),this.container=d}get pointer(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o.u}copy(){return new Ps(this.o,this.h,this.container,this.iteratorType)}},e=class extends a.default{constructor(t=[],s,u){super(s,u);let d=this;t.forEach(function(p){d.insert(p)})}*K(t){t!==void 0&&(yield*this.K(t.U),yield t.u,yield*this.K(t.W))}begin(){return new i(this.h.U||this.h,this.h,this)}end(){return new i(this.h,this.h,this)}rBegin(){return new i(this.h.W||this.h,this.h,this,1)}rEnd(){return new i(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(t,s){return this.M(t,void 0,s)}find(t){let s=this.I(this.Y,t);return new i(s,this.h,this)}lowerBound(t){let s=this.X(this.Y,t);return new i(s,this.h,this)}upperBound(t){let s=this.Z(this.Y,t);return new i(s,this.h,this)}reverseLowerBound(t){let s=this.$(this.Y,t);return new i(s,this.h,this)}reverseUpperBound(t){let s=this.rr(this.Y,t);return new i(s,this.h,this)}union(t){let s=this;return t.forEach(function(u){s.insert(u)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},n=e;r.default=n}),Yu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=c(Os()),o=c(Rs()),l=Mt();function c(t){return t&&t.t?t:{default:t}}var i=class js extends o.default{constructor(s,u,d,p){super(s,u,p),this.container=d}get pointer(){this.o===this.h&&(0,l.throwIteratorAccessError)();let s=this;return new Proxy([],{get(u,d){if(d==="0")return s.o.u;if(d==="1")return s.o.l},set(u,d,p){if(d!=="1")throw new TypeError("props must be 1");return s.o.l=p,!0}})}copy(){return new js(this.o,this.h,this.container,this.iteratorType)}},e=class extends a.default{constructor(t=[],s,u){super(s,u);let d=this;t.forEach(function(p){d.setElement(p[0],p[1])})}*K(t){t!==void 0&&(yield*this.K(t.U),yield[t.u,t.l],yield*this.K(t.W))}begin(){return new i(this.h.U||this.h,this.h,this)}end(){return new i(this.h,this.h,this)}rBegin(){return new i(this.h.W||this.h,this.h,this,1)}rEnd(){return new i(this.h,this.h,this,1)}front(){if(this.i===0)return;let t=this.h.U;return[t.u,t.l]}back(){if(this.i===0)return;let t=this.h.W;return[t.u,t.l]}lowerBound(t){let s=this.X(this.Y,t);return new i(s,this.h,this)}upperBound(t){let s=this.Z(this.Y,t);return new i(s,this.h,this)}reverseLowerBound(t){let s=this.$(this.Y,t);return new i(s,this.h,this)}reverseUpperBound(t){let s=this.rr(this.Y,t);return new i(s,this.h,this)}setElement(t,s,u){return this.M(t,s,u)}find(t){let s=this.I(this.Y,t);return new i(s,this.h,this)}getElementByKey(t){return this.I(this.Y,t).l}union(t){let s=this;return t.forEach(function(u){s.setElement(u[0],u[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},n=e;r.default=n}),Bs=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=a;function a(o){let l=typeof o;return l==="object"&&o!==null||l==="function"}}),Ms=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.HashContainerIterator=r.HashContainer=void 0;var a=Bt(),o=c(Bs()),l=Mt();function c(n){return n&&n.t?n:{default:n}}var i=class extends a.ContainerIterator{constructor(n,t,s){super(s),this.o=n,this.h=t,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.L,this})}};r.HashContainerIterator=i;var e=class extends a.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(n){let{L:t,B:s}=n;t.B=s,s.L=t,n===this.p&&(this.p=s),n===this._&&(this._=t),this.i-=1}M(n,t,s){s===void 0&&(s=(0,o.default)(n));let u;if(s){let d=n[this.HASH_TAG];if(d!==void 0)return this.H[d].l=t,this.i;Object.defineProperty(n,this.HASH_TAG,{value:this.H.length,configurable:!0}),u={u:n,l:t,L:this._,B:this.h},this.H.push(u)}else{let d=this.g[n];if(d)return d.l=t,this.i;u={u:n,l:t,L:this._,B:this.h},this.g[n]=u}return this.i===0?(this.p=u,this.h.B=u):this._.B=u,this._=u,this.h.L=u,++this.i}I(n,t){if(t===void 0&&(t=(0,o.default)(n)),t){let s=n[this.HASH_TAG];return s===void 0?this.h:this.H[s]}else return this.g[n]||this.h}clear(){let n=this.HASH_TAG;this.H.forEach(function(t){delete t.u[n]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(n,t){let s;if(t===void 0&&(t=(0,o.default)(n)),t){let u=n[this.HASH_TAG];if(u===void 0)return!1;delete n[this.HASH_TAG],s=this.H[u],delete this.H[u]}else{if(s=this.g[n],s===void 0)return!1;delete this.g[n]}return this.V(s),!0}eraseElementByIterator(n){let t=n.o;return t===this.h&&(0,l.throwIteratorAccessError)(),this.V(t),n.next()}eraseElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let t=this.p;for(;n--;)t=t.B;return this.V(t),this.i}};r.HashContainer=e}),Gu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=Ms(),o=Mt(),l=class Ls extends a.HashContainerIterator{constructor(n,t,s,u){super(n,t,u),this.container=s}get pointer(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.u}copy(){return new Ls(this.o,this.h,this.container,this.iteratorType)}},c=class extends a.HashContainer{constructor(e=[]){super();let n=this;e.forEach(function(t){n.insert(t)})}begin(){return new l(this.p,this.h,this)}end(){return new l(this.h,this.h,this)}rBegin(){return new l(this._,this.h,this,1)}rEnd(){return new l(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(e,n){return this.M(e,void 0,n)}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let n=this.p;for(;e--;)n=n.B;return n.u}find(e,n){let t=this.I(e,n);return new l(t,this.h,this)}forEach(e){let n=0,t=this.p;for(;t!==this.h;)e(t.u,n++,this),t=t.B}[Symbol.iterator](){return(function*(){let e=this.p;for(;e!==this.h;)yield e.u,e=e.B}).bind(this)()}},i=c;r.default=i}),Ku=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var a=Ms(),o=c(Bs()),l=Mt();function c(t){return t&&t.t?t:{default:t}}var i=class Ns extends a.HashContainerIterator{constructor(s,u,d,p){super(s,u,p),this.container=d}get pointer(){this.o===this.h&&(0,l.throwIteratorAccessError)();let s=this;return new Proxy([],{get(u,d){if(d==="0")return s.o.u;if(d==="1")return s.o.l},set(u,d,p){if(d!=="1")throw new TypeError("props must be 1");return s.o.l=p,!0}})}copy(){return new Ns(this.o,this.h,this.container,this.iteratorType)}},e=class extends a.HashContainer{constructor(t=[]){super();let s=this;t.forEach(function(u){s.setElement(u[0],u[1])})}begin(){return new i(this.p,this.h,this)}end(){return new i(this.h,this.h,this)}rBegin(){return new i(this._,this.h,this,1)}rEnd(){return new i(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(t,s,u){return this.M(t,s,u)}getElementByKey(t,s){if(s===void 0&&(s=(0,o.default)(t)),s){let d=t[this.HASH_TAG];return d!==void 0?this.H[d].l:void 0}let u=this.g[t];return u?u.l:void 0}getElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let s=this.p;for(;t--;)s=s.B;return[s.u,s.l]}find(t,s){let u=this.I(t,s);return new i(u,this.h,this)}forEach(t){let s=0,u=this.p;for(;u!==this.h;)t([u.u,u.l],s++,this),u=u.B}[Symbol.iterator](){return(function*(){let t=this.p;for(;t!==this.h;)yield[t.u,t.l],t=t.B}).bind(this)()}},n=e;r.default=n}),Qu=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"t",{value:!0}),Object.defineProperty(r,"Deque",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(r,"HashMap",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"HashSet",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"LinkList",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"OrderedMap",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(r,"OrderedSet",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"PriorityQueue",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"Queue",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"Stack",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"Vector",{enumerable:!0,get:function(){return c.default}});var a=d(Du()),o=d(Fu()),l=d(Wu()),c=d($u()),i=d(Vu()),e=d(Hu()),n=d(zu()),t=d(Yu()),s=d(Gu()),u=d(Ku());function d(p){return p&&p.t?p:{default:p}}}),Zu=ye((r,a)=>{pe(),me(),ge();var o=Qu().OrderedSet,l=Rt()("number-allocator:trace"),c=Rt()("number-allocator:error");function i(n,t){this.low=n,this.high=t}i.prototype.equals=function(n){return this.low===n.low&&this.high===n.high},i.prototype.compare=function(n){return this.low<n.low&&this.high<n.low?-1:n.low<this.low&&n.high<this.low?1:0};function e(n,t){if(!(this instanceof e))return new e(n,t);this.min=n,this.max=t,this.ss=new o([],(s,u)=>s.compare(u)),l("Create"),this.clear()}e.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},e.prototype.alloc=function(){if(this.ss.size()===0)return l("alloc():empty"),null;let n=this.ss.begin(),t=n.pointer.low,s=n.pointer.high,u=t;return u+1<=s?this.ss.updateKeyByIterator(n,new i(t+1,s)):this.ss.eraseElementByPos(0),l("alloc():"+u),u},e.prototype.use=function(n){let t=new i(n,n),s=this.ss.lowerBound(t);if(!s.equals(this.ss.end())){let u=s.pointer.low,d=s.pointer.high;return s.pointer.equals(t)?(this.ss.eraseElementByIterator(s),l("use():"+n),!0):u>n?!1:u===n?(this.ss.updateKeyByIterator(s,new i(u+1,d)),l("use():"+n),!0):d===n?(this.ss.updateKeyByIterator(s,new i(u,d-1)),l("use():"+n),!0):(this.ss.updateKeyByIterator(s,new i(n+1,d)),this.ss.insert(new i(u,n-1)),l("use():"+n),!0)}return l("use():failed"),!1},e.prototype.free=function(n){if(n<this.min||n>this.max){c("free():"+n+" is out of range");return}let t=new i(n,n),s=this.ss.upperBound(t);if(s.equals(this.ss.end())){if(s.equals(this.ss.begin())){this.ss.insert(t);return}s.pre();let u=s.pointer.high;s.pointer.high+1===n?this.ss.updateKeyByIterator(s,new i(u,n)):this.ss.insert(t)}else if(s.equals(this.ss.begin()))if(n+1===s.pointer.low){let u=s.pointer.high;this.ss.updateKeyByIterator(s,new i(n,u))}else this.ss.insert(t);else{let u=s.pointer.low,d=s.pointer.high;s.pre();let p=s.pointer.low;s.pointer.high+1===n?n+1===u?(this.ss.eraseElementByIterator(s),this.ss.updateKeyByIterator(s,new i(p,d))):this.ss.updateKeyByIterator(s,new i(p,n)):n+1===u?(this.ss.eraseElementByIterator(s.next()),this.ss.insert(new i(n,d))):this.ss.insert(t)}l("free():"+n)},e.prototype.clear=function(){l("clear()"),this.ss.clear(),this.ss.insert(new i(this.min,this.max))},e.prototype.intervalCount=function(){return this.ss.size()},e.prototype.dump=function(){console.log("length:"+this.ss.size());for(let n of this.ss)console.log(n)},a.exports=e}),Us=ye((r,a)=>{pe(),me(),ge();var o=Zu();a.exports.NumberAllocator=o}),Ju=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0});var a=Uu(),o=Us(),l=class{constructor(c){c>0&&(this.aliasToTopic=new a.LRUCache({max:c}),this.topicToAlias={},this.numberAllocator=new o.NumberAllocator(1,c),this.max=c,this.length=0)}put(c,i){if(i===0||i>this.max)return!1;let e=this.aliasToTopic.get(i);return e&&delete this.topicToAlias[e],this.aliasToTopic.set(i,c),this.topicToAlias[c]=i,this.numberAllocator.use(i),this.length=this.aliasToTopic.size,!0}getTopicByAlias(c){return this.aliasToTopic.get(c)}getAliasByTopic(c){let i=this.topicToAlias[c];return typeof i<"u"&&this.aliasToTopic.get(i),i}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};r.default=l}),Xu=ye(r=>{pe(),me(),ge();var a=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var o=Kr(),l=a(Ju()),c=cr(),i=(e,n)=>{e.log("_handleConnack");let{options:t}=e,s=t.protocolVersion===5?n.reasonCode:n.returnCode;if(clearTimeout(e.connackTimer),delete e.topicAliasSend,n.properties){if(n.properties.topicAliasMaximum){if(n.properties.topicAliasMaximum>65535){e.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}n.properties.topicAliasMaximum>0&&(e.topicAliasSend=new l.default(n.properties.topicAliasMaximum))}n.properties.serverKeepAlive&&t.keepalive&&(t.keepalive=n.properties.serverKeepAlive),n.properties.maximumPacketSize&&(t.properties||(t.properties={}),t.properties.maximumPacketSize=n.properties.maximumPacketSize)}if(s===0)e.reconnecting=!1,e._onConnect(n);else if(s>0){let u=new c.ErrorWithReasonCode(`Connection refused: ${o.ReasonCodes[s]}`,s);e.emit("error",u),e.options.reconnectOnConnackError&&e._cleanUp(!0)}};r.default=i}),eh=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0});var a=(o,l,c)=>{o.log("handling pubrel packet");let i=typeof c<"u"?c:o.noop,{messageId:e}=l,n={cmd:"pubcomp",messageId:e};o.incomingStore.get(l,(t,s)=>{t?o._sendPacket(n,i):(o.emit("message",s.topic,s.payload,s),o.handleMessage(s,u=>{if(u)return i(u);o.incomingStore.del(s,o.noop),o._sendPacket(n,i)}))})};r.default=a}),th=ye(r=>{pe(),me(),ge();var a=r&&r.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var o=a(Mu()),l=a(Nu()),c=a(Xu()),i=a(Kr()),e=a(eh()),n=(t,s,u)=>{let{options:d}=t;if(d.protocolVersion===5&&d.properties&&d.properties.maximumPacketSize&&d.properties.maximumPacketSize<s.length)return t.emit("error",new Error(`exceeding packets size ${s.cmd}`)),t.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),t;switch(t.log("_handlePacket :: emitting packetreceive"),t.emit("packetreceive",s),s.cmd){case"publish":(0,o.default)(t,s,u);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":t.reschedulePing(),(0,i.default)(t,s),u();break;case"pubrel":t.reschedulePing(),(0,e.default)(t,s,u);break;case"connack":(0,c.default)(t,s),u();break;case"auth":t.reschedulePing(),(0,l.default)(t,s),u();break;case"pingresp":t.log("_handlePacket :: received pingresp"),t.reschedulePing(!0),u();break;case"disconnect":t.emit("disconnect",s),u();break;default:t.log("_handlePacket :: unknown command"),u();break}};r.default=n}),rh=ye(r=>{pe(),me(),ge();var a=r&&r.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(r,"__esModule",{value:!0}),r.TypedEventEmitter=void 0;var o=a((ir(),De(Ht))),l=cr(),c=class{};r.TypedEventEmitter=c,(0,l.applyMixin)(c,o.default)}),Qr=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0}),r.isReactNativeBrowser=r.isWebWorker=void 0;var a=()=>{var i;return typeof window<"u"?typeof navigator<"u"&&((i=navigator.userAgent)===null||i===void 0?void 0:i.toLowerCase().indexOf(" electron/"))>-1&&Le!=null&&Le.versions?!Object.prototype.hasOwnProperty.call(Le.versions,"electron"):typeof window.document<"u":!1},o=()=>{var i,e;return!!(typeof self=="object"&&!((e=(i=self==null?void 0:self.constructor)===null||i===void 0?void 0:i.name)===null||e===void 0)&&e.includes("WorkerGlobalScope"))},l=()=>typeof navigator<"u"&&navigator.product==="ReactNative",c=a()||o()||l();r.isWebWorker=o(),r.isReactNativeBrowser=l(),r.default=c}),nh=ye((r,a)=>{pe(),me(),ge(),function(o,l){typeof r=="object"&&typeof a<"u"?l(r):typeof define=="function"&&define.amd?define(["exports"],l):(o=typeof globalThis<"u"?globalThis:o||self,l(o.fastUniqueNumbers={}))}(r,function(o){var l=function(m){return function(b){var w=m(b);return b.add(w),w}},c=function(m){return function(b,w){return m.set(b,w),w}},i=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,e=536870912,n=e*2,t=function(m,b){return function(w){var _=b.get(w),A=_===void 0?w.size:_<n?_+1:0;if(!w.has(A))return m(w,A);if(w.size<e){for(;w.has(A);)A=Math.floor(Math.random()*n);return m(w,A)}if(w.size>i)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;w.has(A);)A=Math.floor(Math.random()*i);return m(w,A)}},s=new WeakMap,u=c(s),d=t(u,s),p=l(d);o.addUniqueNumber=p,o.generateUniqueNumber=d})}),ih=ye((r,a)=>{pe(),me(),ge(),function(o,l){typeof r=="object"&&typeof a<"u"?l(r,nh()):typeof define=="function"&&define.amd?define(["exports","fast-unique-numbers"],l):(o=typeof globalThis<"u"?globalThis:o||self,l(o.workerTimersBroker={},o.fastUniqueNumbers))}(r,function(o,l){var c=function(n){return n.method!==void 0&&n.method==="call"},i=function(n){return n.error===null&&typeof n.id=="number"},e=function(n){var t=new Map([[0,function(){}]]),s=new Map([[0,function(){}]]),u=new Map,d=new Worker(n);d.addEventListener("message",function(_){var A=_.data;if(c(A)){var y=A.params,v=y.timerId,L=y.timerType;if(L==="interval"){var P=t.get(v);if(typeof P=="number"){var S=u.get(P);if(S===void 0||S.timerId!==v||S.timerType!==L)throw new Error("The timer is in an undefined state.")}else if(typeof P<"u")P();else throw new Error("The timer is in an undefined state.")}else if(L==="timeout"){var C=s.get(v);if(typeof C=="number"){var j=u.get(C);if(j===void 0||j.timerId!==v||j.timerType!==L)throw new Error("The timer is in an undefined state.")}else if(typeof C<"u")C(),s.delete(v);else throw new Error("The timer is in an undefined state.")}}else if(i(A)){var Q=A.id,ee=u.get(Q);if(ee===void 0)throw new Error("The timer is in an undefined state.");var ae=ee.timerId,O=ee.timerType;u.delete(Q),O==="interval"?t.delete(ae):s.delete(ae)}else{var K=A.error.message;throw new Error(K)}});var p=function(_){var A=l.generateUniqueNumber(u);u.set(A,{timerId:_,timerType:"interval"}),t.set(_,A),d.postMessage({id:A,method:"clear",params:{timerId:_,timerType:"interval"}})},m=function(_){var A=l.generateUniqueNumber(u);u.set(A,{timerId:_,timerType:"timeout"}),s.set(_,A),d.postMessage({id:A,method:"clear",params:{timerId:_,timerType:"timeout"}})},b=function(_){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=l.generateUniqueNumber(t);return t.set(y,function(){_(),typeof t.get(y)=="function"&&d.postMessage({id:null,method:"set",params:{delay:A,now:performance.now(),timerId:y,timerType:"interval"}})}),d.postMessage({id:null,method:"set",params:{delay:A,now:performance.now(),timerId:y,timerType:"interval"}}),y},w=function(_){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=l.generateUniqueNumber(s);return s.set(y,_),d.postMessage({id:null,method:"set",params:{delay:A,now:performance.now(),timerId:y,timerType:"timeout"}}),y};return{clearInterval:p,clearTimeout:m,setInterval:b,setTimeout:w}};o.load=e})}),oh=ye((r,a)=>{pe(),me(),ge(),function(o,l){typeof r=="object"&&typeof a<"u"?l(r,ih()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],l):(o=typeof globalThis<"u"?globalThis:o||self,l(o.workerTimers={},o.workerTimersBroker))}(r,function(o,l){var c=function(d,p){var m=null;return function(){if(m!==null)return m;var b=new Blob([p],{type:"application/javascript; charset=utf-8"}),w=URL.createObjectURL(b);return m=d(w),setTimeout(function(){return URL.revokeObjectURL(w)}),m}},i=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,e=c(l.load,i),n=function(d){return e().clearInterval(d)},t=function(d){return e().clearTimeout(d)},s=function(){var d;return(d=e()).setInterval.apply(d,arguments)},u=function(){var d;return(d=e()).setTimeout.apply(d,arguments)};o.clearInterval=n,o.clearTimeout=t,o.setInterval=s,o.setTimeout=u})}),sh=ye(r=>{pe(),me(),ge();var a=r&&r.__createBinding||(Object.create?function(s,u,d,p){p===void 0&&(p=d);var m=Object.getOwnPropertyDescriptor(u,d);(!m||("get"in m?!u.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(s,p,m)}:function(s,u,d,p){p===void 0&&(p=d),s[p]=u[d]}),o=r&&r.__setModuleDefault||(Object.create?function(s,u){Object.defineProperty(s,"default",{enumerable:!0,value:u})}:function(s,u){s.default=u}),l=r&&r.__importStar||function(){var s=function(u){return s=Object.getOwnPropertyNames||function(d){var p=[];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(p[p.length]=m);return p},s(u)};return function(u){if(u&&u.__esModule)return u;var d={};if(u!=null)for(var p=s(u),m=0;m<p.length;m++)p[m]!=="default"&&a(d,u,p[m]);return o(d,u),d}}();Object.defineProperty(r,"__esModule",{value:!0});var c=l(Qr()),i=oh(),e={set:i.setInterval,clear:i.clearInterval},n={set:(s,u)=>setInterval(s,u),clear:s=>clearInterval(s)},t=s=>{switch(s){case"native":return n;case"worker":return e;case"auto":default:return c.default&&!c.isWebWorker&&!c.isReactNativeBrowser?e:n}};r.default=t}),Ds=ye(r=>{pe(),me(),ge();var a=r&&r.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(r,"__esModule",{value:!0});var o=a(sh()),l=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(c,i){this.destroyed=!1,this.client=c,this.timer=typeof i=="object"&&"set"in i&&"clear"in i?i:(0,o.default)(i),this.setKeepalive(c.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(c){if(c*=1e3,isNaN(c)||c<=0||c>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${c}`);this._keepalive=c,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${c}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let c=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+c,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};r.default=l}),Ri=ye(r=>{pe(),me(),ge();var a=r&&r.__createBinding||(Object.create?function(P,S,C,j){j===void 0&&(j=C);var Q=Object.getOwnPropertyDescriptor(S,C);(!Q||("get"in Q?!S.__esModule:Q.writable||Q.configurable))&&(Q={enumerable:!0,get:function(){return S[C]}}),Object.defineProperty(P,j,Q)}:function(P,S,C,j){j===void 0&&(j=C),P[j]=S[C]}),o=r&&r.__setModuleDefault||(Object.create?function(P,S){Object.defineProperty(P,"default",{enumerable:!0,value:S})}:function(P,S){P.default=S}),l=r&&r.__importStar||function(){var P=function(S){return P=Object.getOwnPropertyNames||function(C){var j=[];for(var Q in C)Object.prototype.hasOwnProperty.call(C,Q)&&(j[j.length]=Q);return j},P(S)};return function(S){if(S&&S.__esModule)return S;var C={};if(S!=null)for(var j=P(S),Q=0;Q<j.length;Q++)j[Q]!=="default"&&a(C,S,j[Q]);return o(C,S),C}}(),c=r&&r.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(r,"__esModule",{value:!0});var i=c(pu()),e=c(Ru()),n=c(Es()),t=sr(),s=c(ju()),u=l(Bu()),d=c(Rt()),p=c(Ss()),m=c(th()),b=cr(),w=rh(),_=c(Ds()),A=l(Qr()),y=globalThis.setImmediate||((...P)=>{let S=P.shift();(0,b.nextTick)(()=>{S(...P)})}),v={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,writeCache:!0,timerVariant:"auto"},L=class Pi extends w.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(S,C){super(),this.options=C||{};for(let j in v)typeof this.options[j]>"u"?this.options[j]=v[j]:this.options[j]=C[j];this.log=this.options.log||(0,d.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",Pi.VERSION),A.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",A.default?"browser":"node"),this.log("MqttClient :: options.protocol",C.protocol),this.log("MqttClient :: options.protocolVersion",C.protocolVersion),this.log("MqttClient :: options.username",C.username),this.log("MqttClient :: options.keepalive",C.keepalive),this.log("MqttClient :: options.reconnectPeriod",C.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",C.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",C.properties?C.properties.topicAliasMaximum:void 0),this.options.clientId=typeof C.clientId=="string"?C.clientId:Pi.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=C.protocolVersion===5&&C.customHandleAcks?C.customHandleAcks:(...j)=>{j[3](null,0)},this.options.writeCache||(e.default.writeToStream.cacheNumbers=!1),this.streamBuilder=S,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new n.default:this.options.messageIdProvider,this.outgoingStore=C.outgoingStore||new p.default,this.incomingStore=C.incomingStore||new p.default,this.queueQoSZero=C.queueQoSZero===void 0?!0:C.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,C.properties&&C.properties.topicAliasMaximum>0&&(C.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new i.default(C.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:j}=this,Q=()=>{let ee=j.shift();this.log("deliver :: entry %o",ee);let ae=null;if(!ee){this._resubscribe();return}ae=ee.packet,this.log("deliver :: call _sendPacket for %o",ae);let O=!0;ae.messageId&&ae.messageId!==0&&(this.messageIdProvider.register(ae.messageId)||(O=!1)),O?this._sendPacket(ae,K=>{ee.cb&&ee.cb(K),Q()}):(this.log("messageId: %d has already used. The message is skipped and removed.",ae.messageId),Q())};this.log("connect :: sending queued packets"),Q()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(S,C){C()}handleMessage(S,C){C()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var S;let C=new t.Writable,j=e.default.parser(this.options),Q=null,ee=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new p.default,this.outgoingStore=this.options.outgoingStore||new p.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),j.on("packet",W=>{this.log("parser :: on packet push to packets array."),ee.push(W)});let ae=()=>{this.log("work :: getting next packet in queue");let W=ee.shift();if(W)this.log("work :: packet pulled from queue"),(0,m.default)(this,W,O);else{this.log("work :: no packets in queue");let be=Q;Q=null,this.log("work :: done flag is %s",!!be),be&&be()}},O=()=>{if(ee.length)(0,b.nextTick)(ae);else{let W=Q;Q=null,W()}};C._write=(W,be,ce)=>{Q=ce,this.log("writable stream :: parsing buffer"),j.parse(W),ae()};let K=W=>{this.log("streamErrorHandler :: error",W.message),W.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",W)):this.noop(W)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(C),this.stream.on("error",K),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let J={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(J.will=Object.assign(Object.assign({},this.options.will),{payload:(S=this.options.will)===null||S===void 0?void 0:S.payload})),this.topicAliasRecv&&(J.properties||(J.properties={}),this.topicAliasRecv&&(J.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(J),j.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let W=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(W)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(S,C,j,Q){this.log("publish :: message `%s` to topic `%s`",C,S);let{options:ee}=this;typeof j=="function"&&(Q=j,j=null),j=j||{},j=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),j);let{qos:ae,retain:O,dup:K,properties:J,cbStorePut:W}=j;if(this._checkDisconnecting(Q))return this;let be=()=>{let ce=0;if((ae===1||ae===2)&&(ce=this._nextId(),ce===null))return this.log("No messageId left"),!1;let le={cmd:"publish",topic:S,payload:C,qos:ae,retain:O,messageId:ce,dup:K};switch(ee.protocolVersion===5&&(le.properties=J),this.log("publish :: qos",ae),ae){case 1:case 2:this.outgoing[le.messageId]={volatile:!1,cb:Q||this.noop},this.log("MqttClient:publish: packet cmd: %s",le.cmd),this._sendPacket(le,void 0,W);break;default:this.log("MqttClient:publish: packet cmd: %s",le.cmd),this._sendPacket(le,Q,W);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!be())&&this._storeProcessingQueue.push({invoke:be,cbStorePut:j.cbStorePut,callback:Q}),this}publishAsync(S,C,j){return new Promise((Q,ee)=>{this.publish(S,C,j,(ae,O)=>{ae?ee(ae):Q(O)})})}subscribe(S,C,j){let Q=this.options.protocolVersion;typeof C=="function"&&(j=C),j=j||this.noop;let ee=!1,ae=[];typeof S=="string"?(S=[S],ae=S):Array.isArray(S)?ae=S:typeof S=="object"&&(ee=S.resubscribe,delete S.resubscribe,ae=Object.keys(S));let O=u.validateTopics(ae);if(O!==null)return y(j,new Error(`Invalid topic ${O}`)),this;if(this._checkDisconnecting(j))return this.log("subscribe: discconecting true"),this;let K={qos:0};Q===5&&(K.nl=!1,K.rap=!1,K.rh=0),C=Object.assign(Object.assign({},K),C);let J=C.properties,W=[],be=(le,Se)=>{if(Se=Se||C,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,le)||this._resubscribeTopics[le].qos<Se.qos||ee){let Y={topic:le,qos:Se.qos};Q===5&&(Y.nl=Se.nl,Y.rap=Se.rap,Y.rh=Se.rh,Y.properties=J),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",Y.topic,Y.qos),W.push(Y)}};if(Array.isArray(S)?S.forEach(le=>{this.log("subscribe: array topic %s",le),be(le)}):Object.keys(S).forEach(le=>{this.log("subscribe: object topic %s, %o",le,S[le]),be(le,S[le])}),!W.length)return j(null,[]),this;let ce=()=>{let le=this._nextId();if(le===null)return this.log("No messageId left"),!1;let Se={cmd:"subscribe",subscriptions:W,messageId:le};if(J&&(Se.properties=J),this.options.resubscribe){this.log("subscribe :: resubscribe true");let Y=[];W.forEach(X=>{if(this.options.reconnectPeriod>0){let x={qos:X.qos};Q===5&&(x.nl=X.nl||!1,x.rap=X.rap||!1,x.rh=X.rh||0,x.properties=X.properties),this._resubscribeTopics[X.topic]=x,Y.push(X.topic)}}),this.messageIdToTopic[Se.messageId]=Y}return this.outgoing[Se.messageId]={volatile:!0,cb(Y,X){if(!Y){let{granted:x}=X;for(let te=0;te<x.length;te+=1)W[te].qos=x[te]}j(Y,W,X)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(Se),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!ce())&&this._storeProcessingQueue.push({invoke:ce,callback:j}),this}subscribeAsync(S,C){return new Promise((j,Q)=>{this.subscribe(S,C,(ee,ae)=>{ee?Q(ee):j(ae)})})}unsubscribe(S,C,j){typeof S=="string"&&(S=[S]),typeof C=="function"&&(j=C),j=j||this.noop;let Q=u.validateTopics(S);if(Q!==null)return y(j,new Error(`Invalid topic ${Q}`)),this;if(this._checkDisconnecting(j))return this;let ee=()=>{let ae=this._nextId();if(ae===null)return this.log("No messageId left"),!1;let O={cmd:"unsubscribe",messageId:ae,unsubscriptions:[]};return typeof S=="string"?O.unsubscriptions=[S]:Array.isArray(S)&&(O.unsubscriptions=S),this.options.resubscribe&&O.unsubscriptions.forEach(K=>{delete this._resubscribeTopics[K]}),typeof C=="object"&&C.properties&&(O.properties=C.properties),this.outgoing[O.messageId]={volatile:!0,cb:j},this.log("unsubscribe: call _sendPacket"),this._sendPacket(O),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!ee())&&this._storeProcessingQueue.push({invoke:ee,callback:j}),this}unsubscribeAsync(S,C){return new Promise((j,Q)=>{this.unsubscribe(S,C,(ee,ae)=>{ee?Q(ee):j(ae)})})}end(S,C,j){this.log("end :: (%s)",this.options.clientId),(S==null||typeof S!="boolean")&&(j=j||C,C=S,S=!1),typeof C!="object"&&(j=j||C,C=null),this.log("end :: cb? %s",!!j),(!j||typeof j!="function")&&(j=this.noop);let Q=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(ae=>{this.outgoingStore.close(O=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),j){let K=ae||O;this.log("end :: closeStores: invoking callback with args"),j(K)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},ee=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,S),this._cleanUp(S,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,b.nextTick)(Q)},C)};return this.disconnecting?(j(),this):(this._clearReconnect(),this.disconnecting=!0,!S&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,ee,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),ee()),this)}endAsync(S,C){return new Promise((j,Q)=>{this.end(S,C,ee=>{ee?Q(ee):j()})})}removeOutgoingMessage(S){if(this.outgoing[S]){let{cb:C}=this.outgoing[S];this._removeOutgoingAndStoreMessage(S,()=>{C(new Error("Message removed"))})}return this}reconnect(S){this.log("client reconnect");let C=()=>{S?(this.options.incomingStore=S.incomingStore,this.options.outgoingStore=S.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new p.default,this.outgoingStore=this.options.outgoingStore||new p.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=C:C(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(S=>{this.outgoing[S].volatile&&typeof this.outgoing[S].cb=="function"&&(this.outgoing[S].cb(new Error("Connection closed")),delete this.outgoing[S])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(S=>{typeof this.outgoing[S].cb=="function"&&(this.outgoing[S].cb(new Error("Connection closed")),delete this.outgoing[S])}))}_removeTopicAliasAndRecoverTopicName(S){let C;S.properties&&(C=S.properties.topicAlias);let j=S.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",C,j),j.length===0){if(typeof C>"u")return new Error("Unregistered Topic Alias");if(j=this.topicAliasSend.getTopicByAlias(C),typeof j>"u")return new Error("Unregistered Topic Alias");S.topic=j}C&&delete S.properties.topicAlias}_checkDisconnecting(S){return this.disconnecting&&(S&&S!==this.noop?S(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(S,C,j={}){if(C&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",C)),this.log("_cleanUp :: forced? %s",S),S)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let Q=Object.assign({cmd:"disconnect"},j);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(Q,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),y(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),C&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",C),C())}_storeAndSend(S,C,j){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",S.cmd);let Q=S,ee;if(Q.cmd==="publish"&&(Q=(0,s.default)(S),ee=this._removeTopicAliasAndRecoverTopicName(Q),ee))return C&&C(ee);this.outgoingStore.put(Q,ae=>{if(ae)return C&&C(ae);j(),this._writePacket(S,C)})}_applyTopicAlias(S){if(this.options.protocolVersion===5&&S.cmd==="publish"){let C;S.properties&&(C=S.properties.topicAlias);let j=S.topic.toString();if(this.topicAliasSend)if(C){if(j.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",j,C),!this.topicAliasSend.put(j,C)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",j,C),new Error("Sending Topic Alias out of range")}else j.length!==0&&(this.options.autoAssignTopicAlias?(C=this.topicAliasSend.getAliasByTopic(j),C?(S.topic="",S.properties=Object.assign(Object.assign({},S.properties),{topicAlias:C}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",j,C)):(C=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(j,C),S.properties=Object.assign(Object.assign({},S.properties),{topicAlias:C}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",j,C))):this.options.autoUseTopicAlias&&(C=this.topicAliasSend.getAliasByTopic(j),C&&(S.topic="",S.properties=Object.assign(Object.assign({},S.properties),{topicAlias:C}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",j,C))));else if(C)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",j,C),new Error("Sending Topic Alias out of range")}}_noop(S){this.log("noop ::",S)}_writePacket(S,C){this.log("_writePacket :: packet: %O",S),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",S),this.log("_writePacket :: writing to stream");let j=e.default.writeToStream(S,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",j),!j&&C&&C!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",C)):C&&(this.log("_writePacket :: invoking cb"),C())}_sendPacket(S,C,j,Q){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),j=j||this.noop,C=C||this.noop;let ee=this._applyTopicAlias(S);if(ee){C(ee);return}if(!this.connected){if(S.cmd==="auth"){this._writePacket(S,C);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(S,C,j);return}if(Q){this._writePacket(S,C);return}switch(S.cmd){case"publish":break;case"pubrel":this._storeAndSend(S,C,j);return;default:this._writePacket(S,C);return}switch(S.qos){case 2:case 1:this._storeAndSend(S,C,j);break;case 0:default:this._writePacket(S,C);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(S,C,j){this.log("_storePacket :: packet: %o",S),this.log("_storePacket :: cb? %s",!!C),j=j||this.noop;let Q=S;if(Q.cmd==="publish"){Q=(0,s.default)(S);let ae=this._removeTopicAliasAndRecoverTopicName(Q);if(ae)return C&&C(ae)}let ee=Q.qos||0;ee===0&&this.queueQoSZero||Q.cmd!=="publish"?this.queue.push({packet:Q,cb:C}):ee>0?(C=this.outgoing[Q.messageId]?this.outgoing[Q.messageId].cb:null,this.outgoingStore.put(Q,ae=>{if(ae)return C&&C(ae);j()})):C&&C(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new _.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(S=!1){this.keepaliveManager&&this.options.keepalive&&(S||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let S=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&S.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let C=0;C<S.length;C++){let j={};j[S[C]]=this._resubscribeTopics[S[C]],j.resubscribe=!0,this.subscribe(j,{properties:j[S[C]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(S){if(this.disconnected){this.emit("connect",S);return}this.connackPacket=S,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let C=()=>{let j=this.outgoingStore.createStream(),Q=()=>{j.destroy(),j=null,this._flushStoreProcessingQueue(),ee()},ee=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",Q),j.on("error",O=>{ee(),this._flushStoreProcessingQueue(),this.removeListener("close",Q),this.emit("error",O)});let ae=()=>{if(!j)return;let O=j.read(1),K;if(!O){j.once("readable",ae);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[O.messageId]){ae();return}!this.disconnecting&&!this.reconnectTimer?(K=this.outgoing[O.messageId]?this.outgoing[O.messageId].cb:null,this.outgoing[O.messageId]={volatile:!1,cb(J,W){K&&K(J,W),ae()}},this._packetIdsDuringStoreProcessing[O.messageId]=!0,this.messageIdProvider.register(O.messageId)?this._sendPacket(O,void 0,void 0,!0):this.log("messageId: %d has already used.",O.messageId)):j.destroy&&j.destroy()};j.on("end",()=>{let O=!0;for(let K in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[K]){O=!1;break}this.removeListener("close",Q),O?(ee(),this._invokeAllStoreProcessingQueue(),this.emit("connect",S)):C()}),ae()};C()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let S=this._storeProcessingQueue[0];if(S&&S.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let S of this._storeProcessingQueue)S.cbStorePut&&S.cbStorePut(new Error("Connection closed")),S.callback&&S.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(S,C){delete this.outgoing[S],this.outgoingStore.del({messageId:S},(j,Q)=>{C(j,Q),this.messageIdProvider.deallocate(S),this._invokeStoreProcessingQueue()})}};L.VERSION=b.MQTTJS_VERSION,r.default=L}),ah=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0});var a=Us(),o=class{constructor(){this.numberAllocator=new a.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(l){return this.numberAllocator.use(l)}deallocate(l){this.numberAllocator.free(l)}clear(){this.numberAllocator.clear()}};r.default=o});function Kt(r){throw new RangeError(Ws[r])}function mo(r,a){let o=r.split("@"),l="";o.length>1&&(l=o[0]+"@",r=o[1]);let c=function(i,e){let n=[],t=i.length;for(;t--;)n[t]=e(i[t]);return n}((r=r.replace(Fs,".")).split("."),a).join(".");return l+c}function bo(r){let a=[],o=0,l=r.length;for(;o<l;){let c=r.charCodeAt(o++);if(c>=55296&&c<=56319&&o<l){let i=r.charCodeAt(o++);(64512&i)==56320?a.push(((1023&c)<<10)+(1023&i)+65536):(a.push(c),o--)}else a.push(c)}return a}var yo,wo,Fs,Ws,mt,Ar,fn,dn,pn,gn,$t,lh=at(()=>{pe(),me(),ge(),yo=/^xn--/,wo=/[^\0-\x7E]/,Fs=/[\x2E\u3002\uFF0E\uFF61]/g,Ws={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},mt=Math.floor,Ar=String.fromCharCode,fn=function(r,a){return r+22+75*(r<26)-((a!=0)<<5)},dn=function(r,a,o){let l=0;for(r=o?mt(r/700):r>>1,r+=mt(r/a);r>455;l+=36)r=mt(r/35);return mt(l+36*r/(r+38))},pn=function(r){let a=[],o=r.length,l=0,c=128,i=72,e=r.lastIndexOf("-");e<0&&(e=0);for(let t=0;t<e;++t)r.charCodeAt(t)>=128&&Kt("not-basic"),a.push(r.charCodeAt(t));for(let t=e>0?e+1:0;t<o;){let s=l;for(let d=1,p=36;;p+=36){t>=o&&Kt("invalid-input");let m=(n=r.charCodeAt(t++))-48<10?n-22:n-65<26?n-65:n-97<26?n-97:36;(m>=36||m>mt((2147483647-l)/d))&&Kt("overflow"),l+=m*d;let b=p<=i?1:p>=i+26?26:p-i;if(m<b)break;let w=36-b;d>mt(2147483647/w)&&Kt("overflow"),d*=w}let u=a.length+1;i=dn(l-s,u,s==0),mt(l/u)>2147483647-c&&Kt("overflow"),c+=mt(l/u),l%=u,a.splice(l++,0,c)}var n;return String.fromCodePoint(...a)},gn=function(r){let a=[],o=(r=bo(r)).length,l=128,c=0,i=72;for(let t of r)t<128&&a.push(Ar(t));let e=a.length,n=e;for(e&&a.push("-");n<o;){let t=2147483647;for(let u of r)u>=l&&u<t&&(t=u);let s=n+1;t-l>mt((2147483647-c)/s)&&Kt("overflow"),c+=(t-l)*s,l=t;for(let u of r)if(u<l&&++c>2147483647&&Kt("overflow"),u==l){let d=c;for(let p=36;;p+=36){let m=p<=i?1:p>=i+26?26:p-i;if(d<m)break;let b=d-m,w=36-m;a.push(Ar(fn(m+b%w,0))),d=mt(b/w)}a.push(Ar(fn(d,0))),i=dn(c,s,n==e),c=0,++n}++c,++l}return a.join("")},$t={version:"2.1.0",ucs2:{decode:bo,encode:r=>String.fromCodePoint(...r)},decode:pn,encode:gn,toASCII:function(r){return mo(r,function(a){return wo.test(a)?"xn--"+gn(a):a})},toUnicode:function(r){return mo(r,function(a){return yo.test(a)?pn(a.slice(4).toLowerCase()):a})}},$t.decode,$t.encode,$t.toASCII,$t.toUnicode,$t.ucs2,$t.version});function uh(r,a){return Object.prototype.hasOwnProperty.call(r,a)}var _o,ar,vo,wt,hh=at(()=>{pe(),me(),ge(),_o=function(r,a,o,l){a=a||"&",o=o||"=";var c={};if(typeof r!="string"||r.length===0)return c;var i=/\+/g;r=r.split(a);var e=1e3;l&&typeof l.maxKeys=="number"&&(e=l.maxKeys);var n=r.length;e>0&&n>e&&(n=e);for(var t=0;t<n;++t){var s,u,d,p,m=r[t].replace(i,"%20"),b=m.indexOf(o);b>=0?(s=m.substr(0,b),u=m.substr(b+1)):(s=m,u=""),d=decodeURIComponent(s),p=decodeURIComponent(u),uh(c,d)?Array.isArray(c[d])?c[d].push(p):c[d]=[c[d],p]:c[d]=p}return c},ar=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}},vo=function(r,a,o,l){return a=a||"&",o=o||"=",r===null&&(r=void 0),typeof r=="object"?Object.keys(r).map(function(c){var i=encodeURIComponent(ar(c))+o;return Array.isArray(r[c])?r[c].map(function(e){return i+encodeURIComponent(ar(e))}).join(a):i+encodeURIComponent(ar(r[c]))}).join(a):l?encodeURIComponent(ar(l))+o+encodeURIComponent(ar(r)):""},wt={},wt.decode=wt.parse=_o,wt.encode=wt.stringify=vo,wt.decode,wt.encode,wt.parse,wt.stringify});function ji(){throw new Error("setTimeout has not been defined")}function Bi(){throw new Error("clearTimeout has not been defined")}function $s(r){if(xt===setTimeout)return setTimeout(r,0);if((xt===ji||!xt)&&setTimeout)return xt=setTimeout,setTimeout(r,0);try{return xt(r,0)}catch{try{return xt.call(null,r,0)}catch{return xt.call(this||tr,r,0)}}}function ch(){rr&&Xt&&(rr=!1,Xt.length?Et=Xt.concat(Et):yr=-1,Et.length&&Vs())}function Vs(){if(!rr){var r=$s(ch);rr=!0;for(var a=Et.length;a;){for(Xt=Et,Et=[];++yr<a;)Xt&&Xt[yr].run();yr=-1,a=Et.length}Xt=null,rr=!1,function(o){if(It===clearTimeout)return clearTimeout(o);if((It===Bi||!It)&&clearTimeout)return It=clearTimeout,clearTimeout(o);try{It(o)}catch{try{return It.call(null,o)}catch{return It.call(this||tr,o)}}}(r)}}function Eo(r,a){(this||tr).fun=r,(this||tr).array=a}function kt(){}var So,xt,It,tr,Ge,Xt,Et,rr,yr,ze,fh=at(()=>{pe(),me(),ge(),tr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,Ge=So={},function(){try{xt=typeof setTimeout=="function"?setTimeout:ji}catch{xt=ji}try{It=typeof clearTimeout=="function"?clearTimeout:Bi}catch{It=Bi}}(),Et=[],rr=!1,yr=-1,Ge.nextTick=function(r){var a=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)a[o-1]=arguments[o];Et.push(new Eo(r,a)),Et.length!==1||rr||$s(Vs)},Eo.prototype.run=function(){(this||tr).fun.apply(null,(this||tr).array)},Ge.title="browser",Ge.browser=!0,Ge.env={},Ge.argv=[],Ge.version="",Ge.versions={},Ge.on=kt,Ge.addListener=kt,Ge.once=kt,Ge.off=kt,Ge.removeListener=kt,Ge.removeAllListeners=kt,Ge.emit=kt,Ge.prependListener=kt,Ge.prependOnceListener=kt,Ge.listeners=function(r){return[]},Ge.binding=function(r){throw new Error("process.binding is not supported")},Ge.cwd=function(){return"/"},Ge.chdir=function(r){throw new Error("process.chdir is not supported")},Ge.umask=function(){return 0},ze=So,ze.addListener,ze.argv,ze.binding,ze.browser,ze.chdir,ze.cwd,ze.emit,ze.env,ze.listeners,ze.nextTick,ze.off,ze.on,ze.once,ze.prependListener,ze.prependOnceListener,ze.removeAllListeners,ze.removeListener,ze.title,ze.umask,ze.version,ze.versions});function dh(){if(Mi)return Mr;Mi=!0;var r=Mr={},a,o;function l(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=l}catch{a=l}try{typeof clearTimeout=="function"?o=clearTimeout:o=c}catch{o=c}})();function i(w){if(a===setTimeout)return setTimeout(w,0);if((a===l||!a)&&setTimeout)return a=setTimeout,setTimeout(w,0);try{return a(w,0)}catch{try{return a.call(null,w,0)}catch{return a.call(this||Zt,w,0)}}}function e(w){if(o===clearTimeout)return clearTimeout(w);if((o===c||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(w);try{return o(w)}catch{try{return o.call(null,w)}catch{return o.call(this||Zt,w)}}}var n=[],t=!1,s,u=-1;function d(){!t||!s||(t=!1,s.length?n=s.concat(n):u=-1,n.length&&p())}function p(){if(!t){var w=i(d);t=!0;for(var _=n.length;_;){for(s=n,n=[];++u<_;)s&&s[u].run();u=-1,_=n.length}s=null,t=!1,e(w)}}r.nextTick=function(w){var _=new Array(arguments.length-1);if(arguments.length>1)for(var A=1;A<arguments.length;A++)_[A-1]=arguments[A];n.push(new m(w,_)),n.length===1&&!t&&i(p)};function m(w,_){(this||Zt).fun=w,(this||Zt).array=_}m.prototype.run=function(){(this||Zt).fun.apply(null,(this||Zt).array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function b(){}return r.on=b,r.addListener=b,r.once=b,r.off=b,r.removeListener=b,r.removeAllListeners=b,r.emit=b,r.prependListener=b,r.prependOnceListener=b,r.listeners=function(w){return[]},r.binding=function(w){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(w){throw new Error("process.chdir is not supported")},r.umask=function(){return 0},Mr}var Mr,Mi,Zt,He,Hs=at(()=>{pe(),me(),ge(),Mr={},Mi=!1,Zt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,He=dh(),He.platform="browser",He.addListener,He.argv,He.binding,He.browser,He.chdir,He.cwd,He.emit,He.env,He.listeners,He.nextTick,He.off,He.on,He.once,He.prependListener,He.prependOnceListener,He.removeAllListeners,He.removeListener,He.title,He.umask,He.version,He.versions});function ph(){if(Li)return Lr;Li=!0;var r=He;function a(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}function o(i,e){for(var n="",t=0,s=-1,u=0,d,p=0;p<=i.length;++p){if(p<i.length)d=i.charCodeAt(p);else{if(d===47)break;d=47}if(d===47){if(!(s===p-1||u===1))if(s!==p-1&&u===2){if(n.length<2||t!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var m=n.lastIndexOf("/");if(m!==n.length-1){m===-1?(n="",t=0):(n=n.slice(0,m),t=n.length-1-n.lastIndexOf("/")),s=p,u=0;continue}}else if(n.length===2||n.length===1){n="",t=0,s=p,u=0;continue}}e&&(n.length>0?n+="/..":n="..",t=2)}else n.length>0?n+="/"+i.slice(s+1,p):n=i.slice(s+1,p),t=p-s-1;s=p,u=0}else d===46&&u!==-1?++u:u=-1}return n}function l(i,e){var n=e.dir||e.root,t=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+t:n+i+t:t}var c={resolve:function(){for(var i="",e=!1,n,t=arguments.length-1;t>=-1&&!e;t--){var s;t>=0?s=arguments[t]:(n===void 0&&(n=r.cwd()),s=n),a(s),s.length!==0&&(i=s+"/"+i,e=s.charCodeAt(0)===47)}return i=o(i,!e),e?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(a(i),i.length===0)return".";var e=i.charCodeAt(0)===47,n=i.charCodeAt(i.length-1)===47;return i=o(i,!e),i.length===0&&!e&&(i="."),i.length>0&&n&&(i+="/"),e?"/"+i:i},isAbsolute:function(i){return a(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,e=0;e<arguments.length;++e){var n=arguments[e];a(n),n.length>0&&(i===void 0?i=n:i+="/"+n)}return i===void 0?".":c.normalize(i)},relative:function(i,e){if(a(i),a(e),i===e||(i=c.resolve(i),e=c.resolve(e),i===e))return"";for(var n=1;n<i.length&&i.charCodeAt(n)===47;++n);for(var t=i.length,s=t-n,u=1;u<e.length&&e.charCodeAt(u)===47;++u);for(var d=e.length,p=d-u,m=s<p?s:p,b=-1,w=0;w<=m;++w){if(w===m){if(p>m){if(e.charCodeAt(u+w)===47)return e.slice(u+w+1);if(w===0)return e.slice(u+w)}else s>m&&(i.charCodeAt(n+w)===47?b=w:w===0&&(b=0));break}var _=i.charCodeAt(n+w),A=e.charCodeAt(u+w);if(_!==A)break;_===47&&(b=w)}var y="";for(w=n+b+1;w<=t;++w)(w===t||i.charCodeAt(w)===47)&&(y.length===0?y+="..":y+="/..");return y.length>0?y+e.slice(u+b):(u+=b,e.charCodeAt(u)===47&&++u,e.slice(u))},_makeLong:function(i){return i},dirname:function(i){if(a(i),i.length===0)return".";for(var e=i.charCodeAt(0),n=e===47,t=-1,s=!0,u=i.length-1;u>=1;--u)if(e=i.charCodeAt(u),e===47){if(!s){t=u;break}}else s=!1;return t===-1?n?"/":".":n&&t===1?"//":i.slice(0,t)},basename:function(i,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');a(i);var n=0,t=-1,s=!0,u;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e.length===i.length&&e===i)return"";var d=e.length-1,p=-1;for(u=i.length-1;u>=0;--u){var m=i.charCodeAt(u);if(m===47){if(!s){n=u+1;break}}else p===-1&&(s=!1,p=u+1),d>=0&&(m===e.charCodeAt(d)?--d===-1&&(t=u):(d=-1,t=p))}return n===t?t=p:t===-1&&(t=i.length),i.slice(n,t)}else{for(u=i.length-1;u>=0;--u)if(i.charCodeAt(u)===47){if(!s){n=u+1;break}}else t===-1&&(s=!1,t=u+1);return t===-1?"":i.slice(n,t)}},extname:function(i){a(i);for(var e=-1,n=0,t=-1,s=!0,u=0,d=i.length-1;d>=0;--d){var p=i.charCodeAt(d);if(p===47){if(!s){n=d+1;break}continue}t===-1&&(s=!1,t=d+1),p===46?e===-1?e=d:u!==1&&(u=1):e!==-1&&(u=-1)}return e===-1||t===-1||u===0||u===1&&e===t-1&&e===n+1?"":i.slice(e,t)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return l("/",i)},parse:function(i){a(i);var e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;var n=i.charCodeAt(0),t=n===47,s;t?(e.root="/",s=1):s=0;for(var u=-1,d=0,p=-1,m=!0,b=i.length-1,w=0;b>=s;--b){if(n=i.charCodeAt(b),n===47){if(!m){d=b+1;break}continue}p===-1&&(m=!1,p=b+1),n===46?u===-1?u=b:w!==1&&(w=1):u!==-1&&(w=-1)}return u===-1||p===-1||w===0||w===1&&u===p-1&&u===d+1?p!==-1&&(d===0&&t?e.base=e.name=i.slice(1,p):e.base=e.name=i.slice(d,p)):(d===0&&t?(e.name=i.slice(1,u),e.base=i.slice(1,p)):(e.name=i.slice(d,u),e.base=i.slice(d,p)),e.ext=i.slice(u,p)),d>0?e.dir=i.slice(0,d-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};return c.posix=c,Lr=c,Lr}var Lr,Li,Ni,gh=at(()=>{pe(),me(),ge(),Hs(),Lr={},Li=!1,Ni=ph()}),qs={};ur(qs,{URL:()=>ua,Url:()=>ia,default:()=>Ne,fileURLToPath:()=>zs,format:()=>oa,parse:()=>la,pathToFileURL:()=>Ys,resolve:()=>sa,resolveObject:()=>aa});function gt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function dr(r,a,o){if(r&&bt.isObject(r)&&r instanceof gt)return r;var l=new gt;return l.parse(r,a,o),l}function mh(){if(Ui)return Nr;Ui=!0;var r=ze;function a(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}function o(i,e){for(var n="",t=0,s=-1,u=0,d,p=0;p<=i.length;++p){if(p<i.length)d=i.charCodeAt(p);else{if(d===47)break;d=47}if(d===47){if(!(s===p-1||u===1))if(s!==p-1&&u===2){if(n.length<2||t!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var m=n.lastIndexOf("/");if(m!==n.length-1){m===-1?(n="",t=0):(n=n.slice(0,m),t=n.length-1-n.lastIndexOf("/")),s=p,u=0;continue}}else if(n.length===2||n.length===1){n="",t=0,s=p,u=0;continue}}e&&(n.length>0?n+="/..":n="..",t=2)}else n.length>0?n+="/"+i.slice(s+1,p):n=i.slice(s+1,p),t=p-s-1;s=p,u=0}else d===46&&u!==-1?++u:u=-1}return n}function l(i,e){var n=e.dir||e.root,t=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+t:n+i+t:t}var c={resolve:function(){for(var i="",e=!1,n,t=arguments.length-1;t>=-1&&!e;t--){var s;t>=0?s=arguments[t]:(n===void 0&&(n=r.cwd()),s=n),a(s),s.length!==0&&(i=s+"/"+i,e=s.charCodeAt(0)===47)}return i=o(i,!e),e?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(a(i),i.length===0)return".";var e=i.charCodeAt(0)===47,n=i.charCodeAt(i.length-1)===47;return i=o(i,!e),i.length===0&&!e&&(i="."),i.length>0&&n&&(i+="/"),e?"/"+i:i},isAbsolute:function(i){return a(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,e=0;e<arguments.length;++e){var n=arguments[e];a(n),n.length>0&&(i===void 0?i=n:i+="/"+n)}return i===void 0?".":c.normalize(i)},relative:function(i,e){if(a(i),a(e),i===e||(i=c.resolve(i),e=c.resolve(e),i===e))return"";for(var n=1;n<i.length&&i.charCodeAt(n)===47;++n);for(var t=i.length,s=t-n,u=1;u<e.length&&e.charCodeAt(u)===47;++u);for(var d=e.length,p=d-u,m=s<p?s:p,b=-1,w=0;w<=m;++w){if(w===m){if(p>m){if(e.charCodeAt(u+w)===47)return e.slice(u+w+1);if(w===0)return e.slice(u+w)}else s>m&&(i.charCodeAt(n+w)===47?b=w:w===0&&(b=0));break}var _=i.charCodeAt(n+w),A=e.charCodeAt(u+w);if(_!==A)break;_===47&&(b=w)}var y="";for(w=n+b+1;w<=t;++w)(w===t||i.charCodeAt(w)===47)&&(y.length===0?y+="..":y+="/..");return y.length>0?y+e.slice(u+b):(u+=b,e.charCodeAt(u)===47&&++u,e.slice(u))},_makeLong:function(i){return i},dirname:function(i){if(a(i),i.length===0)return".";for(var e=i.charCodeAt(0),n=e===47,t=-1,s=!0,u=i.length-1;u>=1;--u)if(e=i.charCodeAt(u),e===47){if(!s){t=u;break}}else s=!1;return t===-1?n?"/":".":n&&t===1?"//":i.slice(0,t)},basename:function(i,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');a(i);var n=0,t=-1,s=!0,u;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e.length===i.length&&e===i)return"";var d=e.length-1,p=-1;for(u=i.length-1;u>=0;--u){var m=i.charCodeAt(u);if(m===47){if(!s){n=u+1;break}}else p===-1&&(s=!1,p=u+1),d>=0&&(m===e.charCodeAt(d)?--d===-1&&(t=u):(d=-1,t=p))}return n===t?t=p:t===-1&&(t=i.length),i.slice(n,t)}else{for(u=i.length-1;u>=0;--u)if(i.charCodeAt(u)===47){if(!s){n=u+1;break}}else t===-1&&(s=!1,t=u+1);return t===-1?"":i.slice(n,t)}},extname:function(i){a(i);for(var e=-1,n=0,t=-1,s=!0,u=0,d=i.length-1;d>=0;--d){var p=i.charCodeAt(d);if(p===47){if(!s){n=d+1;break}continue}t===-1&&(s=!1,t=d+1),p===46?e===-1?e=d:u!==1&&(u=1):e!==-1&&(u=-1)}return e===-1||t===-1||u===0||u===1&&e===t-1&&e===n+1?"":i.slice(e,t)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return l("/",i)},parse:function(i){a(i);var e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;var n=i.charCodeAt(0),t=n===47,s;t?(e.root="/",s=1):s=0;for(var u=-1,d=0,p=-1,m=!0,b=i.length-1,w=0;b>=s;--b){if(n=i.charCodeAt(b),n===47){if(!m){d=b+1;break}continue}p===-1&&(m=!1,p=b+1),n===46?u===-1?u=b:w!==1&&(w=1):u!==-1&&(w=-1)}return u===-1||p===-1||w===0||w===1&&u===p-1&&u===d+1?p!==-1&&(d===0&&t?e.base=e.name=i.slice(1,p):e.base=e.name=i.slice(d,p)):(d===0&&t?(e.name=i.slice(1,u),e.base=i.slice(1,p)):(e.name=i.slice(d,u),e.base=i.slice(d,p)),e.ext=i.slice(u,p)),d>0?e.dir=i.slice(0,d-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};return c.posix=c,Nr=c,Nr}function bh(r){if(typeof r=="string")r=new URL(r);else if(!(r instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(r.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Fr?yh(r):wh(r)}function yh(r){let a=r.hostname,o=r.pathname;for(let l=0;l<o.length;l++)if(o[l]==="%"){let c=o.codePointAt(l+2)||32;if(o[l+1]==="2"&&c===102||o[l+1]==="5"&&c===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(o=o.replace(Js,"\\"),o=decodeURIComponent(o),a!=="")return`\\\\${a}${o}`;{let l=o.codePointAt(1)|32,c=o[2];if(l<Qs||l>Zs||c!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return o.slice(1)}}function wh(r){if(r.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let a=r.pathname;for(let o=0;o<a.length;o++)if(a[o]==="%"){let l=a.codePointAt(o+2)||32;if(a[o+1]==="2"&&l===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(a)}function _h(r){let a=Di.resolve(r),o=r.charCodeAt(r.length-1);(o===Ks||Fr&&o===Gs)&&a[a.length-1]!==Di.sep&&(a+="/");let l=new URL("file://");return a.includes("%")&&(a=a.replace(Xs,"%25")),!Fr&&a.includes("\\")&&(a=a.replace(ea,"%5C")),a.includes(`
`)&&(a=a.replace(ta,"%0A")),a.includes("\r")&&(a=a.replace(ra,"%0D")),a.includes("	")&&(a=a.replace(na,"%09")),l.pathname=a,l}function zs(r){if(typeof r=="string")r=new URL(r);else if(!(r instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(r.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Wr?vh(r):Eh(r)}function vh(r){let a=r.hostname,o=r.pathname;for(let l=0;l<o.length;l++)if(o[l]==="%"){let c=o.codePointAt(l+2)||32;if(o[l+1]==="2"&&c===102||o[l+1]==="5"&&c===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(o=o.replace(pa,"\\"),o=decodeURIComponent(o),a!=="")return`\\\\${a}${o}`;{let l=o.codePointAt(1)|32,c=o[2];if(l<fa||l>da||c!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return o.slice(1)}}function Eh(r){if(r.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let a=r.pathname;for(let o=0;o<a.length;o++)if(a[o]==="%"){let l=a.codePointAt(o+2)||32;if(a[o+1]==="2"&&l===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(a)}function Ys(r){let a=Ni.resolve(r),o=r.charCodeAt(r.length-1);(o===ca||Wr&&o===ha)&&a[a.length-1]!==Ni.sep&&(a+="/");let l=new URL("file://");return a.includes("%")&&(a=a.replace(ga,"%25")),!Wr&&a.includes("\\")&&(a=a.replace(ma,"%5C")),a.includes(`
`)&&(a=a.replace(ba,"%0A")),a.includes("\r")&&(a=a.replace(ya,"%0D")),a.includes("	")&&(a=a.replace(wa,"%09")),l.pathname=a,l}var Ne,ko,bt,Ao,Co,xo,Io,Cr,mn,bn,yn,To,Oo,xr,Qt,Ir,Nr,Ui,Di,Ro,Gs,Ks,Qs,Zs,Fr,Js,Xs,ea,ta,ra,na,Po,ia,oa,sa,aa,la,ua,ha,ca,fa,da,Wr,pa,ga,ma,ba,ya,wa,Sh=at(()=>{pe(),me(),ge(),lh(),hh(),fh(),gh(),Hs(),Ne={},ko=$t,bt={isString:function(r){return typeof r=="string"},isObject:function(r){return typeof r=="object"&&r!==null},isNull:function(r){return r===null},isNullOrUndefined:function(r){return r==null}},Ne.parse=dr,Ne.resolve=function(r,a){return dr(r,!1,!0).resolve(a)},Ne.resolveObject=function(r,a){return r?dr(r,!1,!0).resolveObject(a):a},Ne.format=function(r){return bt.isString(r)&&(r=dr(r)),r instanceof gt?r.format():gt.prototype.format.call(r)},Ne.Url=gt,Ao=/^([a-z0-9.+-]+:)/i,Co=/:[0-9]*$/,xo=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Io=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),Cr=["'"].concat(Io),mn=["%","/","?",";","#"].concat(Cr),bn=["/","?","#"],yn=/^[+a-z0-9A-Z_-]{0,63}$/,To=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Oo={javascript:!0,"javascript:":!0},xr={javascript:!0,"javascript:":!0},Qt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Ir=wt,gt.prototype.parse=function(r,a,o){if(!bt.isString(r))throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var l=r.indexOf("?"),c=l!==-1&&l<r.indexOf("#")?"?":"#",i=r.split(c);i[0]=i[0].replace(/\\/g,"/");var e=r=i.join(c);if(e=e.trim(),!o&&r.split("#").length===1){var n=xo.exec(e);if(n)return this.path=e,this.href=e,this.pathname=n[1],n[2]?(this.search=n[2],this.query=a?Ir.parse(this.search.substr(1)):this.search.substr(1)):a&&(this.search="",this.query={}),this}var t=Ao.exec(e);if(t){var s=(t=t[0]).toLowerCase();this.protocol=s,e=e.substr(t.length)}if(o||t||e.match(/^\/\/[^@\/]+@[^@\/]+/)){var u=e.substr(0,2)==="//";!u||t&&xr[t]||(e=e.substr(2),this.slashes=!0)}if(!xr[t]&&(u||t&&!Qt[t])){for(var d,p,m=-1,b=0;b<bn.length;b++)(w=e.indexOf(bn[b]))!==-1&&(m===-1||w<m)&&(m=w);for((p=m===-1?e.lastIndexOf("@"):e.lastIndexOf("@",m))!==-1&&(d=e.slice(0,p),e=e.slice(p+1),this.auth=decodeURIComponent(d)),m=-1,b=0;b<mn.length;b++){var w;(w=e.indexOf(mn[b]))!==-1&&(m===-1||w<m)&&(m=w)}m===-1&&(m=e.length),this.host=e.slice(0,m),e=e.slice(m),this.parseHost(),this.hostname=this.hostname||"";var _=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!_)for(var A=this.hostname.split(/\./),y=(b=0,A.length);b<y;b++){var v=A[b];if(v&&!v.match(yn)){for(var L="",P=0,S=v.length;P<S;P++)v.charCodeAt(P)>127?L+="x":L+=v[P];if(!L.match(yn)){var C=A.slice(0,b),j=A.slice(b+1),Q=v.match(To);Q&&(C.push(Q[1]),j.unshift(Q[2])),j.length&&(e="/"+j.join(".")+e),this.hostname=C.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),_||(this.hostname=ko.toASCII(this.hostname));var ee=this.port?":"+this.port:"",ae=this.hostname||"";this.host=ae+ee,this.href+=this.host,_&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),e[0]!=="/"&&(e="/"+e))}if(!Oo[s])for(b=0,y=Cr.length;b<y;b++){var O=Cr[b];if(e.indexOf(O)!==-1){var K=encodeURIComponent(O);K===O&&(K=escape(O)),e=e.split(O).join(K)}}var J=e.indexOf("#");J!==-1&&(this.hash=e.substr(J),e=e.slice(0,J));var W=e.indexOf("?");if(W!==-1?(this.search=e.substr(W),this.query=e.substr(W+1),a&&(this.query=Ir.parse(this.query)),e=e.slice(0,W)):a&&(this.search="",this.query={}),e&&(this.pathname=e),Qt[s]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){ee=this.pathname||"";var be=this.search||"";this.path=ee+be}return this.href=this.format(),this},gt.prototype.format=function(){var r=this.auth||"";r&&(r=(r=encodeURIComponent(r)).replace(/%3A/i,":"),r+="@");var a=this.protocol||"",o=this.pathname||"",l=this.hash||"",c=!1,i="";this.host?c=r+this.host:this.hostname&&(c=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(c+=":"+this.port)),this.query&&bt.isObject(this.query)&&Object.keys(this.query).length&&(i=Ir.stringify(this.query));var e=this.search||i&&"?"+i||"";return a&&a.substr(-1)!==":"&&(a+=":"),this.slashes||(!a||Qt[a])&&c!==!1?(c="//"+(c||""),o&&o.charAt(0)!=="/"&&(o="/"+o)):c||(c=""),l&&l.charAt(0)!=="#"&&(l="#"+l),e&&e.charAt(0)!=="?"&&(e="?"+e),a+c+(o=o.replace(/[?#]/g,function(n){return encodeURIComponent(n)}))+(e=e.replace("#","%23"))+l},gt.prototype.resolve=function(r){return this.resolveObject(dr(r,!1,!0)).format()},gt.prototype.resolveObject=function(r){if(bt.isString(r)){var a=new gt;a.parse(r,!1,!0),r=a}for(var o=new gt,l=Object.keys(this),c=0;c<l.length;c++){var i=l[c];o[i]=this[i]}if(o.hash=r.hash,r.href==="")return o.href=o.format(),o;if(r.slashes&&!r.protocol){for(var e=Object.keys(r),n=0;n<e.length;n++){var t=e[n];t!=="protocol"&&(o[t]=r[t])}return Qt[o.protocol]&&o.hostname&&!o.pathname&&(o.path=o.pathname="/"),o.href=o.format(),o}if(r.protocol&&r.protocol!==o.protocol){if(!Qt[r.protocol]){for(var s=Object.keys(r),u=0;u<s.length;u++){var d=s[u];o[d]=r[d]}return o.href=o.format(),o}if(o.protocol=r.protocol,r.host||xr[r.protocol])o.pathname=r.pathname;else{for(var p=(r.pathname||"").split("/");p.length&&!(r.host=p.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),p[0]!==""&&p.unshift(""),p.length<2&&p.unshift(""),o.pathname=p.join("/")}if(o.search=r.search,o.query=r.query,o.host=r.host||"",o.auth=r.auth,o.hostname=r.hostname||r.host,o.port=r.port,o.pathname||o.search){var m=o.pathname||"",b=o.search||"";o.path=m+b}return o.slashes=o.slashes||r.slashes,o.href=o.format(),o}var w=o.pathname&&o.pathname.charAt(0)==="/",_=r.host||r.pathname&&r.pathname.charAt(0)==="/",A=_||w||o.host&&r.pathname,y=A,v=o.pathname&&o.pathname.split("/")||[],L=(p=r.pathname&&r.pathname.split("/")||[],o.protocol&&!Qt[o.protocol]);if(L&&(o.hostname="",o.port=null,o.host&&(v[0]===""?v[0]=o.host:v.unshift(o.host)),o.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(p[0]===""?p[0]=r.host:p.unshift(r.host)),r.host=null),A=A&&(p[0]===""||v[0]==="")),_)o.host=r.host||r.host===""?r.host:o.host,o.hostname=r.hostname||r.hostname===""?r.hostname:o.hostname,o.search=r.search,o.query=r.query,v=p;else if(p.length)v||(v=[]),v.pop(),v=v.concat(p),o.search=r.search,o.query=r.query;else if(!bt.isNullOrUndefined(r.search))return L&&(o.hostname=o.host=v.shift(),(Q=!!(o.host&&o.host.indexOf("@")>0)&&o.host.split("@"))&&(o.auth=Q.shift(),o.host=o.hostname=Q.shift())),o.search=r.search,o.query=r.query,bt.isNull(o.pathname)&&bt.isNull(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.href=o.format(),o;if(!v.length)return o.pathname=null,o.search?o.path="/"+o.search:o.path=null,o.href=o.format(),o;for(var P=v.slice(-1)[0],S=(o.host||r.host||v.length>1)&&(P==="."||P==="..")||P==="",C=0,j=v.length;j>=0;j--)(P=v[j])==="."?v.splice(j,1):P===".."?(v.splice(j,1),C++):C&&(v.splice(j,1),C--);if(!A&&!y)for(;C--;C)v.unshift("..");!A||v[0]===""||v[0]&&v[0].charAt(0)==="/"||v.unshift(""),S&&v.join("/").substr(-1)!=="/"&&v.push("");var Q,ee=v[0]===""||v[0]&&v[0].charAt(0)==="/";return L&&(o.hostname=o.host=ee?"":v.length?v.shift():"",(Q=!!(o.host&&o.host.indexOf("@")>0)&&o.host.split("@"))&&(o.auth=Q.shift(),o.host=o.hostname=Q.shift())),(A=A||o.host&&v.length)&&!ee&&v.unshift(""),v.length?o.pathname=v.join("/"):(o.pathname=null,o.path=null),bt.isNull(o.pathname)&&bt.isNull(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.auth=r.auth||o.auth,o.slashes=o.slashes||r.slashes,o.href=o.format(),o},gt.prototype.parseHost=function(){var r=this.host,a=Co.exec(r);a&&((a=a[0])!==":"&&(this.port=a.substr(1)),r=r.substr(0,r.length-a.length)),r&&(this.hostname=r)},Ne.Url,Ne.format,Ne.resolve,Ne.resolveObject,Nr={},Ui=!1,Di=mh(),Ro=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Ne.URL=typeof URL<"u"?URL:null,Ne.pathToFileURL=_h,Ne.fileURLToPath=bh,Ne.Url,Ne.format,Ne.resolve,Ne.resolveObject,Ne.URL,Gs=92,Ks=47,Qs=97,Zs=122,Fr=Ro==="win32",Js=/\//g,Xs=/%/g,ea=/\\/g,ta=/\n/g,ra=/\r/g,na=/\t/g,Po=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Ne.URL=typeof URL<"u"?URL:null,Ne.pathToFileURL=Ys,Ne.fileURLToPath=zs,ia=Ne.Url,oa=Ne.format,sa=Ne.resolve,aa=Ne.resolveObject,la=Ne.parse,ua=Ne.URL,ha=92,ca=47,fa=97,da=122,Wr=Po==="win32",pa=/\//g,ga=/%/g,ma=/\\/g,ba=/\n/g,ya=/\r/g,wa=/\t/g}),kh=ye((r,a)=>{pe(),me(),ge(),a.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),Qi=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0}),r.BufferedDuplex=void 0,r.writev=l;var a=sr(),o=(et(),De(Xe));function l(i,e){let n=new Array(i.length);for(let t=0;t<i.length;t++)typeof i[t].chunk=="string"?n[t]=o.Buffer.from(i[t].chunk,"utf8"):n[t]=i[t].chunk;this._write(o.Buffer.concat(n),"binary",e)}var c=class extends a.Duplex{constructor(i,e,n){super({objectMode:!0}),this.proxy=e,this.socket=n,this.writeQueue=[],i.objectMode||(this._writev=l.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",t=>{!this.destroyed&&this.readable&&this.push(t)})}_read(i){this.proxy.read(i)}_write(i,e,n){this.isSocketOpen?this.writeToProxy(i,e,n):this.writeQueue.push({chunk:i,encoding:e,cb:n})}_final(i){this.writeQueue=[],this.proxy.end(i)}_destroy(i,e){this.writeQueue=[],this.proxy.destroy(),e(i)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(i,e,n){this.proxy.write(i,e)===!1?this.proxy.once("drain",n):n()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:i,encoding:e,cb:n}=this.writeQueue.shift();this.writeToProxy(i,e,n)}}};r.BufferedDuplex=c}),Tr=ye(r=>{pe(),me(),ge();var a=r&&r.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(r,"__esModule",{value:!0}),r.streamBuilder=r.browserStreamBuilder=void 0;var o=(et(),De(Xe)),l=a(kh()),c=a(Rt()),i=sr(),e=a(Qr()),n=Qi(),t=(0,c.default)("mqttjs:ws"),s=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function u(A,y){let v=`${A.protocol}://${A.hostname}:${A.port}${A.path}`;return typeof A.transformWsUrl=="function"&&(v=A.transformWsUrl(v,A,y)),v}function d(A){let y=A;return A.port||(A.protocol==="wss"?y.port=443:y.port=80),A.path||(y.path="/"),A.wsOptions||(y.wsOptions={}),!e.default&&!A.forceNativeWebSocket&&A.protocol==="wss"&&s.forEach(v=>{Object.prototype.hasOwnProperty.call(A,v)&&!Object.prototype.hasOwnProperty.call(A.wsOptions,v)&&(y.wsOptions[v]=A[v])}),y}function p(A){let y=d(A);if(y.hostname||(y.hostname=y.host),!y.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let v=new URL(document.URL);y.hostname=v.hostname,y.port||(y.port=Number(v.port))}return y.objectMode===void 0&&(y.objectMode=!(y.binary===!0||y.binary===void 0)),y}function m(A,y,v){t("createWebSocket"),t(`protocol: ${v.protocolId} ${v.protocolVersion}`);let L=v.protocolId==="MQIsdp"&&v.protocolVersion===3?"mqttv3.1":"mqtt";t(`creating new Websocket for url: ${y} and protocol: ${L}`);let P;return v.createWebsocket?P=v.createWebsocket(y,[L],v):P=new l.default(y,[L],v.wsOptions),P}function b(A,y){let v=y.protocolId==="MQIsdp"&&y.protocolVersion===3?"mqttv3.1":"mqtt",L=u(y,A),P;return y.createWebsocket?P=y.createWebsocket(L,[v],y):P=new WebSocket(L,[v]),P.binaryType="arraybuffer",P}var w=(A,y)=>{t("streamBuilder");let v=d(y);v.hostname=v.hostname||v.host||"localhost";let L=u(v,A),P=m(A,L,v),S=l.default.createWebSocketStream(P,v.wsOptions);return S.url=L,P.on("close",()=>{S.destroy()}),S};r.streamBuilder=w;var _=(A,y)=>{t("browserStreamBuilder");let v,L=p(y).browserBufferSize||1024*512,P=y.browserBufferTimeout||1e3,S=!y.objectMode,C=b(A,y),j=ee(y,W,be);y.objectMode||(j._writev=n.writev.bind(j)),j.on("close",()=>{C.close()});let Q=typeof C.addEventListener<"u";C.readyState===C.OPEN?(v=j,v.socket=C):(v=new n.BufferedDuplex(y,j,C),Q?C.addEventListener("open",ae):C.onopen=ae),Q?(C.addEventListener("close",O),C.addEventListener("error",K),C.addEventListener("message",J)):(C.onclose=O,C.onerror=K,C.onmessage=J);function ee(ce,le,Se){let Y=new i.Transform({objectMode:ce.objectMode});return Y._write=le,Y._flush=Se,Y}function ae(){t("WebSocket onOpen"),v instanceof n.BufferedDuplex&&v.socketReady()}function O(ce){t("WebSocket onClose",ce),v.end(),v.destroy()}function K(ce){t("WebSocket onError",ce);let le=new Error("WebSocket error");le.event=ce,v.destroy(le)}async function J(ce){if(!j||j.destroyed||!j.readable)return;let{data:le}=ce;le instanceof ArrayBuffer?le=o.Buffer.from(le):le instanceof Blob?le=o.Buffer.from(await new Response(le).arrayBuffer()):le=o.Buffer.from(le,"utf8"),j.push(le)}function W(ce,le,Se){if(C.bufferedAmount>L){setTimeout(W,P,ce,le,Se);return}S&&typeof ce=="string"&&(ce=o.Buffer.from(ce,"utf8"));try{C.send(ce)}catch(Y){return Se(Y)}Se()}function be(ce){C.close(),ce()}return v};r.browserStreamBuilder=_}),Zi={};ur(Zi,{Server:()=>qe,Socket:()=>qe,Stream:()=>qe,_createServerHandle:()=>qe,_normalizeArgs:()=>qe,_setSimultaneousAccepts:()=>qe,connect:()=>qe,createConnection:()=>qe,createServer:()=>qe,default:()=>_a,isIP:()=>qe,isIPv4:()=>qe,isIPv6:()=>qe});function qe(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var _a,va=at(()=>{pe(),me(),ge(),_a={_createServerHandle:qe,_normalizeArgs:qe,_setSimultaneousAccepts:qe,connect:qe,createConnection:qe,createServer:qe,isIP:qe,isIPv4:qe,isIPv6:qe,Server:qe,Socket:qe,Stream:qe}}),Ea=ye((r,a)=>{pe(),me(),ge(),a.exports={}}),jo=ye(r=>{pe(),me(),ge();var a=r&&r.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(r,"__esModule",{value:!0});var o=a((va(),De(Zi))),l=a(Rt()),c=a(Ea()),i=(0,l.default)("mqttjs:tcp"),e=(n,t)=>{if(t.port=t.port||1883,t.hostname=t.hostname||t.host||"localhost",t.socksProxy)return(0,c.default)(t.hostname,t.port,t.socksProxy,{timeout:t.socksTimeout});let{port:s,path:u}=t,d=t.hostname;return i("port %d and host %s",s,d),o.default.createConnection({port:s,host:d,path:u})};r.default=e}),Sa={};ur(Sa,{default:()=>ka});var ka,Ah=at(()=>{pe(),me(),ge(),ka={}}),Bo=ye(r=>{pe(),me(),ge();var a=r&&r.__rest||function(u,d){var p={};for(var m in u)Object.prototype.hasOwnProperty.call(u,m)&&d.indexOf(m)<0&&(p[m]=u[m]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,m=Object.getOwnPropertySymbols(u);b<m.length;b++)d.indexOf(m[b])<0&&Object.prototype.propertyIsEnumerable.call(u,m[b])&&(p[m[b]]=u[m[b]]);return p},o=r&&r.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(r,"__esModule",{value:!0});var l=o((Ah(),De(Sa))),c=o((va(),De(Zi))),i=o(Rt()),e=o(Ea()),n=(0,i.default)("mqttjs:tls");function t(u){let{host:d,port:p,socksProxy:m}=u,b=a(u,["host","port","socksProxy"]);return l.default.connect(m?Object.assign(Object.assign({},b),{socket:(0,e.default)(d,p,m,{timeout:u.socksTimeout})}):u)}var s=(u,d)=>{d.port=d.port||8883,d.host=d.hostname||d.host||"localhost",c.default.isIP(d.host)===0&&(d.servername=d.host),d.rejectUnauthorized=d.rejectUnauthorized!==!1,delete d.path,n("port %d host %s rejectUnauthorized %b",d.port,d.host,d.rejectUnauthorized);let p=t(d);p.on("secureConnect",()=>{d.rejectUnauthorized&&!p.authorized?p.emit("error",new Error("TLS not authorized")):p.removeListener("error",m)});function m(b){d.rejectUnauthorized&&u.emit("error",b),p.end()}return p.on("error",m),p};r.default=s}),Mo=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0});var a=(et(),De(Xe)),o=sr(),l=Qi(),c,i,e;function n(){let p=new o.Transform;return p._write=(m,b,w)=>{c.send({data:m.buffer,success(){w()},fail(_){w(new Error(_))}})},p._flush=m=>{c.close({success(){m()}})},p}function t(p){p.hostname||(p.hostname="localhost"),p.path||(p.path="/"),p.wsOptions||(p.wsOptions={})}function s(p,m){let b=p.protocol==="wxs"?"wss":"ws",w=`${b}://${p.hostname}${p.path}`;return p.port&&p.port!==80&&p.port!==443&&(w=`${b}://${p.hostname}:${p.port}${p.path}`),typeof p.transformWsUrl=="function"&&(w=p.transformWsUrl(w,p,m)),w}function u(){c.onOpen(()=>{e.socketReady()}),c.onMessage(p=>{let{data:m}=p;m instanceof ArrayBuffer?m=a.Buffer.from(m):m=a.Buffer.from(m,"utf8"),i.push(m)}),c.onClose(()=>{e.emit("close"),e.end(),e.destroy()}),c.onError(p=>{let m=new Error(p.errMsg);e.destroy(m)})}var d=(p,m)=>{if(m.hostname=m.hostname||m.host,!m.hostname)throw new Error("Could not determine host. Specify host manually.");let b=m.protocolId==="MQIsdp"&&m.protocolVersion===3?"mqttv3.1":"mqtt";t(m);let w=s(m,p);c=wx.connectSocket({url:w,protocols:[b]}),i=n(),e=new l.BufferedDuplex(m,i,c),e._destroy=(A,y)=>{c.close({success(){y&&y(A)}})};let _=e.destroy;return e.destroy=(A,y)=>(e.destroy=_,setTimeout(()=>{c.close({fail(){e._destroy(A,y)}})},0),e),u(),e};r.default=d}),Lo=ye(r=>{pe(),me(),ge(),Object.defineProperty(r,"__esModule",{value:!0});var a=(et(),De(Xe)),o=sr(),l=Qi(),c,i,e,n=!1;function t(){let m=new o.Transform;return m._write=(b,w,_)=>{c.sendSocketMessage({data:b.buffer,success(){_()},fail(){_(new Error)}})},m._flush=b=>{c.closeSocket({success(){b()}})},m}function s(m){m.hostname||(m.hostname="localhost"),m.path||(m.path="/"),m.wsOptions||(m.wsOptions={})}function u(m,b){let w=m.protocol==="alis"?"wss":"ws",_=`${w}://${m.hostname}${m.path}`;return m.port&&m.port!==80&&m.port!==443&&(_=`${w}://${m.hostname}:${m.port}${m.path}`),typeof m.transformWsUrl=="function"&&(_=m.transformWsUrl(_,m,b)),_}function d(){n||(n=!0,c.onSocketOpen(()=>{e.socketReady()}),c.onSocketMessage(m=>{if(typeof m.data=="string"){let b=a.Buffer.from(m.data,"base64");i.push(b)}else{let b=new FileReader;b.addEventListener("load",()=>{let w=b.result;w instanceof ArrayBuffer?w=a.Buffer.from(w):w=a.Buffer.from(w,"utf8"),i.push(w)}),b.readAsArrayBuffer(m.data)}}),c.onSocketClose(()=>{e.end(),e.destroy()}),c.onSocketError(m=>{e.destroy(m)}))}var p=(m,b)=>{if(b.hostname=b.hostname||b.host,!b.hostname)throw new Error("Could not determine host. Specify host manually.");let w=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt";s(b);let _=u(b,m);return c=b.my,c.connectSocket({url:_,protocols:w}),i=t(),e=new l.BufferedDuplex(b,i,c),d(),e};r.default=p}),Ch=ye(r=>{pe(),me(),ge();var a=r&&r.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(r,"__esModule",{value:!0}),r.connectAsync=u;var o=a(Rt()),l=a((Sh(),De(qs))),c=a(Ri()),i=a(Qr());typeof(Le==null?void 0:Le.nextTick)!="function"&&(Le.nextTick=setImmediate);var e=(0,o.default)("mqttjs"),n=null;function t(d){let p;d.auth&&(p=d.auth.match(/^(.+):(.+)$/),p?(d.username=p[1],d.password=p[2]):d.username=d.auth)}function s(d,p){var m,b,w;if(e("connecting to an MQTT broker..."),typeof d=="object"&&!p&&(p=d,d=""),p=p||{},d&&typeof d=="string"){let y=l.default.parse(d,!0),v={};if(y.port!=null&&(v.port=Number(y.port)),v.host=y.hostname,v.query=y.query,v.auth=y.auth,v.protocol=y.protocol,v.path=y.path,p=Object.assign(Object.assign({},v),p),!p.protocol)throw new Error("Missing protocol");p.protocol=p.protocol.replace(/:$/,"")}if(p.unixSocket=p.unixSocket||((m=p.protocol)===null||m===void 0?void 0:m.includes("+unix")),p.unixSocket?p.protocol=p.protocol.replace("+unix",""):!(!((b=p.protocol)===null||b===void 0)&&b.startsWith("ws"))&&!(!((w=p.protocol)===null||w===void 0)&&w.startsWith("wx"))&&delete p.path,t(p),p.query&&typeof p.query.clientId=="string"&&(p.clientId=p.query.clientId),i.default||p.unixSocket?p.socksProxy=void 0:p.socksProxy===void 0&&typeof Le<"u"&&(p.socksProxy=Le.env.MQTTJS_SOCKS_PROXY),p.cert&&p.key)if(p.protocol){if(["mqtts","wss","wxs","alis"].indexOf(p.protocol)===-1)switch(p.protocol){case"mqtt":p.protocol="mqtts";break;case"ws":p.protocol="wss";break;case"wx":p.protocol="wxs";break;case"ali":p.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${p.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(n||(n={},!i.default&&!p.forceNativeWebSocket?(n.ws=Tr().streamBuilder,n.wss=Tr().streamBuilder,n.mqtt=jo().default,n.tcp=jo().default,n.ssl=Bo().default,n.tls=n.ssl,n.mqtts=Bo().default):(n.ws=Tr().browserStreamBuilder,n.wss=Tr().browserStreamBuilder,n.wx=Mo().default,n.wxs=Mo().default,n.ali=Lo().default,n.alis=Lo().default)),!n[p.protocol]){let y=["mqtts","wss"].indexOf(p.protocol)!==-1;p.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((v,L)=>y&&L%2===0?!1:typeof n[v]=="function")[0]}if(p.clean===!1&&!p.clientId)throw new Error("Missing clientId for unclean clients");p.protocol&&(p.defaultProtocol=p.protocol);function _(y){return p.servers&&((!y._reconnectCount||y._reconnectCount===p.servers.length)&&(y._reconnectCount=0),p.host=p.servers[y._reconnectCount].host,p.port=p.servers[y._reconnectCount].port,p.protocol=p.servers[y._reconnectCount].protocol?p.servers[y._reconnectCount].protocol:p.defaultProtocol,p.hostname=p.host,y._reconnectCount++),e("calling streambuilder for",p.protocol),n[p.protocol](y,p)}let A=new c.default(_,p);return A.on("error",()=>{}),A}function u(d,p,m=!0){return new Promise((b,w)=>{let _=s(d,p),A={connect:v=>{y(),b(_)},end:()=>{y(),b(_)},error:v=>{y(),_.end(),w(v)}};m===!1&&(A.close=()=>{A.error(new Error("Couldn't connect to server"))});function y(){Object.keys(A).forEach(v=>{_.off(v,A[v])})}Object.keys(A).forEach(v=>{_.on(v,A[v])})})}r.default=s}),No=ye(r=>{pe(),me(),ge();var a=r&&r.__createBinding||(Object.create?function(m,b,w,_){_===void 0&&(_=w);var A=Object.getOwnPropertyDescriptor(b,w);(!A||("get"in A?!b.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(m,_,A)}:function(m,b,w,_){_===void 0&&(_=w),m[_]=b[w]}),o=r&&r.__setModuleDefault||(Object.create?function(m,b){Object.defineProperty(m,"default",{enumerable:!0,value:b})}:function(m,b){m.default=b}),l=r&&r.__importStar||function(){var m=function(b){return m=Object.getOwnPropertyNames||function(w){var _=[];for(var A in w)Object.prototype.hasOwnProperty.call(w,A)&&(_[_.length]=A);return _},m(b)};return function(b){if(b&&b.__esModule)return b;var w={};if(b!=null)for(var _=m(b),A=0;A<_.length;A++)_[A]!=="default"&&a(w,b,_[A]);return o(w,b),w}}(),c=r&&r.__exportStar||function(m,b){for(var w in m)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&a(b,m,w)},i=r&&r.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(r,"__esModule",{value:!0}),r.ReasonCodes=r.KeepaliveManager=r.UniqueMessageIdProvider=r.DefaultMessageIdProvider=r.Store=r.MqttClient=r.connectAsync=r.connect=r.Client=void 0;var e=i(Ri());r.MqttClient=e.default;var n=i(Es());r.DefaultMessageIdProvider=n.default;var t=i(ah());r.UniqueMessageIdProvider=t.default;var s=i(Ss());r.Store=s.default;var u=l(Ch());r.connect=u.default,Object.defineProperty(r,"connectAsync",{enumerable:!0,get:function(){return u.connectAsync}});var d=i(Ds());r.KeepaliveManager=d.default,r.Client=e.default,c(Ri(),r),c(cr(),r);var p=Kr();Object.defineProperty(r,"ReasonCodes",{enumerable:!0,get:function(){return p.ReasonCodes}})}),xh=ye(r=>{pe(),me(),ge();var a=r&&r.__createBinding||(Object.create?function(e,n,t,s){s===void 0&&(s=t);var u=Object.getOwnPropertyDescriptor(n,t);(!u||("get"in u?!n.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,s,u)}:function(e,n,t,s){s===void 0&&(s=t),e[s]=n[t]}),o=r&&r.__setModuleDefault||(Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n}),l=r&&r.__importStar||function(){var e=function(n){return e=Object.getOwnPropertyNames||function(t){var s=[];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(s[s.length]=u);return s},e(n)};return function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var s=e(n),u=0;u<s.length;u++)s[u]!=="default"&&a(t,n,s[u]);return o(t,n),t}}(),c=r&&r.__exportStar||function(e,n){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(n,t)&&a(n,e,t)};Object.defineProperty(r,"__esModule",{value:!0});var i=l(No());r.default=i,c(No(),r)});const Ih=xh();/*! Bundled license information:

@jspm/core/nodelibs/browser/buffer.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/var Ur={exports:{}},Th=Ur.exports,Uo;function Oh(){return Uo||(Uo=1,function(r,a){(function(o,l){r.exports=l()})(Th,function(){return function(o,l,c){o=o||{};var i=l.prototype,e={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function n(s,u,d,p){return i.fromToBase(s,u,d,p)}c.en.relativeTime=e,i.fromToBase=function(s,u,d,p,m){for(var b,w,_,A=d.$locale().relativeTime||e,y=o.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],v=y.length,L=0;L<v;L+=1){var P=y[L];P.d&&(b=p?c(s).diff(d,P.d,!0):d.diff(s,P.d,!0));var S=(o.rounding||Math.round)(Math.abs(b));if(_=b>0,S<=P.r||!P.r){S<=1&&L>0&&(P=y[L-1]);var C=A[P.l];m&&(S=m(""+S)),w=typeof C=="string"?C.replace("%d",S):C(S,u,P.l,_);break}}if(u)return w;var j=_?A.future:A.past;return typeof j=="function"?j(w):j.replace("%s",w)},i.to=function(s,u){return n(s,u,this,!0)},i.from=function(s,u){return n(s,u,this)};var t=function(s){return s.$u?c.utc():c()};i.toNow=function(s){return this.to(t(this),s)},i.fromNow=function(s){return this.from(t(this),s)}}})}(Ur)),Ur.exports}var Rh=Oh();const Ph=cl(Rh);_t.extend(Ph);const Qh=()=>{const{data:o,isSuccess:l}=fl({limit:10,offset:0}),c=$i(i=>i.authStore);return $.jsx($.Fragment,{children:l&&o&&c.mqtt&&c.user&&$.jsx(jh,{lastNotifications:o.data,newOffset:10,limitValue:10,config:{mqtt:c.mqtt,user:c.user}})})},jh=({lastNotifications:r,limitValue:a,newOffset:o,config:l})=>{const[c,i]=Be.useState(r),[e]=Be.useState(a),[n,t]=Be.useState(o),[s,u]=Be.useState(!0),[d,p]=Be.useState(!0),[m,b]=Be.useState(!1),[w,_]=Be.useState(null),[A,y]=Be.useState(!1),[v]=dl(),[L]=pl(),[P]=gl(),S=Be.useRef(null),C=Be.useRef(null),j=Be.useRef(null),[Q,ee]=Be.useState(null),ae=X=>{ee(X.currentTarget)},O=()=>{ee(null)},K=async()=>{try{await L().unwrap(),i(X=>X.map(x=>({...x,leido:1})))}catch(X){console.error(X)}},J=!!Q,W=J?"notification-popover":void 0,be=Be.useCallback(async()=>{if(!(m||!s||w)){b(!0),_(null);try{const X=await P({limit:e,offset:n,unread:d?void 0:!0}).unwrap();X.data.length===0?u(!1):(i(x=>[...x,...X.data]),t(x=>x+e),u(X.data.length===e))}catch{_("Error al cargar notificaciones")}finally{b(!1)}}},[n,e,d,m,s,w]),ce=async X=>{try{if(c.some(z=>z.n_uuid===X.n_uuid))return;const te=_t().format("YYYY-MM-DD HH:mm:ss"),de=kl(),U={nu_id:de,u_id:0,n_uuid:X.n_uuid,fecha_creacion:"",fecha_entrega:te,fecha_lectura:"",leido:0,notificacion:{n_id:0,n_uuid:X.n_uuid,evento:X.evento,titulo:X.titulo,mensaje:X.mensaje,data:X.data,fecha:X.fecha}};if(_l.success(()=>$.jsx(ht,{children:$.jsx(Je,{variant:"body1",children:U.notificacion.mensaje})})),i(z=>[U,...z]),(await v({nu_id:de,fecha_entrega:te,n_uuid:X.n_uuid})).error)return}catch(x){console.error(x)}},le=X=>{i(x=>x.map(te=>te.nu_id===X?{...te,leido:1}:te))},Se=Be.useMemo(()=>{const X=c.reduce((de,U)=>{const ke=_t(U.notificacion.fecha).format("YYYY-MM-DD");return de[ke]||(de[ke]=[]),de[ke].push(U),de},{});Object.keys(X).forEach(de=>{X[de].sort((U,ke)=>_t(ke.notificacion.fecha).unix()-_t(U.notificacion.fecha).unix())});const x=Object.keys(X).sort((de,U)=>_t(U,"YYYY-MM-DD").unix()-_t(de,"YYYY-MM-DD").unix()),te={};return x.forEach(de=>{te[de]=X[de]}),te},[c]),Y=Be.useMemo(()=>c.filter(X=>X.leido===0).length,[c]);return Be.useEffect(()=>{y(!0)},[r]),Be.useEffect(()=>(S.current&&S.current.disconnect(),J&&C.current&&(S.current=new IntersectionObserver(X=>{X[0].isIntersecting&&be()},{root:j.current,threshold:.1}),S.current.observe(C.current)),()=>{S.current&&S.current.disconnect()}),[be,J]),Bh({onMessage:ce,isInitNotification:A,config:{topic:l.user.rl_id===ml.Invitado?`notifications/contrata/${l.user.co_id}`:"notifications/admin",mqtt:l.mqtt,user_id:l.user.u_id}}),$.jsxs($.Fragment,{children:[$.jsx(Wo,{onClick:ae,"aria-describedby":W,children:$.jsx(jl,{color:"error",className:"cursor-pointer",variant:"dot",overlap:"circular",invisible:Y===0,anchorOrigin:{vertical:"top",horizontal:"right"},children:$.jsx(Zl,{})})}),$.jsx(bl,{id:W,open:J,anchorEl:Q,onClose:O,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},disablePortal:!0,slotProps:{paper:{sx:{backgroundColor:"transparent",backgroundImage:"inherit",border:"none",boxShadow:"none",mt:X=>`calc((${X.mixins.toolbar.minHeight}px - 40px) / 2)`}}},children:$.jsx(Vo,{sx:{boxShadow:"0px 4px 18px 0px rgba(42, 55, 60, 0.16)",":hover":{boxShadow:"0px 4px 18px 0px rgba(42, 55, 60, 0.16)"}},children:$.jsxs(tt,{spacing:1,children:[$.jsxs(tt,{spacing:1,px:2,pt:2,children:[$.jsx(Je,{variant:"h5",children:"Notificaciones"}),$.jsxs(tt,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between",children:[$.jsxs(tt,{direction:"row",spacing:2,children:[$.jsx(Do,{selected:d===!0,onClick:()=>{p(!0),i([]),t(0),u(!0)},children:"Todo"}),$.jsx(Do,{selected:d===!1,onClick:()=>{p(!1),i([]),t(0),u(!0)},children:"No leídos"})]}),$.jsx(wn,{variant:"contained",color:"primary",size:"medium",onClick:K,sx:{whiteSpace:"nowrap"},children:"Leer todos"})]})]}),$.jsxs("div",{ref:j,style:{maxHeight:"400px",width:"400px",overflowY:"auto",padding:"1rem",display:"flex",flexDirection:"column",gap:10},children:[Object.entries(Se).map(([X,x],te)=>$.jsxs(tt,{spacing:1,children:[$.jsx(Je,{variant:"subtitle1",color:"textPrimary",children:Ho(`${_t().format("YYYY-MM-DD")===X?"Hoy, ":""}${_t(X,"YYYY-MM-DD").format("dddd D [de] MMMM , YYYY")}`)}),$.jsx(tt,{spacing:1,children:x.map((de,U,ke)=>$.jsx(Mh,{data:de,hasDivider:U<ke.length-1,onReadNotification:le},de.nu_id))})]},te)),$.jsx("div",{ref:C}),m&&$.jsx(Je,{variant:"body1",color:"textSecondary",children:"Cargando más notificaciones..."}),w&&$.jsxs(Je,{variant:"body1",color:"error",children:["Error: ",String(w)]}),!s&&!m&&!w&&$.jsx(Je,{variant:"body1",color:"textSecondary",children:"No existen registros adicionales de notificaciones."})]},JSON.stringify(d))]})})})]})},Bh=({onMessage:r,isInitNotification:a,config:o})=>{Be.useEffect(()=>{if(!a)return;const l=Ih.connect(`${window.location.protocol==="https:"?"wss":"ws"}://`,{port:o.mqtt.port,username:o.mqtt.user,password:o.mqtt.password,clean:!1,clientId:`web_client_${o.user_id}`});return l.on("connect",()=>{l.subscribe(o.topic,{qos:1},c=>{c&&console.error(c)})}),l.on("message",(c,i)=>{try{const e=JSON.parse(i.toString());r(e)}catch(e){console.error(e)}}),l.on("error",c=>{console.error(c)}),()=>{l.end(!0,c=>{c&&console.error(c)})}},[a])},Mh=({hasDivider:r,data:a,onReadNotification:o})=>{const[l,c]=Be.useState(a),[i]=yl(),e=async()=>{if(l.leido===0)try{await i({nu_id:l.nu_id}).unwrap(),c(n=>({...n,leido:1})),o(l.nu_id)}catch(n){console.error(n)}};return Be.useEffect(()=>{c(a)},[a]),$.jsxs($.Fragment,{children:[$.jsxs(tt,{direction:"row",spacing:1,padding:1,sx:{borderRadius:"10px",cursor:l.leido===0?"pointer":void 0,":hover":{backgroundColor:"tertiary.opacityLight"}},onClick:e,children:[Lh(l.notificacion.evento),$.jsxs(tt,{spacing:.5,flex:1,children:[$.jsx(Je,{variant:"body2",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:Ho(_t(l.notificacion.fecha).fromNow())}),$.jsx(Je,{variant:"subtitle1",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:l.notificacion.titulo}),$.jsx(Je,{variant:"body1",children:l.notificacion.mensaje})]}),l.leido===0&&$.jsx(ht,{width:12,height:12,sx:{borderRadius:"50%",backgroundColor:"primary.700"}})]}),r&&$.jsx($o,{})]})},Lh=r=>{switch(r){case"ticket.not.attended":return $.jsx(ht,{width:40,height:40,sx:{borderRadius:"50%",display:"grid",placeContent:"center",backgroundColor:"warning.opacityDarker",color:"text.warning"},children:$.jsx(an,{})});case"ticket.requested":return $.jsx(ht,{width:40,height:40,sx:{borderRadius:"50%",display:"grid",placeContent:"center",backgroundColor:"tertiary.opacityDarker",color:"text.tertiary"},children:$.jsx(an,{})});case"ticket.cancelled":return $.jsx(ht,{width:40,height:40,sx:{borderRadius:"50%",display:"grid",placeContent:"center",backgroundColor:"error.opacityDarker",color:"text.error"},children:$.jsx(an,{isCanceled:!0})});case"alarm.camera.disconnected":return $.jsx(ht,{width:40,height:40,sx:{borderRadius:"50%",display:"grid",placeContent:"center",backgroundColor:"error.opacityDarker",color:"text.error"},children:$.jsx(Sl,{})});case"alarm.controller.disconnected":return $.jsx(ht,{width:40,height:40,sx:{borderRadius:"50%",display:"grid",placeContent:"center",backgroundColor:"error.opacityDarker",color:"text.error"},children:$.jsx(Jl,{})});case"alarm.pinsalida.activated":return $.jsx(ht,{width:40,height:40,sx:{borderRadius:"50%",display:"grid",placeContent:"center",backgroundColor:"error.opacityDarker",color:"text.error"},children:$.jsx(ao,{})});case"max.temperature.exceeded":return $.jsx(ht,{width:40,height:40,sx:{borderRadius:"50%",display:"grid",placeContent:"center",backgroundColor:"error.opacityDarker",color:"text.error"},children:$.jsx(wl,{state:"high"})});default:return $.jsx(ht,{width:40,height:40,sx:{borderRadius:"50%",display:"grid",placeContent:"center",backgroundColor:"tertiary.opacityDarker",color:"text.tertiary"},children:$.jsx(ao,{})})}},Do=({children:r,selected:a,onClick:o})=>$.jsx(ht,{sx:{py:1,px:2,borderRadius:"10px",border:"1px solid",borderColor:"custom.outlineBoder",":hover":{...a&&{backgroundColor:"primary.opacityDark"},...!a&&{backgroundColor:"primary.opacityLight"}},...a&&{backgroundColor:"primary.opacityDark",borderColor:"transparent"},cursor:"pointer"},onClick:o,children:$.jsx(Je,{variant:"subtitle1",color:"textPrimary",sx:{whiteSpace:"nowrap"},children:r})}),Zh=()=>$.jsx(vl,{position:"bottom-right"});export{qh as A,Zh as C,Gh as F,Qh as N,Kh as P,Yh as T,zh as a};
